<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/f76bfe29b96cf8a1.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-b7059c8cc37787ef.js"/><script src="/_next/static/chunks/4bd1b696-1c20c52a7d48565d.js" async=""></script><script src="/_next/static/chunks/517-56c8ed8f1dd1ffbe.js" async=""></script><script src="/_next/static/chunks/main-app-67bb3b1da9f5c788.js" async=""></script><script src="/_next/static/chunks/537-32c52f136802c48f.js" async=""></script><script src="/_next/static/chunks/673-8f55286e245006fb.js" async=""></script><script src="/_next/static/chunks/app/layout-a557f0e5b59d7b71.js" async=""></script><script src="/_next/static/chunks/328-d02b7e1054113488.js" async=""></script><script src="/_next/static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js" async=""></script><title>CAE Course</title><link rel="icon" type="image/svg+xml" href="/favicon.svg"/><title>Logs</title><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-emotion="mui-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="mui-global 1o1x9wj">blockquote{border-left:5px solid #1976d2;background-color:rgba(0, 0, 0, 0.04);padding:0.5em;margin:1em 0;}table{width:100%;border-collapse:collapse;overflow-x:auto;display:block;}th{border:1px solid rgba(0, 0, 0, 0.12);padding:8px;background-color:#1976d2;color:#fff;font-weight:bold;}td{border:1px solid rgba(0, 0, 0, 0.12);padding:8px;}tr:nth-of-type(even){background-color:rgba(0, 0, 0, 0.04);}tr:hover{background-color:rgba(0, 0, 0, 0.08);}</style><style data-emotion="mui 1ru2rpl hjjbnr y50vno awgou1 tdg6lc 1mm3lge q7mezt 1myx5lw 130f8nx 6n7j50 mcfrop o34szc 1xdhyk6 13wylk3 1oz5b8u dnbkh3 0 5pbuzx 981n55 bxmwoh 20tnkx 1lkm1he 1gw0kg2 1uzdcm9 kxijxt wfm2y7 51eq8m 1ttcndq ub0mep 1nd5pgh ihsi0z 14rdsw0 fyswvn">.mui-1ru2rpl{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;margin:0px;}.mui-hjjbnr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);background-color:#1976d2;color:#fff;}.mui-y50vno{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);background-color:#1976d2;color:#fff;}.mui-awgou1{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.mui-awgou1{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.mui-awgou1{min-height:48px;}}}@media (min-width:600px){.mui-awgou1{min-height:64px;}}.mui-tdg6lc{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);margin-left:-12px;color:inherit;margin-right:16px;}.mui-tdg6lc:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-tdg6lc:hover{background-color:transparent;}}.mui-tdg6lc.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-tdg6lc.MuiIconButton-loading{color:transparent;}.mui-1mm3lge{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);margin-left:-12px;color:inherit;margin-right:16px;}.mui-1mm3lge::-moz-focus-inner{border-style:none;}.mui-1mm3lge.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1mm3lge{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1mm3lge:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-1mm3lge:hover{background-color:transparent;}}.mui-1mm3lge.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-1mm3lge.MuiIconButton-loading{color:transparent;}.mui-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}.mui-1myx5lw{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;letter-spacing:0.0075em;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:600px){.mui-1myx5lw{display:block;}}@media (min-width:0px){.mui-130f8nx{display:none;}}@media (min-width:600px){.mui-130f8nx{display:block;}}.mui-6n7j50{display:inline;}.mui-mcfrop{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.mui-mcfrop:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-mcfrop.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.mui-mcfrop:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.mui-mcfrop.MuiButton-loading{color:transparent;}.mui-o34szc{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.mui-o34szc::-moz-focus-inner{border-style:none;}.mui-o34szc.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-o34szc{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-o34szc:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-o34szc.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.mui-o34szc:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.mui-o34szc.MuiButton-loading{color:transparent;}.mui-1oz5b8u{z-index:1200;}@media (min-width:0px){.mui-1oz5b8u{display:block;}}@media (min-width:600px){.mui-1oz5b8u{display:none;}}.mui-1oz5b8u .MuiDrawer-paper{box-sizing:border-box;width:240px;color:#fff;background-color:#1976d2;}.mui-dnbkh3{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:16px;padding-right:16px;padding:1rem;word-wrap:break-word;-webkit-flex:1;-ms-flex:1;flex:1;}@media (min-width:600px){.mui-dnbkh3{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.mui-dnbkh3{max-width:1200px;}}.mui-5pbuzx{--Grid-columns:12;--Grid-columnSpacing:16px;--Grid-rowSpacing:16px;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;min-width:0;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:var(--Grid-rowSpacing) var(--Grid-columnSpacing);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#1976d2;color:#fff;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:16px;}.mui-5pbuzx >*{--Grid-parent-columns:12;}.mui-5pbuzx >*{--Grid-parent-columnSpacing:16px;}.mui-5pbuzx >*{--Grid-parent-rowSpacing:16px;}.mui-981n55{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;text-align:center;}@media (min-width:900px){.mui-981n55{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.mui-bxmwoh{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:0.875rem;line-height:1.43;letter-spacing:0.01071em;}.mui-20tnkx{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 12 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 12) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));min-width:0;box-sizing:border-box;}@media (min-width:900px){.mui-20tnkx{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;-webkit-flex-basis:auto;-ms-flex-preferred-size:auto;flex-basis:auto;width:calc(100% * 4 / var(--Grid-parent-columns) - (var(--Grid-parent-columns) - 4) * (var(--Grid-parent-columnSpacing) / var(--Grid-parent-columns)));}}.mui-1lkm1he{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}@media (min-width:0px){.mui-1lkm1he{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}@media (min-width:900px){.mui-1lkm1he{-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}.mui-1gw0kg2{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);color:#fff;}.mui-1gw0kg2:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-1gw0kg2:hover{background-color:transparent;}}.mui-1gw0kg2.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-1gw0kg2.MuiIconButton-loading{color:transparent;}.mui-1uzdcm9{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);color:#fff;}.mui-1uzdcm9::-moz-focus-inner{border-style:none;}.mui-1uzdcm9.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1uzdcm9{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1uzdcm9:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-1uzdcm9:hover{background-color:transparent;}}.mui-1uzdcm9.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-1uzdcm9.MuiIconButton-loading{color:transparent;}.mui-kxijxt{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;width:100%;border-radius:8px;border:1px solid;border-color:rgba(0, 0, 0, 0.12);padding:0.5rem;}.mui-wfm2y7{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.6);}.mui-51eq8m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;margin:0;list-style:none;}.mui-1ttcndq{-webkit-text-decoration:none;text-decoration:none;color:inherit;}.mui-1ttcndq:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-ub0mep{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.mui-ub0mep:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-1nd5pgh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:8px;margin-right:8px;}.mui-ihsi0z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%;box-sizing:border-box;text-align:left;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;padding-top:0px;padding-bottom:0px;}.mui-14rdsw0{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;margin-top:4px;margin-bottom:4px;}.MuiTypography-root:where(.mui-14rdsw0 .MuiListItemText-primary){display:block;}.MuiTypography-root:where(.mui-14rdsw0 .MuiListItemText-secondary){display:block;}.mui-fyswvn{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}</style></head><body class="MuiBox-root mui-1ru2rpl"><header><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic mui-y50vno" style="--Paper-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)"><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular mui-awgou1"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeStart MuiIconButton-sizeMedium mui-1mm3lge" tabindex="0" type="button" aria-label="open drawer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path></svg></button><div class="MuiTypography-root MuiTypography-h6 mui-1myx5lw">CAE</div><div class="MuiBox-root mui-130f8nx"><div class="MuiBox-root mui-6n7j50"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" href="/">Home</a></div><div class="MuiBox-root mui-6n7j50"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" type="button">Partie 1</button></div><div class="MuiBox-root mui-6n7j50"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" href="/about">About</a></div></div></div></header><nav></nav></header><div class="MuiContainer-root MuiContainer-maxWidthLg mui-dnbkh3"><ul class="MuiList-root MuiList-padding mui-kxijxt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"></path></svg><nav class="MuiTypography-root MuiTypography-body1 MuiBreadcrumbs-root mui-wfm2y7" aria-label="breadcrumb"><ol class="MuiBreadcrumbs-ol mui-51eq8m"><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="/"> CAE </a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator mui-1nd5pgh">/</li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="/iteration3"> Itération 3 </a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator mui-1nd5pgh">/</li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#"> Gestion des logs et des exceptions </a></li></ol></nav><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#pourquoi_gerer_des_logs"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Pourquoi gérer des logs ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_gerer_les_exceptions_dans_une_application_spring_boot"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment gérer les exceptions dans une application Spring Boot ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_gerer_les_exceptions_de_spring_boot_comme_access_denied_exception"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment gérer les exceptions de Spring Boot comme AccessDeniedException ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_logguer_les_exceptions_de_maniere_centralisee"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment logguer les exceptions de manière centralisée ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_visualiser_les_logs_dans_lenvironnement_deploye"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment visualiser les logs dans l&#x27;environnement déployé ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#utiliser_azure_monitor_pour_visualiser_les_logs_en_temps_reel"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Utiliser Azure Monitor pour visualiser les logs en temps réel </span></div></a></div></ul>
<h1><a id="pourquoi_gerer_des_logs"> Pourquoi gérer des logs ? </a></h1>
<h2>Introduction</h2>
<p>Lorsqu&#x27;une application est en production, les logs sont essentiels pour comprendre les erreurs qui se produisent et pour les corriger rapidement. Ils permettent également de suivre les performances de l&#x27;application et de détecter les problèmes potentiels.</p>
<p>Les logs doivent être clairs, concis et informatifs. Ils doivent contenir suffisamment d&#x27;informations pour permettre de comprendre l&#x27;erreur et de la corriger, mais ne pas être trop verbeux pour ne pas noyer l&#x27;opérateur d&#x27;informations inutiles.</p>
<p>Les logs doivent permettre de répondre à plusieurs questions :</p>
<ul>
<li>Quand l&#x27;erreur s&#x27;est-elle produite ?</li>
<li>Où l&#x27;erreur s&#x27;est-elle produite ?</li>
<li>Qui a provoqué l&#x27;erreur ?</li>
<li>Quelle est la nature de l&#x27;erreur ?</li>
<li>Comment l&#x27;erreur peut-elle être corrigée ?</li>
</ul>
<p>Ces questions doivent être prises en compte lors de la rédaction des logs. Cela permettra de faciliter le travail d&#x27;investigation et de correction des erreurs par les développeurs.</p>
<h2>Types de logs</h2>
<p>Il existe plusieurs types de logs, en fonction de leur gravité et de leur importance. Voici quelques exemples de types de logs courants :</p>
<ul>
<li><strong>DEBUG</strong> : Informations de débogage, utiles pour comprendre le fonctionnement interne de l&#x27;application.</li>
<li><strong>INFO</strong> : Informations générales sur le fonctionnement de l&#x27;application.</li>
<li><strong>WARN</strong> : Avertissements sur des situations potentiellement problématiques.</li>
<li><strong>ERROR</strong> : Erreurs qui ont empêché le bon fonctionnement de l&#x27;application.</li>
<li><strong>FATAL</strong> : Erreurs graves qui ont provoqué l&#x27;arrêt de l&#x27;application. Il est à noter que la librairie <strong>Logback</strong> (librairie par défaut pour une application Spring Boot) ne supporte pas ce niveau de log. <strong>FATAL</strong> est donc souvent remplacé par <strong>ERROR</strong>.</li>
<li><strong>TRACE</strong> : Informations détaillées sur le fonctionnement de l&#x27;application, utiles pour le débogage.</li>
</ul>
<p>Il est important de choisir le bon type de log en fonction de la gravité de l&#x27;erreur. Les logs de type DEBUG ne doivent pas être activés en production, car ils peuvent contenir des informations sensibles sur le fonctionnement interne de l&#x27;application.</p>
<p>Quelle différence entre un log de type <strong><code>TRACE</code></strong> et un log de type <strong><code>DEBUG</code></strong> ? Le log de type <strong><code>TRACE</code></strong> est plus détaillé que le log de type <strong><code>DEBUG</code></strong>. Le log de type <strong><code>TRACE</code></strong> est utilisé pour des informations très détaillées sur le fonctionnement de l&#x27;application, utiles pour le débogage. Le log de type <strong><code>DEBUG</code></strong> est utilisé pour des informations de débogage, utiles pour comprendre le fonctionnement interne de l&#x27;application.</p>
<h2>Quels services sont à logguer ?</h2>
<p>Au sein de notre application d&#x27;entreprise, l&#x27;API Spring Boot qui gère les requêtes HTTP des clients doit être logguée pour suivre les erreurs et les performances.</p>
<p>Est-ce que le frontend doit être loggué ? Non, car le frontend est une application statique qui ne nécessite pas de logs. Les erreurs du frontend peuvent être suivies via les outils de développement du navigateur. D&#x27;autre part, les développeurs n&#x27;ont pas accès aux logs du navigateur des utilisateurs, ce qui rend difficile le suivi des erreurs côté client.</p>
<p>Est-ce que la base de données doit être logguée ? Oui, car les erreurs de connexion à la base de données peuvent être critiques pour le bon fonctionnement de l&#x27;application. Les logs de la base de données doivent être activés pour suivre les erreurs de connexion et les requêtes SQL. Néanmoins, les logs de la base de données ne doivent pas contenir d&#x27;informations sensibles, comme les mots de passe. De plus, comme nous utilisons Spring Data JPA, les logs de la base de données sont générés automatiquement par Hibernate, il n&#x27;y a donc rien à faire au niveau de la base de données, seulement au niveau de l&#x27;API.</p>
<p>Est-ce que Docker doit être loggué ? Oui, car les erreurs de déploiement et de configuration de Docker peuvent être critiques pour le bon fonctionnement de l&#x27;application. Les logs de Docker doivent être activés pour suivre les erreurs de déploiement et de configuration. De plus, les logs de Docker peuvent être utiles pour suivre les performances des conteneurs et détecter les problèmes potentiels.</p>
<h2>Comment gérer les logs des exceptions ?</h2>
<p>Les exceptions doivent être logguées de manière appropriée pour permettre de comprendre l&#x27;erreur et de la corriger rapidement. Mais attention, nous ne souhaitons pas polluer le code avec des <strong><code>try-catch</code></strong> un peu partout.</p>
<p>Avant de continuer dans la gestion des logs, nous allons donc voir les bonnes pratiques pour gérer les exceptions dans une application Spring Boot.</p>
<h1><a id="comment_gerer_les_exceptions_dans_une_application_spring_boot"> Comment gérer les exceptions dans une application Spring Boot ? </a></h1>
<h2>Introduction</h2>
<p>Il est important de gérer correctement les exceptions dans une application Spring Boot pour garantir un comportement fiable et prévisible. Les exceptions peuvent survenir à tout moment pendant l&#x27;exécution de l&#x27;application et doivent être traitées de manière appropriée pour éviter les plantages et les comportements inattendus.</p>
<p>De plus, il existe des bonnes pratiques pour gérer les exceptions afin d&#x27;éviter de polluer le code avec des <strong><code>try-catch</code></strong> inutiles et de garantir une gestion cohérente des erreurs.</p>
<p>Et finalement, avec Spring Boot, il y a beaucoup de parties de code qui génèrent déjà des exceptions sans que cela soit directement visible dans le code. Nous pensons ici notamment aux erreur de base de données (via les repositories), aux erreurs d&#x27;authentification (via Spring Security), etc...<br/>
<!-- -->Il est donc important de savoir comment gérer ces exceptions de manière centralisée.</p>
<h2>Gestion actuelle des exceptions via ResponseStatusException</h2>
<p>Dans notre application actuelle, nous utilisons la classe <strong><code>ResponseStatusException</code></strong> pour gérer les exceptions et renvoyer des réponses HTTP appropriées aux clients. Cette classe permet de spécifier le code de statut HTTP à renvoyer ainsi que le message d&#x27;erreur à afficher.</p>
<p>En voici un exemple :</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line">  <span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Get a pizza by id.
</span></span><span class="code-line"><span class="token doc-comment comment">   *
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">id</span> the pizza id.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the pizza.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">Pizza</span> <span class="token function">getPizza</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name">Pizza</span> pizza <span class="token operator">=</span> pizzaService<span class="token punctuation">.</span><span class="token function">getPizza</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>pizza <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line highlight-line">      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">,</span> <span class="token string">&quot;Pizza not found&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">return</span> pizza<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre>
<p>Dans cet exemple, si la pizza n&#x27;est pas trouvée, une exception de type <strong><code>ResponseStatusException</code></strong> est lancée avec le code de statut HTTP <strong><code>404 NOT FOUND</code></strong> et le message d&#x27;erreur <strong><code>Pizza not found</code></strong>.</p>
<p>Est-ce que cette exception est logguée automatiquement ? Non, les exception de type <strong><code>ResponseStatusException</code></strong> ne sont pas logguées automatiquement par Spring Boot. Il est donc nécessaire de les logguer manuellement pour suivre les erreurs de manière cohérente. Nous allons voir ça tout prochainement.</p>
<p>Cette approche est simple et efficace pour gérer les exceptions et renvoyer des réponses HTTP appropriées aux clients. Cependant, elle ne permet pas de logguer les exceptions de manière centralisée et de suivre les erreurs de manière cohérente.</p>
<blockquote>
<p><strong>Notions d&#x27;architecture importantes</strong> : Les exceptions de type <strong><code>ResponseStatusException</code></strong> sont des exceptions spécifiques à Spring Boot qui permettent de renvoyer des réponses HTTP avec un code de statut et un message d&#x27;erreur. Elles font partie de la couche de présentation de l&#x27;API et sont généralement utilisées pour renvoyer des réponses aux clients. Ces exceptions ne doivent donc pas se trouver dans la couche &quot;business&quot; de l&#x27;application, c&#x27;est-à-dire dans les services ou les repositories. Elles peuvent être utilisées dans les contrôleurs pour renvoyer des réponses HTTP aux clients, ou dans les filtres pour intercepter les requêtes et les réponses.</p>
</blockquote>
<h2>Gestion d&#x27;exceptions personnalisées</h2>
<p>Pour gérer les exceptions de manière centralisée et cohérente, il est recommandé d&#x27;utiliser des exceptions personnalisées. Ces exceptions peuvent être étendues à partir de la classe <strong><code>RuntimeException</code></strong> ou de l&#x27;une de ses sous-classes, comme <strong><code>IllegalArgumentException</code></strong> ou <strong><code>IllegalStateException</code></strong>.</p>
<p>Si l&#x27;on reprend l&#x27;exemple précédent, nous pourrions créer une exception personnalisée <strong><code>ResourceNotFoundException</code></strong> pour gérer les cas où une ressource n&#x27;est pas trouvée. Cela nous permettra d&#x27;avoir une gestion plus globale des exceptions, nous pourrons utiliser la même exception dans plusieurs parties de l&#x27;application, car en fait, cela n&#x27;est pas vraiment utile dans le message renvoyé au client de préciser que la pizza n&#x27;a pas été trouvée. C&#x27;est généralement évident que si une opération pour effacer une ressource de type pizza n&#x27;a pas abouti, c&#x27;est que la pizza n&#x27;existe pas. Renvoyer juste un message d&#x27;erreur générique est suffisant. D&#x27;ailleurs renvoyer juste un code d&#x27;erreur est suffisant.</p>
<p>Pour ce tutoriel, veuillez dans votre projet GitLab créer une nouvelle classe <strong><code>ResourceNotFoundException</code></strong> dans un nouveau package <strong><code>exceptions</code></strong>. Cette classe doit étendre la classe <strong><code>RuntimeException</code></strong> et accepter un message d&#x27;erreur en paramètre.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment"> * ResourceNotFoundException to handle resource not found exceptions.
</span></span><span class="code-line"><span class="token doc-comment comment"> */</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceNotFoundException</span> <span class="token keyword">extends</span> <span class="token class-name">RuntimeException</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Constructor for ResourceNotFoundException.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Constructor for ResourceNotFoundException.
</span></span><span class="code-line"><span class="token doc-comment comment">   *
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">message</span> the message.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Nous allons maintenant modifier notre contrôleur <strong><code>controllers/PizzaController</code></strong> pour utiliser cette exception personnalisée.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Delete a pizza by id.
</span></span><span class="code-line"><span class="token doc-comment comment">   *
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">id</span> the pizza id.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the pizza.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/{id}&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token annotation punctuation">@PreAuthorize</span><span class="token punctuation">(</span><span class="token string">&quot;hasRole(&#x27;ROLE_ADMIN&#x27;)&quot;</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">Pizza</span> <span class="token function">deletePizza</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token class-name">Pizza</span> pizza <span class="token operator">=</span> pizzaService<span class="token punctuation">.</span><span class="token function">deletePizza</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>pizza <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line highlight-line">      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword">return</span> pizza<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre>
<p>Dans cet exemple, si la pizza n&#x27;est pas trouvée, une exception de type <strong><code>ResourceNotFoundException</code></strong> est lancée. Actuellement, comme nous ne traitons pas cette exception, elle sera renvoyée au client sous forme de réponse HTTP <strong><code>500 INTERNAL SERVER ERROR</code></strong>. Nous allons voir comment gérer cette exception de manière centralisée et la logguer correctement.</p>
<h2>Comment gérer les exceptions de manière centralisée ?</h2>
<p>Pour gérer les exceptions de manière centralisée, nous allons utiliser un gestionnaire d&#x27;exceptions global. Ce gestionnaire d&#x27;exceptions interceptera toutes les exceptions non traitées par les contrôleurs et les logguera de manière appropriée.</p>
<p>Pour ce tutoriel, veuillez dans votre projet GitLab créer une nouvelle classe <strong><code>GlobalExceptionHandler</code></strong> dans un nouveau package <strong><code>exceptions</code></strong>. Cette classe doit être annotée avec <strong><code>@ControllerAdvice</code></strong> pour indiquer qu&#x27;elle est un gestionnaire d&#x27;exceptions global.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">WebRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ResponseStatusException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="12"><span class="token doc-comment comment"> * GlobalExceptionHandler to handle exceptions globally.
</span></span><span class="code-line line-number" line="13"><span class="token doc-comment comment"> */</span>
</span><span class="code-line line-number" line="14"><span class="token annotation punctuation">@ControllerAdvice</span>
</span><span class="code-line line-number" line="15"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="18"><span class="token doc-comment comment">   * Handle ResourceNotFoundException.
</span></span><span class="code-line line-number" line="19"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="20"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="21"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="22"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="23"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="24">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResourceNotFoundException</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="26">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">
</span><span class="code-line line-number" line="32">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="33">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="36">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="37">
</span><span class="code-line line-number" line="38">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="39"><span class="token doc-comment comment">   * Handle ResponseStatusException.
</span></span><span class="code-line line-number" line="40"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="41"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="42"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="43"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="44"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="45">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="46">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="47">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="48">
</span><span class="code-line line-number" line="49">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="50">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="51">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="52">
</span><span class="code-line line-number" line="53">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="54">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="55">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="56">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="57">
</span><span class="code-line line-number" line="58">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="59"><span class="token doc-comment comment">   * Handle all other exceptions.
</span></span><span class="code-line line-number" line="60"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="61"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="62"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="63"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="64"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="65">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="66">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleGlobalException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="67">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="68">        ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="69">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="70">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="71">
</span><span class="code-line line-number" line="72"><span class="token punctuation">}</span>
</span></code></pre>
<p>Quelques explications sur ce code :</p>
<ul>
<li>La méthode <strong><code>handleResourceNotFoundException</code></strong> gère les exceptions de type <strong><code>ResourceNotFoundException</code></strong>. Elle renvoie une réponse HTTP <strong><code>404 NOT FOUND</code></strong> avec le message d&#x27;erreur s&#x27;il est défini.</li>
<li>La méthode <strong><code>handleResponseStatusException</code></strong> gère les exceptions de type <strong><code>ResponseStatusException</code></strong>. Elle renvoie une réponse HTTP avec le code de statut et le message d&#x27;erreur de l&#x27;exception. Cette méthode permet donc d&#x27;utiliser les exceptions de type <strong><code>ResponseStatusException</code></strong> pour renvoyer des réponses HTTP aux clients, sans être obligé de créer des exceptions personnalisées.</li>
<li>La méthode <strong><code>handleGlobalException</code></strong> gère toutes les autres exceptions non traitées par les contrôleurs. Elle renvoie une réponse HTTP <strong><code>500 INTERNAL SERVER ERROR</code></strong> avec le message d&#x27;erreur de l&#x27;exception.</li>
</ul>
<p>Afin de renvoyer dans le body de la réponse HTTP un message d&#x27;erreur plus détaillé au format JSON, nous allons créer une classe <strong><code>ErrorDetails</code></strong> dans le même package <strong><code>exceptions</code></strong>.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment"> * ErrorDetails to handle error details.
</span></span><span class="code-line"><span class="token doc-comment comment"> */</span>
</span><span class="code-line"><span class="token annotation punctuation">@Data</span>
</span><span class="code-line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ErrorDetails</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token keyword">int</span> statusCode<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">private</span> <span class="token class-name">String</span> details<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Constructor for ErrorDetails.
</span></span><span class="code-line"><span class="token doc-comment comment">   *
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">statusCode</span> the status code.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">message</span>    the message.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">details</span>    the details.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token keyword">int</span> statusCode<span class="token punctuation">,</span> <span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">String</span> details<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>statusCode <span class="token operator">=</span> statusCode<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> message<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>details <span class="token operator">=</span> details<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Cette classe <strong><code>ErrorDetails</code></strong> contient les informations sur l&#x27;erreur à renvoyer dans le body de la réponse HTTP. Elle contient le code de statut, le message d&#x27;erreur et les détails de l&#x27;erreur.</p>
<p>Veuillez tenter de lancer votre application Spring Boot et de tester les différentes exceptions que vous avez mises en place, avec au minimum :</p>
<ul>
<li>Une exception de type <strong><code>ResourceNotFoundException</code></strong> sans message d&#x27;erreur. Veuillez vérifier que le code de statut HTTP <strong><code>404 NOT FOUND</code></strong> est renvoyé, et que la réponse HTTP ne contient pas de body. Attention à ne pas oublier de d&#x27;abord s&#x27;authentifier avec un utilisateur ayant le rôle <strong><code>ROLE_ADMIN</code></strong> pour pouvoir supprimer une pizza.</li>
<li>Une exception de type <strong><code>ResourceNotFoundException</code></strong> avec un message d&#x27;erreur. Pour cela vous pouvez, dans l&#x27;opération de suppression d&#x27;une pizza, utiliser <strong><code>throw new ResourceNotFoundException(&quot;Pizza not found&quot;);</code></strong>.<br/>
<!-- -->Veuillez vérifier que le code de statut HTTP <strong><code>404 NOT FOUND</code></strong> est renvoyé, et que la réponse HTTP contient le message d&#x27;erreur dans le body.</li>
<li>Une exception de type <strong><code>ResponseStatusException</code></strong>. Pour cela vous pouvez, par exemple, tentez de lire une pizza qui n&#x27;existe pas.</li>
</ul>
<p>💭 Comment tester le passage dans la méthode globale <strong><code>handleGlobalException</code></strong> ?  Pour cela, vous pouvez par exemple, stopper votre base de données et tenter de lire une pizza. Attention, vous devez stopper la base de données après avoir bien démarré l&#x27;API ; si vous le faisiez avant, l&#x27;API ne démarrerait pas correctement.</p>
<p>Vous devriez obtenir la réponse HTTP <strong><code>500 INTERNAL SERVER ERROR</code></strong> avec le message d&#x27;erreur de l&#x27;exception dans le body :</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;statusCode&quot;</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Could not open JPA EntityManager for transaction&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uri=/pizzas/3&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Et si l&#x27;on souhaitait connaître la classe d&#x27;exception qui a été levée, comment faire ? Pour cela, il suffit de modifier la méthode <strong><code>handleGlobalException</code></strong> pour soit renvoyer le nom de la classe de l&#x27;exception, soit ajouter la cause de l&#x27;exception dans le message d&#x27;erreur. Ici nous avons choisi d&#x27;ajouter tant le nom de la classe que la cause de l&#x27;exception :</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleGlobalException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre>
<p>Cela est impressionnant, nous sommes maintenant capable de &quot;catcher&quot; toutes les exceptions non traitées par les contrôleurs et de les traiter de manière centralisée.</p>
<p>Pour les exceptions soulevées par la DB, il semble OK de les traiter au sein de la méthode <strong><code>handleGlobalException</code></strong> et de renvoyer un code d&#x27;erreur <strong><code>500 INTERNAL SERVER ERROR</code></strong>. Mais comment gérer les erreurs associées à l&#x27;autorisation ? Par exemple, si un utilisateur non autorisé tente de supprimer une pizza alors qu&#x27;il n&#x27;est pas admin, une exception de type <strong><code>AccessDeniedException</code></strong> est levée.</p>
<h1><a id="comment_gerer_les_exceptions_de_spring_boot_comme_access_denied_exception"> Comment gérer les exceptions de Spring Boot comme AccessDeniedException ? </a></h1>
<h2>Introduction</h2>
<p>Lorsqu&#x27;une exception de type <strong><code>AccessDeniedException</code></strong> est levée par Spring Security, cela signifie que l&#x27;utilisateur n&#x27;est pas autorisé à accéder à la ressource demandée. Cette exception est levée automatiquement par Spring Security lorsqu&#x27;un utilisateur tente d&#x27;accéder à une ressource sans les autorisations nécessaires.</p>
<p>Pour ce tutorial, via les requêtes HTTP, veuillez tenter de supprimer une pizza en tant qu&#x27;utilisateur non admin (<strong><code>guest</code></strong> par exemple). Vous devriez normalement obtenir une réponse HTTP <strong><code>403 FORBIDDEN</code></strong> avec le message d&#x27;erreur <strong><code>Access is denied</code></strong>.</p>
<p>Néanmoins, pour l&#x27;instant, vous recevez une réponse HTTP <strong><code>500 INTERNAL SERVER ERROR</code></strong> avec le message d&#x27;erreur <strong><code> &quot;org.springframework.security.authorization.AuthorizationDeniedException : Access Denied. Cause: null&quot;,</code></strong>. Cela signifie que l&#x27;exception de type <strong><code>AccessDeniedException</code></strong> n&#x27;est pas correctement gérée par notre gestionnaire d&#x27;exceptions global.</p>
<h2>Comment gérer les exceptions de Spring Boot ?</h2>
<p>Ici, nous devons trouver la classe de l&#x27;exception qui est levée par Spring Security lorsqu&#x27;un utilisateur n&#x27;est pas autorisé à accéder à une ressource.</p>
<p>En regardant la documentation de Spring Security (<a href="https://docs.spring.io/spring-security/reference/api/java/org/springframework/security/authorization/AuthorizationDeniedException.html">https://docs.spring.io/spring-security/reference/api/java/org/springframework/security/authorization/AuthorizationDeniedException.html</a>), nous découvrons qu&#x27;une <strong><code>AuthorizationDeniedException</code></strong> est une <strong><code>AccessDeniedException</code></strong> contenant un <strong><code>AuthorizationResult</code></strong>. Nous allons donc modifier notre gestionnaire d&#x27;exceptions global pour gérer les exceptions de type <strong><code>AccessDeniedException</code></strong>.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line">  <span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment">   * Handle AccessDeniedException.
</span></span><span class="code-line"><span class="token doc-comment comment">   *
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line"><span class="token doc-comment comment">   */</span>
</span><span class="code-line">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleAccessDeniedException</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span></code></pre>
<p>Veuillez tester à nouveau de supprimer une pizza en tant qu&#x27;utilisateur non admin (<strong><code>guest</code></strong> par exemple). Vous devriez maintenant obtenir une réponse HTTP <strong><code>403 FORBIDDEN</code></strong> avec le message d&#x27;erreur :</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;statusCode&quot;</span><span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;org.springframework.security.authorization.AuthorizationDeniedException : Access Denied. Cause: null&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uri=/pizzas/2&quot;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Et maintenant, veuillez tester la requête pour tenter d&#x27;effacer la pizza avec l&#x27;id 2 mais sans fournir de token ! Qu&#x27;est-ce que vous obtenez ? Vous obtenez aussi un status code <strong><code>403 FORBIDDEN</code></strong> avec le message d&#x27;erreur <strong><code>Access is denied</code></strong>. Cela signifie que la même exception de type <strong><code>AccessDeniedException</code></strong> est lancée que l&#x27;on soit connecté ou non. Cela est dû au fait que Spring Security intercepte la requête avant même que le contrôleur ne soit appelé.<br/>
<!-- -->Pour que cela soit propre, nous devrions renvoyer un code d&#x27;erreur <strong><code>401 UNAUTHORIZED</code></strong> pour indiquer que l&#x27;utilisateur n&#x27;est pas autorisé à accéder à la ressource car il n&#x27;est pas authentifié. Pour cela, nous devons mettre à jour notre code pour vérifier s&#x27;il y a un token dans la requête et renvoyer un code d&#x27;erreur <strong><code>401 UNAUTHORIZED</code></strong> si ce n&#x27;est pas le cas.</p>
<p>Veuillez mettre à jour le code de la méthode <strong><code>handleAccessDeniedException</code></strong> pour vérifier si l&#x27;utilisateur est authentifié et renvoyer un code d&#x27;erreur <strong><code>401 UNAUTHORIZED</code></strong> si ce n&#x27;est pas le cas.</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="2"><span class="token doc-comment comment">   * Handle AccessDeniedException.
</span></span><span class="code-line line-number" line="3"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="4"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="5"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="6"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="7"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="8">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="9">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleAccessDeniedException</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="10">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number highlight-line" line="12">    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="13">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="14">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="17">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="18">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">  <span class="token punctuation">}</span>
</span></code></pre>
<p>Veuillez tester à nouveau de supprimer une pizza en tant qu&#x27;utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP <strong><code>401 UNAUTHORIZED</code></strong>. Et si vous tentez de supprimer une pizza en tant qu&#x27;utilisateur non admin, vous devriez obtenir une réponse HTTP <strong><code>403 FORBIDDEN</code></strong>.</p>
<h2>Conclusion sur la gestion des exceptions dans une application Spring Boot</h2>
<p>Nous avons vu comment gérer les exceptions de manière centralisée dans une application Spring Boot en utilisant un gestionnaire d&#x27;exceptions global. Ce gestionnaire d&#x27;exceptions intercepte toutes les exceptions non traitées par les contrôleurs. Nous avons également vu comment gérer les exceptions de type <strong><code>AccessDeniedException</code></strong> levées par Spring Security lorsqu&#x27;un utilisateur n&#x27;est pas autorisé à accéder à une ressource. Cet apprentissage devrait vous permettre de gérer n&#x27;importe quel type d&#x27;exceptions de manière cohérente et de renvoyer des réponses HTTP appropriées aux clients.</p>
<p>Nous allons maintenant voir comment logguer les exceptions de manière centralisée pour suivre les erreurs de manière cohérente et les corriger rapidement.</p>
<h1><a id="comment_logguer_les_exceptions_de_maniere_centralisee"> Comment logguer les exceptions de manière centralisée ? </a></h1>
<h2>Introduction</h2>
<p>Maintenant que nous avons appris à centraliser les exceptions au sein d&#x27;un gestionnaire d&#x27;exceptions global, il est temps de les logguer de manière centralisée pour suivre les erreurs de manière cohérente et les corriger rapidement.</p>
<p>Pour logguer les exceptions de manière centralisée, nous allons utiliser le logger par défaut de Spring Boot, <strong><code>Logback</code></strong>. <strong><code>Logback</code></strong> est une librairie de log très populaire dans l&#x27;écosystème Spring Boot et offre de nombreuses fonctionnalités pour gérer les logs de manière efficace. C&#x27;est le successeur de <strong><code>Log4j</code></strong> et <strong><code>Log4j2</code></strong> et est largement utilisé dans les applications Spring Boot.</p>
<p>Pour information, <strong><code>Logback</code></strong> implémente l&#x27;interface <strong><code>SLF4J</code></strong> (Simple Logging Facade for Java), qui est une façade de logging standardisée pour Java. <strong><code>SLF4J</code></strong> permet de séparer le code de l&#x27;application des implémentations de logging, ce qui facilite le changement de librairie de log sans modifier le code de l&#x27;application.</p>
<p>Si vous souhaitez découvrir plus en détail <strong><code>Logback</code></strong>, vous pouvez consulter la documentation officielle : <a href="https://logback.qos.ch/">https://logback.qos.ch/</a></p>
<p>Par défaut, <strong><code>Logback</code></strong> est configuré pour logguer les messages de niveau <strong><code>ERROR</code></strong> et supérieur dans la console.
Nous nous rendons donc compte que les exceptions de type <strong><code>AccessDeniedException</code></strong> ne sont pas logguées par défaut, tout comme les exceptions de type <strong><code>ResponseStatusException</code></strong>, <strong><code>ResourceNotFoundException</code></strong> car elles ne sont pas affichées dans la console.</p>
<p>Comment faire pour logguer ces exceptions de manière centralisée ? Nous allons devoir mettre à jour notre gestionnaire d&#x27;exceptions global pour logguer les exceptions de manière appropriée.</p>
<h2>Logguer les exceptions de manière centralisée</h2>
<p>Veuillez mettre à jour la classe <strong><code>exceptions/GlobalExceptionHandler</code></strong> avec ces ajouts :</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number highlight-line" line="4"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="5"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>access<span class="token punctuation">.</span></span><span class="token class-name">AccessDeniedException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">WebRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ResponseStatusException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="15"><span class="token doc-comment comment"> * GlobalExceptionHandler to handle exceptions globally.
</span></span><span class="code-line line-number" line="16"><span class="token doc-comment comment"> */</span>
</span><span class="code-line line-number" line="17"><span class="token annotation punctuation">@ControllerAdvice</span>
</span><span class="code-line line-number" line="18"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number highlight-line" line="20">  <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;GlobalExceptionHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="24"><span class="token doc-comment comment">   * Handle ResourceNotFoundException.
</span></span><span class="code-line line-number" line="25"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="26"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="27"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="28"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="29"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="30">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="31">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResourceNotFoundException</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="32">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number highlight-line" line="34">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="35">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="36">
</span><span class="code-line line-number highlight-line" line="37">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Resource not found: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="38">
</span><span class="code-line line-number highlight-line" line="39">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="40">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="41">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="42">
</span><span class="code-line line-number" line="43">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="45">
</span><span class="code-line line-number" line="46">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="47"><span class="token doc-comment comment">   * Handle ResponseStatusException.
</span></span><span class="code-line line-number" line="48"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="49"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="50"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="51"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="52"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="53">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="54">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="55">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="56">
</span><span class="code-line line-number highlight-line" line="57">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="58">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="59">
</span><span class="code-line line-number highlight-line" line="60">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Response status exception: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="61">
</span><span class="code-line line-number highlight-line" line="62">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="63">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="64">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="65">
</span><span class="code-line line-number" line="66">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="67">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="68">
</span><span class="code-line line-number" line="69">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="70"><span class="token doc-comment comment">   * Handle AccessDeniedException.
</span></span><span class="code-line line-number" line="71"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="72"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="73"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="74"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="75"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="76">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="77">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleAccessDeniedException</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="78">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="79">
</span><span class="code-line line-number highlight-line" line="80">    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="81">      <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="82">          ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="83">          request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="84">      logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Unauthorized access: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="85">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="86">    <span class="token punctuation">}</span>
</span><span class="code-line line-number highlight-line" line="87">
</span><span class="code-line line-number highlight-line" line="88">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="89">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="90">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="91">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Forbidden access: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="92">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="93">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="94">
</span><span class="code-line line-number" line="95">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="96"><span class="token doc-comment comment">   * Handle all other exceptions.
</span></span><span class="code-line line-number" line="97"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="98"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="99"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="100"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="101"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="102">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="103">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleGlobalException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="104">
</span><span class="code-line line-number" line="105">    <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="106">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="107">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="108">
</span><span class="code-line line-number highlight-line" line="109">    logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Internal server error: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="110">
</span><span class="code-line line-number" line="111">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetails<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="112">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="113"><span class="token punctuation">}</span>
</span></code></pre>
<p>Quelques explications sur ce code :</p>
<ul>
<li>Nous avons ajouté un logger de type <strong><code>Logger</code></strong> pour logguer les exceptions de manière centralisée. Nous lui avons donné le nom <strong><code>GlobalExceptionHandler</code></strong> pour le distinguer des éventuels autres loggers.</li>
<li>Nous avons ajouté des instructions <strong><code>logger.info</code></strong> et <strong><code>logger.error</code></strong> pour logguer les exceptions de manière appropriée. Nous utilisons le niveau <strong><code>INFO</code></strong> pour les exceptions de type <strong><code>ResourceNotFoundException</code></strong>, <strong><code>ResponseStatusException</code></strong> et <strong><code>AccessDeniedException</code></strong>, et le niveau <strong><code>ERROR</code></strong> pour les autres exceptions non traitées par les contrôleurs.</li>
<li>Nous avons ajouté des messages d&#x27;erreur détaillés pour chaque type d&#x27;exception, y compris le code de statut, le message d&#x27;erreur et les détails de l&#x27;erreur. Ces messages d&#x27;erreur seront loggués dans la console et permettront de suivre les erreurs de manière cohérente.</li>
</ul>
<p>Pour rappel, voici les différents niveau de log que l&#x27;on peut utiliser avec <strong><code>Logback</code></strong> :</p>
<ul>
<li><strong><code>TRACE</code></strong> : Informations détaillées sur le fonctionnement de l&#x27;application, utiles pour le débogage.</li>
<li><strong><code>DEBUG</code></strong> : Informations de débogage, utiles pour comprendre le fonctionnement interne de l&#x27;application.</li>
<li><strong><code>INFO</code></strong> : Informations générales sur le fonctionnement de l&#x27;application.</li>
<li><strong><code>WARN</code></strong> : Avertissements sur des situations potentiellement problématiques.</li>
<li><strong><code>ERROR</code></strong> : Erreurs qui ont empêché le bon fonctionnement de l&#x27;application.</li>
</ul>
<p>Pour créer un log selon le niveau adéquat, il suffit d&#x27;appeler la méthode correspondante sur l&#x27;objet <strong><code>Logger</code></strong>. Par exemple, pour créer un log de niveau <strong><code>INFO</code></strong>, on appelle la méthode <strong><code>logger.info</code></strong>.</p>
<p>Quelle est la différence entre un niveau <strong><code>Trace</code></strong> et un niveau <strong><code>Debug</code></strong> ? Le niveau <strong><code>Trace</code></strong> est plus détaillé que le niveau <strong><code>Debug</code></strong>. Le niveau <strong><code>Trace</code></strong> est utilisé pour des informations très détaillées sur le fonctionnement de l&#x27;application, utiles pour le débogage. Le niveau <strong><code>Debug</code></strong> est utilisé pour des informations de débogage, utiles pour comprendre le fonctionnement interne de l&#x27;application.</p>
<p>Veuillez tester à nouveau de supprimer une pizza en tant qu&#x27;utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP <strong><code>401 UNAUTHORIZED</code></strong> et voir le message d&#x27;erreur loggué dans la console.</p>
<p>Vous remarquez que dans le détails, on ne voit pas beaucoup d&#x27;informations. On souhaiterait par exemple connaître le type de requête faire sur l&#x27;URI.</p>
<p>Pour ce faire, voici comment on pourrait modifier la classe <strong><code>GlobalExceptionHandler</code></strong> pour ajouter le type de requête et d&#x27;autres infos sur le client ayant fait la requête amenant à une exception :</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>access<span class="token punctuation">.</span></span><span class="token class-name">AccessDeniedException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">WebRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ResponseStatusException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15"><span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="16"><span class="token doc-comment comment"> * GlobalExceptionHandler to handle exceptions globally.
</span></span><span class="code-line line-number" line="17"><span class="token doc-comment comment"> */</span>
</span><span class="code-line line-number" line="18"><span class="token annotation punctuation">@ControllerAdvice</span>
</span><span class="code-line line-number" line="19"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">  <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;GlobalExceptionHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">
</span><span class="code-line line-number" line="24">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="25"><span class="token doc-comment comment">   * Handle ResourceNotFoundException.
</span></span><span class="code-line line-number" line="26"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="27"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="28"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="29"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="30"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="31">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="32">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResourceNotFoundException</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="33">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="36">        ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="37">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="38">
</span><span class="code-line line-number" line="39">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="40">        <span class="token string">&quot;httpMethod=&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="41">
</span><span class="code-line line-number" line="42">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Resource not found: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="43">
</span><span class="code-line line-number" line="44">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="45">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="46">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="47">
</span><span class="code-line line-number" line="48">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="49">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="50">
</span><span class="code-line line-number" line="51">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="52"><span class="token doc-comment comment">   * Handle ResponseStatusException.
</span></span><span class="code-line line-number" line="53"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="54"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="55"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="56"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="57"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="58">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="59">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="60">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="61">
</span><span class="code-line line-number" line="62">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="63">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="64">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="65">        <span class="token string">&quot;httpMethod=&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="66">
</span><span class="code-line line-number" line="67">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Response status exception: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="68">
</span><span class="code-line line-number" line="69">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="70">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="71">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="72">
</span><span class="code-line line-number" line="73">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="74">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="75">
</span><span class="code-line line-number" line="76">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="77"><span class="token doc-comment comment">   * Handle AccessDeniedException.
</span></span><span class="code-line line-number" line="78"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="79"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="80"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="81"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="82"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="83">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="84">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleAccessDeniedException</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="85">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="86">
</span><span class="code-line line-number" line="87">    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="88">      <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="89">          ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="90">          <span class="token string">&quot;httpMethod=&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="91">
</span><span class="code-line line-number" line="92">      logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Unauthorized access: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="93">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="94">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="95">
</span><span class="code-line line-number" line="96">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="97">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="98">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="99">
</span><span class="code-line line-number" line="100">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="101">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="102">        <span class="token string">&quot;httpMethod=&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="103">
</span><span class="code-line line-number" line="104">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Forbidden access: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="105">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="106">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="107">
</span><span class="code-line line-number" line="108">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="109"><span class="token doc-comment comment">   * Handle all other exceptions.
</span></span><span class="code-line line-number" line="110"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="111"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="112"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="113"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="114"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="115">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="116">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleGlobalException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="117">      <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="118">
</span><span class="code-line line-number" line="119">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="120">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="121">        request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="122">
</span><span class="code-line line-number" line="123">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="124">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="125">        <span class="token string">&quot;httpMethod:&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="126">
</span><span class="code-line line-number" line="127">    logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Internal server error: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="128">
</span><span class="code-line line-number" line="129">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="130">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="131"><span class="token punctuation">}</span>
</span></code></pre>
<p>Est-ce que ce code est correct point de vue de PMD &amp; CPD ?<br/>
<!-- -->N&#x27;hésitez pas à lancer les outils de vérification de code pour le vérifier, comme par exemple localement via :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean <span class="token builtin class-name">test</span>
</span></code></pre>
<p>Une fois cette commande lancée, on voit qu&#x27;il y a de la duplication de code. Comment pourrait-on améliorer cela ?</p>
<p>Pour éviter la duplication de code, on pourrait extraire la logique de création des <strong><code>ErrorDetails</code></strong> dans une méthode privée. Voici comment mettre à jour la classe <strong><code>GlobalExceptionHandler</code></strong> pour extraire la logique de création des <strong><code>ErrorDetails</code></strong> dans une méthode privée :</p>
<pre class="language-java"><code class="language-java code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> <span class="token namespace">be<span class="token punctuation">.</span>vinci<span class="token punctuation">.</span>ipl<span class="token punctuation">.</span>cae<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>exceptions</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpStatus</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>security<span class="token punctuation">.</span>access<span class="token punctuation">.</span></span><span class="token class-name">AccessDeniedException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ControllerAdvice</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ExceptionHandler</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>context<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">WebRequest</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ResponseStatusException</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="15"><span class="token doc-comment comment"> * GlobalExceptionHandler to handle exceptions globally.
</span></span><span class="code-line line-number" line="16"><span class="token doc-comment comment"> */</span>
</span><span class="code-line line-number" line="17"><span class="token annotation punctuation">@ControllerAdvice</span>
</span><span class="code-line line-number" line="18"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionHandler</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">  <span class="token keyword">private</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token string">&quot;GlobalExceptionHandler&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">  <span class="token keyword">private</span> <span class="token class-name">ErrorDetails</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span> status<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="23">      <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">,</span> <span class="token keyword">boolean</span> forLog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">    <span class="token class-name">String</span> description <span class="token operator">=</span>
</span><span class="code-line line-number" line="25">        forLog <span class="token operator">?</span> <span class="token string">&quot;httpMethod=&quot;</span> <span class="token operator">+</span> httpRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;;&quot;</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="26">            <span class="token operator">:</span> request<span class="token punctuation">.</span><span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="27">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ErrorDetails</span><span class="token punctuation">(</span>status<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="28">        ex<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; : &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;. Cause: &quot;</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="29">        description<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">
</span><span class="code-line line-number" line="32">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="33"><span class="token doc-comment comment">   * Handle ResourceNotFoundException.
</span></span><span class="code-line line-number" line="34"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="35"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="36"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="37"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="38"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="39">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="40">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResourceNotFoundException</span><span class="token punctuation">(</span><span class="token class-name">ResourceNotFoundException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="41">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="42">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="43">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="45">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="46">
</span><span class="code-line line-number" line="47">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Resource not found: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="48">
</span><span class="code-line line-number" line="49">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="50">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="51">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="52">
</span><span class="code-line line-number" line="53">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">NOT_FOUND</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="54">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="55">
</span><span class="code-line line-number" line="56">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="57"><span class="token doc-comment comment">   * Handle ResponseStatusException.
</span></span><span class="code-line line-number" line="58"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="59"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="60"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="61"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="62"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="63">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="64">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleResponseStatusException</span><span class="token punctuation">(</span><span class="token class-name">ResponseStatusException</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="65">      <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="66">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="67">        <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="68">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="69">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="70">        <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span> httpRequest<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="71">        <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="72">
</span><span class="code-line line-number" line="73">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Response status exception: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="74">
</span><span class="code-line line-number" line="75">    <span class="token keyword">if</span> <span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getReason</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="76">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="77">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="78">
</span><span class="code-line line-number" line="79">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="80">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="81">
</span><span class="code-line line-number" line="82">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="83"><span class="token doc-comment comment">   * Handle AccessDeniedException.
</span></span><span class="code-line line-number" line="84"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="85"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="86"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="87"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="88"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="89">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="90">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleAccessDeniedException</span><span class="token punctuation">(</span><span class="token class-name">AccessDeniedException</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="91">      <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="92">    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="93">      <span class="token class-name">ErrorDetails</span> errorDetails <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="94">          httpRequest<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="95">      logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Unauthorized access: {}&quot;</span><span class="token punctuation">,</span> errorDetails<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="96">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="97">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="98">
</span><span class="code-line line-number" line="99">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="100">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="101">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="102">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="103">
</span><span class="code-line line-number" line="104">    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Forbidden access: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="105">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">FORBIDDEN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="106">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="107">
</span><span class="code-line line-number" line="108">  <span class="token doc-comment comment">/**
</span></span><span class="code-line line-number" line="109"><span class="token doc-comment comment">   * Handle all other exceptions.
</span></span><span class="code-line line-number" line="110"><span class="token doc-comment comment">   *
</span></span><span class="code-line line-number" line="111"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">ex</span>      the exception.
</span></span><span class="code-line line-number" line="112"><span class="token doc-comment comment">   * <span class="token keyword">@param</span> <span class="token parameter">request</span> the request.
</span></span><span class="code-line line-number" line="113"><span class="token doc-comment comment">   * <span class="token keyword">@return</span> the response entity.
</span></span><span class="code-line line-number" line="114"><span class="token doc-comment comment">   */</span>
</span><span class="code-line line-number" line="115">  <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="116">  <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">handleGlobalException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">,</span> <span class="token class-name">WebRequest</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="117">      <span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="118">    <span class="token class-name">ErrorDetails</span> errorDetailsClient <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="119">        request<span class="token punctuation">,</span> httpRequest<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="120">    <span class="token class-name">ErrorDetails</span> errorDetailsLog <span class="token operator">=</span> <span class="token function">createErrorDetails</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">,</span> ex<span class="token punctuation">,</span> request<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="121">        httpRequest<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="122">
</span><span class="code-line line-number" line="123">    logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;Internal server error: {}&quot;</span><span class="token punctuation">,</span> errorDetailsLog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="124">
</span><span class="code-line line-number" line="125">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>errorDetailsClient<span class="token punctuation">,</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">INTERNAL_SERVER_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="126">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="127"><span class="token punctuation">}</span>
</span></code></pre>
<p>Est-ce que ce code est correct point de vue de PMD &amp; CPD ?<br/>
<!-- -->N&#x27;hésitez pas à lancer les outils de vérification de code pour le vérifier, comme par exemple localement via :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean <span class="token builtin class-name">test</span>
</span></code></pre>
<p>Maintenant, nous avons une méthode privée <strong><code>createErrorDetails</code></strong> qui prend en paramètre le code de statut, l&#x27;exception, la requête, la requête HTTP et un booléen pour indiquer si les détails sont pour le log ou pour le client. Cette méthode crée un objet <strong><code>ErrorDetails</code></strong> avec les informations nécessaires pour logguer l&#x27;erreur de manière centralisée.</p>
<p>Veuillez tester à nouveau de supprimer une pizza en tant qu&#x27;utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP <strong><code>401 UNAUTHORIZED</code></strong> et voir le message d&#x27;erreur loggué dans la console avec le type de requête et d&#x27;autres informations sur le client ayant fait la requête.<br/>
<!-- -->Veuillez aussi observer que le message d&#x27;erreur renvoyé au client ne contient pas d&#x27;informations sensibles !</p>
<h2>Configuration de Logback</h2>
<h3>Introduction</h3>
<p>Nous souhaitons toujours afficher les logs de niveau <strong><code>ERROR</code></strong> et supérieur dans la console, tout en logguant toutes les exceptions de type <strong><code>AccessDeniedException</code></strong>, <strong><code>ResponseStatusException</code></strong>, <strong><code>ResourceNotFoundException</code></strong>, etc..., dans un fichier de log.</p>
<p>Dans les profiles de développement, nous souhaitons afficher les logs de niveau <strong><code>DEBUG</code></strong> et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.</p>
<p>Dans les profiles de production, nous souhaitons afficher les logs de niveau <strong><code>INFO</code></strong> et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.
Pourquoi ? Parce que les logs de niveau <strong><code>DEBUG</code></strong> peuvent contenir des informations sensibles sur le fonctionnement interne de l&#x27;application et ne doivent pas être activés en production.</p>
<h3>Configuration de Logback pour le profile de développement</h3>
<p>Nous pouvons configurer certaines options dans le fichier <strong><code>application.properties</code></strong> pour écrire les logs dans le fichier <strong><code>logs/application.log</code></strong>. Pour cela, veuillez ajouter les lignes suivantes dans le fichier <strong><code>application.properties</code></strong> :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">debug</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line"><span class="token key attr-name">logging.file.name</span><span class="token punctuation">=</span><span class="token value attr-value">logs/application.log</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-file-size</span><span class="token punctuation">=</span><span class="token value attr-value">10MB</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-history</span><span class="token punctuation">=</span><span class="token value attr-value">7</span>
</span></code></pre>
<p>Ces lignes permettent de configurer le fichier de log <strong><code>logs/application.log</code></strong> pour qu&#x27;il ne dépasse pas 10 Mo et qu&#x27;il conserve les 7 derniers fichiers de log.</p>
<p><strong><code>debug=true</code></strong> permet d&#x27;activer les logs de niveau <strong><code>DEBUG</code></strong> et supérieur dans la console.</p>
<p>Comme nous ne précisons pas le niveau de log, toutes les exceptions seront logguées dans ce fichier de log.</p>
<p>Est-ce que les logs sont aussi affichés dans la console ? Oui, les logs sont également affichés dans la console, car nous n&#x27;avons pas modifié la configuration par défaut de <strong><code>Logback</code></strong> pour afficher les logs dans la console.<br/>
<!-- -->Si on avait souhaité stopper l&#x27;affichage des logs dans la console, on pourrait ajouter la ligne suivante dans le fichier <strong><code>application.properties</code></strong> :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">logging.pattern.console</span><span class="token punctuation">=</span>
</span></code></pre>
<p>Cela aurait permis de supprimer les logs de la console, mais nous ne souhaitons pas le faire !</p>
<h3>Ignorer les fichiers de log dans Git</h3>
<p>Pour éviter de commiter les fichiers de log dans Git, nous devons ajouter le dossier <strong><code>logs</code></strong> dans le fichier <strong><code>.gitignore</code></strong>. Pour cela, veuillez ajouter la ligne suivante dans le fichier <strong><code>.gitignore</code></strong> de votre API :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line">logs/
</span></code></pre>
<p>Veuillez redémarrer votre API et tester à nouveau de supprimer une pizza en tant qu&#x27;utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP <strong><code>401 UNAUTHORIZED</code></strong> et voir le message d&#x27;erreur loggué dans le fichier <strong><code>logs/application.log</code></strong>. De plus, vous devriez voir les logs de niveau <strong><code>DEBUG</code></strong> et supérieur dans la console.</p>
<h3>Configuration de Logback pour le profile de développement pour plus de détails sur les logs de type DB</h3>
<p>Pour avoir plus de détails sur les logs de type DB, nous pouvons ajouter les lignes suivantes dans le fichier <strong><code>application.properties</code></strong> :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.jpa.show-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line"><span class="token key attr-name">spring.jpa.properties.hibernate.format_sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line"><span class="token key attr-name">logging.level.org.hibernate.SQL</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
</span><span class="code-line"><span class="token key attr-name">logging.level.org.hibernate.type.descriptor.sql.BasicBinder</span><span class="token punctuation">=</span><span class="token value attr-value">TRACE</span>
</span></code></pre>
<p>Que font ces lignes ?</p>
<ul>
<li><strong><code>spring.jpa.show-sql=true</code></strong> permet d&#x27;afficher les requêtes SQL générées par Hibernate dans la console.</li>
<li><strong><code>spring.jpa.properties.hibernate.format_sql=true</code></strong> permet de formater les requêtes SQL générées par Hibernate pour les rendre plus lisibles.</li>
<li><strong><code>logging.level.org.hibernate.SQL=DEBUG</code></strong> permet d&#x27;afficher les requêtes SQL générées par Hibernate dans la console avec le niveau de log <strong><code>DEBUG</code></strong>.</li>
<li><strong><code>logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE</code></strong> permet d&#x27;afficher les valeurs des paramètres des requêtes SQL générées par Hibernate dans la console avec le niveau de log <strong><code>TRACE</code></strong>.</li>
</ul>
<h3>Configuration de Logback pour le profile de production</h3>
<p>Est-ce que les logs de type <strong><code>DEBUG</code></strong> sont activés en production ? Non, les logs de type <strong><code>DEBUG</code></strong> ne sont pas activés en production, car ils peuvent contenir des informations sensibles sur le fonctionnement interne de l&#x27;application. Nous allons donc configurer <strong><code>Logback</code></strong> pour afficher les logs de niveau <strong><code>INFO</code></strong> et supérieur en production.</p>
<p>Dans le fichier <strong><code>application-production.properties</code></strong>, veuillez ajouter les
lignes suivantes :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">logging.level.root</span><span class="token punctuation">=</span><span class="token value attr-value">INFO</span>
</span><span class="code-line"><span class="token key attr-name">logging.file.name</span><span class="token punctuation">=</span><span class="token value attr-value">logs/application.log</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-file-size</span><span class="token punctuation">=</span><span class="token value attr-value">10MB</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-history</span><span class="token punctuation">=</span><span class="token value attr-value">7</span>
</span></code></pre>
<p>Ces lignes permettent de configurer le niveau de log à <strong><code>INFO</code></strong> et supérieur en production, et d&#x27;écrire les logs dans le fichier <strong><code>logs/application.log</code></strong>.</p>
<h3>Configuration de Logback pour le profile de test et le profile de staging</h3>
<p>Pour les profiles de test et de staging, nous souhaitons afficher les logs de niveau <strong><code>DEBUG</code></strong> et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.</p>
<p>Dans le fichier <strong><code>application-test.properties</code></strong>, veuillez ajouter les lignes suivantes :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">logging.level.root</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
</span><span class="code-line"><span class="token key attr-name">logging.file.name</span><span class="token punctuation">=</span><span class="token value attr-value">logs/application.log</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-file-size</span><span class="token punctuation">=</span><span class="token value attr-value">10MB</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-history</span><span class="token punctuation">=</span><span class="token value attr-value">7</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">spring.jpa.show-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line"><span class="token key attr-name">spring.jpa.properties.hibernate.format_sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line"><span class="token key attr-name">logging.level.org.hibernate.SQL</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
</span><span class="code-line"><span class="token key attr-name">logging.level.org.hibernate.type.descriptor.sql.BasicBinder</span><span class="token punctuation">=</span><span class="token value attr-value">TRACE</span>
</span></code></pre>
<p>Dans le fichier <strong><code>application-staging.properties</code></strong>, veuillez ajouter les lignes suivantes :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">logging.level.root</span><span class="token punctuation">=</span><span class="token value attr-value">DEBUG</span>
</span><span class="code-line"><span class="token key attr-name">logging.file.name</span><span class="token punctuation">=</span><span class="token value attr-value">logs/application.log</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-file-size</span><span class="token punctuation">=</span><span class="token value attr-value">10MB</span>
</span><span class="code-line"><span class="token key attr-name">logging.logback.rollingpolicy.max-history</span><span class="token punctuation">=</span><span class="token value attr-value">7</span>
</span></code></pre>
<h1><a id="comment_visualiser_les_logs_dans_lenvironnement_deploye"> Comment visualiser les logs dans l&#x27;environnement déployé ? </a></h1>
<h2>Introduction</h2>
<p>Comment visualiser les logs dans l&#x27;environnement déployé ?<br/>
<!-- -->Ou en d&#x27;autres termes, comment stocker les logs dans un endroit sûr et les consulter facilement pour suivre les erreurs de manière cohérente et les corriger rapidement ?</p>
<p>Dans notre cours, nous avons choisi de déployer l&#x27;API dans Azure Web App à l&#x27;aide de Docker Compose. De plus, pour les assets, nous utilisons Azure Blob Storage. Nous allons donc tenter de stocker les logs dans Azure Blob Storage pour les rendre persistants et les consulter (facilement).</p>
<h2>Visualiser les derniers logs dans le portail Azure</h2>
<p>Dans le portail Azure, vous pouvez visualiser les derniers logs de l&#x27;API en temps réel. Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>App Service</code></strong>.</li>
<li>Dans le menu de gauche, sélectionnez <strong><code>Log stream</code></strong>.</li>
<li>Vous pouvez maintenant voir les logs en temps réel de l&#x27;API.</li>
</ul>
<h2>Stocker les diagnostics dans Azure storage</h2>
<h3>Création d&#x27;un compte de stockage Azure</h3>
<p>Pour stocker les logs dans Azure Blob Storage, vous devez créer un compte de stockage Azure dans la même région que votre Azure Web App.</p>
<p>Nous vous avons jusque là recommandé de créer vos services Azure dans la région <strong><code>Central US</code></strong>. Pourquoi ? C&#x27;est aussi la région la moins chère pour les étudiants Azure.</p>
<p>Pour que le service de stockage soit visible par l&#x27;Azure Web App, il doit être dans la même région que l&#x27;Azure Web App.</p>
<p>Vous pourriez utiliser le service de stockage créé pour stocker les images de l&#x27;API pour stocker les logs de l&#x27;API.</p>
<p>Néanmoins, pour être sûr que le service de stockage est dans la même région que l&#x27;Azure Web App, nous allons créer un nouveau service de stockage pour stocker les logs de l&#x27;API.</p>
<p>Veuillez vérifier la région de votre Azure Web App dans le portail Azure et créer un compte de stockage Azure dans la même région. Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Choisissez <strong><code>Free services</code></strong> dans la recherche pour voir les services gratuits.</li>
<li>Recherchez et sélectionnez <strong><code>Azure Blob Storage</code></strong>.</li>
<li>Indiquez comme <strong><code>Resource group</code></strong> le même que celui de votre Azure Web App.</li>
<li>Donnez un nom à votre compte de stockage, par exemple <strong><code>log007</code></strong>.</li>
<li>Cliquez sur <strong><code>Review + create</code></strong>.</li>
<li>Cliquez sur <strong><code>Create</code></strong>.</li>
<li>Cliquez sur <strong><code>Go to resource</code></strong> une fois le compte de stockage créé.</li>
</ul>
<h3>Stockage des logs dans un Azure Blob Storage</h3>
<p>Veuillez activer les diagnostics de l&#x27;API dans Azure Web App. Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>App Service</code></strong>.</li>
<li>Dans le menu de gauche, sélectionnez <strong><code>Diagnostics settings</code></strong>.</li>
<li>Cliquez sur <strong><code>Add diagnostic setting</code></strong>.</li>
<li>Donnez un nom à votre diagnostic setting, par exemple <strong><code>Project diagnostic</code></strong>.</li>
<li>Sélectionnez les logs que vous souhaitez stocker. Pour ce tutoriel, nous allons sélectionner <strong><code>App Service Console Logs</code></strong>, <strong><code>App Service Application Logs</code></strong> et <strong><code>App Service Platform logs</code></strong>.</li>
<li>Sélectionnez le <strong><code>Destination</code></strong>. Pour ce tutoriel, nous allons sélectionner <strong><code>Archive to a storage account</code></strong>.</li>
<li>Pour la <strong><code>Subscription</code></strong>, sélectionnez votre abonnement Azure, <strong><code>Azure for Students</code></strong> par exemple.</li>
<li>Pour le <strong><code>Storage account</code></strong>, sélectionnez un compte de stockage Azure existant, celui que vous avez créé dans la même région et dans le même Resource group (<strong><code>log007</code></strong> par exemple).</li>
<li>Cliquez sur <strong><code>Save</code></strong>.</li>
</ul>
<h3>Activation des logs dans Azure Web App</h3>
<p>Comme nous capturons les Application Logs, nous devons activer les logs dans Azure Web App. Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>App Service</code></strong>.</li>
<li>Dans le menu de gauche, Dans <strong><code>Monitoring</code></strong>, sélectionnez <strong><code>App Service logs</code></strong>.</li>
<li>Pour <strong><code>Application Logging</code></strong>, sélectionnez <strong><code>File System</code></strong>.</li>
<li>Cliquez sur <strong><code>Save</code></strong>.
`**.</li>
</ul>
<h2>Accès aux logs</h2>
<h3>Accès aux outils avancés et au téléchargement des logs</h3>
<p>Comment accéder aux logs créés ? Pour accéder à ces logs, vous pouvez soit utiliser les <strong><code>Advanced Tools</code></strong> de l&#x27;Azure Web App. Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>App Service</code></strong>.</li>
<li>Dans le menu de gauche, dans <strong><code>Development Tools</code></strong>, sélectionnez <strong><code>Advanced tools</code></strong> et cliquez sur <strong><code>Go</code></strong>.</li>
<li>Cliquez sur <strong><code>Current Docker logs</code></strong> (<strong><code>Download as zip</code></strong>) pour télécharger les logs de Docker.</li>
<li>NB : Il est aussi possible de cliquer sur <strong><code>Log stream</code></strong> pour visualiser les logs en temps réel, mais ça semble moins bien fonctionner que le <strong><code>Log stream</code></strong> de l&#x27;Azure Web App que nous avons déjà vu.</li>
</ul>
<h3>Accès aux logs dans Azure Blob Storage</h3>
<p>Les logs de Azure Web App sont disponibles dans votre compte de stockage Azure. Pour les visualiser, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>Storage account</code></strong>.</li>
<li>Dans le menu de gauche, sélectionnez <strong><code>Containers</code></strong>.</li>
<li>Vous pouvez maintenant voir les logs de l&#x27;API dans le conteneur <strong><code>insights-logs-appserviceconsolelogs</code></strong> et <strong><code>insights-logs-appserviceplatformlogs</code></strong>.</li>
</ul>
<p>Ces logs sont stockés dans des fichiers de log au format <strong><code>json</code></strong>. Vous pourriez les télécharger et les consulter facilement pour suivre les erreurs de manière cohérente et les corriger rapidement.</p>
<p>Néanmoins, il serait plus facile d&#x27;avoir une application qui permette de visualiser les logs en temps réel. Pour cela, vous pourriez utiliser Azure Monitor pour visualiser les logs en temps réel.</p>
<h1><a id="utiliser_azure_monitor_pour_visualiser_les_logs_en_temps_reel"> Utiliser Azure Monitor pour visualiser les logs en temps réel </a></h1>
<h2>Introduction</h2>
<p>Azure Monitor est un service Azure qui permet de visualiser et faire des requêtes sur les logs quasi en temps réel, à quelques minutes près. Pour l&#x27;utiliser, vous devez créer un <strong><code>Log Analytics workspace</code></strong> et connecter votre Azure Web App à ce workspace.</p>
<h2>Création d&#x27;un Log Analytics workspace</h2>
<p>Pour créer un <strong><code>Log Analytics workspace</code></strong>, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez <strong><code>Log Analytics workspaces</code></strong>.</li>
<li>Cliquez sur <strong><code>Create</code></strong>.</li>
<li>Sélectionnez votre abonnement Azure, <strong><code>Azure for Students</code></strong> par exemple.</li>
<li>Sélectionnez le <strong><code>Resource group</code></strong> de votre Azure Web App, <strong><code>pizzeria_group</code></strong> par exemple.</li>
<li>Donnez un nom à votre workspace, par exemple <strong><code>cae-log-analytics</code></strong>.</li>
<li>Sélectionnez la région de votre Azure Web App, <strong><code>Central US</code></strong> par exemple.</li>
<li>Cliquez sur <strong><code>Review + create</code></strong>.</li>
<li>Cliquez sur <strong><code>Create</code></strong>.</li>
<li>Cliquez sur <strong><code>Go to resource</code></strong> une fois le workspace créé.</li>
</ul>
<h2>Connecter votre Azure Web App à votre Log Analytics workspace</h2>
<p>Pour connecter votre Azure Web App à votre <strong><code>Log Analytics workspace</code></strong>, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Recherchez et sélectionnez votre <strong><code>App Service</code></strong>.</li>
<li>Dans le menu de gauche, sélectionnez <strong><code>Diagnostics settings</code></strong>.</li>
<li>Cliquez sur <strong><code>Add diagnostic setting</code></strong>.</li>
<li>Donnez un nom à votre diagnostic setting, par exemple <strong><code>Project analytics</code></strong>.</li>
<li>Sélectionnez les logs que vous souhaitez stocker. Pour ce tutoriel, nous allons sélectionner <strong><code>App Service Console Logs</code></strong>, <strong><code>App Service Application Logs</code></strong> et <strong><code>App Service Platform logs</code></strong>.</li>
<li>Sélectionnez le <strong><code>Destination</code></strong>. Pour ce tutoriel, nous allons maintenant sélectionner <strong><code>Send to Log Analytics</code></strong>.</li>
<li>Pour la <strong><code>Subscription</code></strong>, sélectionnez votre abonnement Azure, <strong><code>Azure for Students</code></strong> par exemple.</li>
<li>Pour le <strong><code>Log Analytics workspace</code></strong>, sélectionnez le workspace que vous avez créé, <strong><code>cae-log-analytics</code></strong> par exemple.</li>
<li>Cliquez sur <strong><code>Save</code></strong>.</li>
</ul>
<h2>Visualiser les logs en temps réel dans Azure Monitor</h2>
<p>Il est maintenant possible de faire des requêtes sur les logs de l&#x27;API dans Azure Monitor ou directement dans le <strong><code>Monitoring</code></strong> de l&#x27;Azure Web App.</p>
<p>Pour cela, veuillez suivre ces étapes :</p>
<ul>
<li>Connectez-vous au portail Azure.</li>
<li>Sélectionnez votre <strong><code>Azure Web App</code></strong>.</li>
<li>Dans le menu de gauche, sélectionnez <strong><code>Monitoring</code></strong>.</li>
<li>Sélectionnez <strong><code>Logs</code></strong>.</li>
<li>Vous pouvez maintenant faire des requêtes sur les logs de l&#x27;API en temps réel.</li>
<li>Un Queries hub est disponible pour vous aider à écrire des requêtes sur les logs de l&#x27;API. Pour ce tutoriel, vous pouvez le fermer.</li>
<li>Cliquez sur <strong><code>Table</code></strong>, et dans <strong><code>App Services</code></strong>, sélectionnez <strong><code>AppServiceConsoleLogs</code></strong>.</li>
<li>Vous pouvez maintenant voir les logs de l&#x27;API en temps réel.</li>
<li>En cliquant sur <strong><code>Simple mode</code></strong>, vous pouvez switcher vers le mode <strong><code>KQL mode</code></strong> pour écrire des requêtes plus avancées sur les logs de l&#x27;API.</li>
<li>En tapant sur <strong>Enter</strong> après <strong>AppServiceConsoleLogs</strong>, vous devriez obtenir des options pour construire votre requête. Par exemple, vous pouvez remplacer la requête par <strong><code>AppServiceConsoleLogs | where ResultDescription contains &quot;ERROR&quot;</code></strong> pour afficher les logs d&#x27;erreur de l&#x27;API.</li>
</ul>
<p>Attention, il est possible que les logs ne soient pas immédiatement disponibles dans Azure Monitor. Il faut parfois attendre quelques minutes avant qu&#x27;ils deviennent disponibles.</p>
<h2>Conclusion sur la visualisation des logs dans l&#x27;environnement déployé</h2>
<p>Dans ce tutoriel, nous avons vu comment visualiser les logs dans l&#x27;environnement déployé. La façon la plus simple et directe est d&#x27;utiliser le stream de logs de l&#x27;Azure Web App. Cela permet de visualiser les logs en temps réel, mais ne permet pas de faire des requêtes sur les logs.</p>
<p>Nous avons vu comment stocker les logs dans Azure Blob Storage pour les rendre persistants et les consulter. Nous nous sommes rendus compte que les logs sauvegardés dans Azure Blob Storage sont stockés dans des fichiers de log au format <strong><code>json</code></strong> qui ne sont pas facilement lisibles pour les humains. Ces fichiers nécessitent un traitement supplémentaire pour être lus et compris, notamment par des outils de visualisation de logs comme Azure Monitor (ou d&#x27;autres outils de visualisation de logs comme Grafana, Kibana, etc...).</p>
<p>Nous avons aussi vu comment utiliser <strong>Azure Monitor</strong> pour faire des requêtes sur les logs quasi en temps réel, à quelques minutes près.</p>
<p>Nous devrions à présent comprendre que la gestion des logs dépend fortement de chaque provider cloud.</p>
<p>N&#x27;hésitez pas à consulter la documentation de votre provider cloud pour plus d&#x27;informations sur la gestion des logs.</p>
<p>Une autre façon intéressante de gérer la persistance des logs pourrait être d&#x27;utiliser Spring pour directement stocker les logs dans Azure Blob Storage. Cela pourrait être une piste intéressante pour vos projets.<br/>
<!-- -->N&#x27;hésitez pas à explorer cette piste pour vos projets.</p>
<p>Si nécessaire, vous pouvez trouver le code associé à la gestion des erreurs et des logs ici : <a href="https://github.com/e-vinci/cae-theory-demos/tree/main/logs">logs</a>.</p></div><div></div><footer class="MuiBox-root mui-0"><div class="MuiGrid-root MuiGrid-container MuiGrid-direction-xs-row MuiGrid-spacing-xs-2 mui-5pbuzx"><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-md-4 mui-981n55"><p class="MuiTypography-root MuiTypography-body2 mui-bxmwoh">© <!-- -->2026<!-- --> - Créé avec Next.js</p></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-md-4 mui-20tnkx"><div class="MuiBox-root mui-1lkm1he"><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium mui-1uzdcm9" tabindex="0" href="mailto:raphael.baroni@vinci.be" aria-label="Envoyer un email"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"></path></svg></a></div></div><div class="MuiGrid-root MuiGrid-direction-xs-row MuiGrid-grid-xs-12 MuiGrid-grid-md-4 mui-981n55"><p class="MuiTypography-root MuiTypography-body2 mui-bxmwoh">e-vinci/cae</p></div></div></footer><script src="/_next/static/chunks/webpack-b7059c8cc37787ef.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[5484,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"default\"]\n3:I[7468,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"ClientThemeProvider\"]\n4:I[7259,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n5:I[1758,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"default\"]\n6:I[8148,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"default\"]\n7:I[5244,[],\"\"]\n8:I[3866,[],\"\"]\n9:I[3620,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"default\"]\na:I[6240,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"673\",\"static/chunks/673-8f55286e245006fb.js\",\"177\",\"static/chunks/app/layout-a557f0e5b59d7b71.js\"],\"default\"]\nc:I[6213,[],\"OutletBoundary\"]\ne:I[6213,[],\"MetadataBoundary\"]\n10:I[6213,[],\"ViewportBoundary\"]\n12:I[4835,[],\"\"]\n:HL[\"/_next/static/css/f76bfe29b96cf8a1.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"xZ_5evazthcO7IIL1Wmtb\",\"p\":\"\",\"c\":[\"\",\"old_iteration3\",\"logs\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"slug\",\"old_iteration3/logs\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/f76bfe29b96cf8a1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"children\":[\"$\",\"html\",null,{\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"title\",null,{\"children\":\"CAE Course\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/svg+xml\",\"href\":\"/favicon.svg\"}]]}],[\"$\",\"$L4\",null,{\"component\":\"body\",\"sx\":{\"display\":\"flex\",\"flexDirection\":\"column\",\"minHeight\":\"100vh\",\"margin\":0},\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"$L5\",null,{\"siteMetaData\":{\"version\":\"\",\"title\":\"CAE\",\"description\":\"siteDescription\",\"url\":\"siteURL\",\"youtubeUrl\":\"youtubeUrl\",\"authorEmail\":\"raphael.baroni@vinci.be\",\"facebookUrl\":\"facebookUrl\",\"instagramUrl\":\"instagramUrl\",\"menuLinks\":[{\"name\":\"Home\",\"link\":\"/\"},{\"name\":\"Partie 1\",\"link\":\"\",\"subMenu\":[{\"name\":\"Introduction\",\"link\":\"/part1/intro\"},{\"name\":\"Qualité générale\",\"link\":\"/part1/general\"}]},{\"name\":\"About\",\"link\":\"/about\"}]}}]}],[\"$\",\"$L6\",null,{\"sx\":{\"padding\":\"1rem\",\"wordWrap\":\"break-word\",\"flex\":1},\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L9\",null,{}],[\"$\",\"$La\",null,{\"siteMetaData\":\"$0:f:0:1:1:props:children:1:props:children:props:children:props:children:1:props:children:0:props:children:props:siteMetaData\"}]]}]]}]}]}]]}],{\"children\":[[\"slug\",\"old_iteration3/logs\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L8\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$Lb\",null,[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}]]}],{},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"1t1A0vfkLfECvql0aYocj\",{\"children\":[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],[\"$\",\"$L10\",null,{\"children\":\"$L11\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$12\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"13:I[3508,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n14:I[5451,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n15:I[8174,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n16:I[8173,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"\"]\n17:I[8064,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n18:I[4401,[\"537\",\"static/chunks/537-32c52f136802c48f.js\",\"328\",\"static/chunks/328-d02b7e1054113488.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-7063113fe138371e.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"$L13\",null,{\"children\":[[\"$\",\"$L14\",null,{\"aria-label\":\"breadcrumb\",\"children\":[[\"$\",\"$L15\",null,{\"href\":\"/\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":\" CAE \"}],[\"$\",\"$L15\",null,{\"href\":\"/iteration3\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":\" Itération 3 \"}],[\"$\",\"$L15\",null,{\"href\":\"#\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":\" Gestion des logs et des exceptions \"}]]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#pourquoi_gerer_des_logs\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Pourquoi gérer des logs ? \"}]}]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#comment_gerer_les_exceptions_dans_une_application_spring_boot\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Comment gérer les exceptions dans une application Spring Boot ? \"}]}]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#comment_gerer_les_exceptions_de_spring_boot_comme_access_denied_exception\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Comment gérer les exceptions de Spring Boot comme AccessDeniedException ? \"}]}]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#comment_logguer_les_exceptions_de_maniere_centralisee\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Comment logguer les exceptions de manière centralisée ? \"}]}]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#comment_visualiser_les_logs_dans_lenvironnement_deploye\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Comment visualiser les logs dans l'environnement déployé ? \"}]}]}],[\"$\",\"$L17\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L15\",null,{\"href\":\"#utiliser_azure_monitor_pour_visualiser_les_logs_en_temps_reel\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$16\",\"children\":[\"$\",\"$L18\",null,{\"primary\":\" Utiliser Azure Monitor pour visualiser les logs en temps réel \"}]}]}]]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"pourquoi_gerer_des_logs\",\"children\":\" Pourquoi gérer des logs ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Lorsqu'une application est en production, les logs sont essentiels pour comprendre les erreurs qui se produisent et pour les corriger rapidement. Ils permettent également de suivre les performances de l'application et de détecter les problèmes potentiels.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Les logs doivent être clairs, concis et informatifs. Ils doivent contenir suffisamment d'informations pour permettre de comprendre l'erreur et de la corriger, mais ne pas être trop verbeux pour ne pas noyer l'opérateur d'informations inutiles.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Les logs doivent permettre de répondre à plusieurs questions :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Quand l'erreur s'est-elle produite ?\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Où l'erreur s'est-elle produite ?\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Qui a provoqué l'erreur ?\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Quelle est la nature de l'erreur ?\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Comment l'erreur peut-elle être corrigée ?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ces questions doivent être prises en compte lors de la rédaction des logs. Cela permettra de faciliter le travail d'investigation et de correction des erreurs par les développeurs.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Types de logs\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il existe plusieurs types de logs, en fonction de leur gravité et de leur importance. Voici quelques exemples de types de logs courants :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"DEBUG\"}],\" : Informations de débogage, utiles pour comprendre le fonctionnement interne de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"INFO\"}],\" : Informations générales sur le fonctionnement de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"WARN\"}],\" : Avertissements sur des situations potentiellement problématiques.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"ERROR\"}],\" : Erreurs qui ont empêché le bon fonctionnement de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"FATAL\"}],\" : Erreurs graves qui ont provoqué l'arrêt de l'application. Il est à noter que la librairie \",[\"$\",\"strong\",null,{\"children\":\"Logback\"}],\" (librairie par défaut pour une application Spring Boot) ne supporte pas ce niveau de log. \",[\"$\",\"strong\",null,{\"children\":\"FATAL\"}],\" est donc souvent remplacé par \",[\"$\",\"strong\",null,{\"children\":\"ERROR\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"TRACE\"}],\" : Informations détaillées sur le fonctionnement de l'application, utiles pour le débogage.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est important de choisir le bon type de log en fonction de la gravité de l'erreur. Les logs de type DEBUG ne doivent pas être activés en production, car ils peuvent contenir des informations sensibles sur le fonctionnement interne de l'application.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Quelle différence entre un log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TRACE\"}]}],\" et un log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" ? Le log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TRACE\"}]}],\" est plus détaillé que le log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\". Le log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TRACE\"}]}],\" est utilisé pour des informations très détaillées sur le fonctionnement de l'application, utiles pour le débogage. Le log de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" est utilisé pour des informations de débogage, utiles pour comprendre le fonctionnement interne de l'application.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Quels services sont à logguer ?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Au sein de notre application d'entreprise, l'API Spring Boot qui gère les requêtes HTTP des clients doit être logguée pour suivre les erreurs et les performances.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Est-ce que le frontend doit être loggué ? Non, car le frontend est une application statique qui ne nécessite pas de logs. Les erreurs du frontend peuvent être suivies via les outils de développement du navigateur. D'autre part, les développeurs n'ont pas accès aux logs du navigateur des utilisateurs, ce qui rend difficile le suivi des erreurs côté client.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Est-ce que la base de données doit être logguée ? Oui, car les erreurs de connexion à la base de données peuvent être critiques pour le bon fonctionnement de l'application. Les logs de la base de données doivent être activés pour suivre les erreurs de connexion et les requêtes SQL. Néanmoins, les logs de la base de données ne doivent pas contenir d'informations sensibles, comme les mots de passe. De plus, comme nous utilisons Spring Data JPA, les logs de la base de données sont générés automatiquement par Hibernate, il n'y a donc rien à faire au niveau de la base de données, seulement au niveau de l'API.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Est-ce que Docker doit être loggué ? Oui, car les erreurs de déploiement et de configuration de Docker peuvent être critiques pour le bon fonctionnement de l'application. Les logs de Docker doivent être activés pour suivre les erreurs de déploiement et de configuration. De plus, les logs de Docker peuvent être utiles pour suivre les performances des conteneurs et détecter les problèmes potentiels.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Comment gérer les logs des exceptions ?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Les exceptions doivent être logguées de manière appropriée pour permettre de comprendre l'erreur et de la corriger rapidement. Mais attention, nous ne souhaitons pas polluer le code avec des \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"try-catch\"}]}],\" un peu partout.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Avant de continuer dans la gestion des logs, nous allons donc voir les bonnes pratiques pour gérer les exceptions dans une application Spring Boot.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_gerer_les_exceptions_dans_une_application_spring_boot\",\"children\":\" Comment gérer les exceptions dans une application Spring Boot ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est important de gérer correctement les exceptions dans une application Spring Boot pour garantir un comportement fiable et prévisible. Les exceptions peuvent survenir à tout moment pendant l'exécution de l'application et doivent être traitées de manière appropriée pour éviter les plantages et les comportements inattendus.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"De plus, il existe des bonnes pratiques pour gérer les exceptions afin d'éviter de polluer le code avec des \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"try-catch\"}]}],\" inutiles et de garantir une gestion cohérente des erreurs.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Et finalement, avec Spring Boot, il y a beaucoup de parties de code qui génèrent déjà des exceptions sans que cela soit directement visible dans le code. Nous pensons ici notamment aux erreur de base de données (via les repositories), aux erreurs d'authentification (via Spring Security), etc...\",[\"$\",\"br\",null,{}],\"\\n\",\"Il est donc important de savoir comment gérer ces exceptions de manière centralisée.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Gestion actuelle des exceptions via ResponseStatusException\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans notre application actuelle, nous utilisons la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" pour gérer les exceptions et renvoyer des réponses HTTP appropriées aux clients. Cette classe permet de spécifier le code de statut HTTP à renvoyer ainsi que le message d'erreur à afficher.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"En voici un exemple :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Get a pizza by id.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"id\"}],\" the pizza id.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the pizza.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@GetMapping\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"/{id}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Pizza\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getPizza\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@PathVariable\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"long\"}],\" id\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Pizza\"}],\" pizza \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" pizzaService\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getPizza\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"id\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"pizza \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"throw\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Pizza not found\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" pizza\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans cet exemple, si la pizza n'est pas trouvée, une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" est lancée avec le code de statut HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"404 NOT FOUND\"}]}],\" et le message d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Pizza not found\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Est-ce que cette exception est logguée automatiquement ? Non, les exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" ne sont pas logguées automatiquement par Spring Boot. Il est donc nécessaire de les logguer manuellement pour suivre les erreurs de manière cohérente. Nous allons voir ça tout prochainement.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cette approche est simple et efficace pour gérer les exceptions et renvoyer des réponses HTTP appropriées aux clients. Cependant, elle ne permet pas de logguer les exceptions de manière centralisée et de suivre les erreurs de manière cohérente.\"}],\"\\n\",[\"$\",\"blockquote\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Notions d'architecture importantes\"}],\" : Les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" sont des exceptions spécifiques à Spring Boot qui permettent de renvoyer des réponses HTTP avec un code de statut et un message d'erreur. Elles font partie de la couche de présentation de l'API et sont généralement utilisées pour renvoyer des réponses aux clients. Ces exceptions ne doivent donc pas se trouver dans la couche \\\"business\\\" de l'application, c'est-à-dire dans les services ou les repositories. Elles peuvent être utilisées dans les contrôleurs pour renvoyer des réponses HTTP aux clients, ou dans les filtres pour intercepter les requêtes et les réponses.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Gestion d'exceptions personnalisées\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour gérer les exceptions de manière centralisée et cohérente, il est recommandé d'utiliser des exceptions personnalisées. Ces exceptions peuvent être étendues à partir de la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"RuntimeException\"}]}],\" ou de l'une de ses sous-classes, comme \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"IllegalArgumentException\"}]}],\" ou \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"IllegalStateException\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si l'on reprend l'exemple précédent, nous pourrions créer une exception personnalisée \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" pour gérer les cas où une ressource n'est pas trouvée. Cela nous permettra d'avoir une gestion plus globale des exceptions, nous pourrons utiliser la même exception dans plusieurs parties de l'application, car en fait, cela n'est pas vraiment utile dans le message renvoyé au client de préciser que la pizza n'a pas été trouvée. C'est généralement évident que si une opération pour effacer une ressource de type pizza n'a pas abouti, c'est que la pizza n'existe pas. Renvoyer juste un message d'erreur générique est suffisant. D'ailleurs renvoyer juste un code d'erreur est suffisant.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce tutoriel, veuillez dans votre projet GitLab créer une nouvelle classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" dans un nouveau package \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"exceptions\"}]}],\". Cette classe doit étendre la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"RuntimeException\"}]}],\" et accepter un message d'erreur en paramètre.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * ResourceNotFoundException to handle resource not found exceptions.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"extends\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"RuntimeException\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Constructor for ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"super\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Constructor for ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"message\"}],\" the message.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"super\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons maintenant modifier notre contrôleur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"controllers/PizzaController\"}]}],\" pour utiliser cette exception personnalisée.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Delete a pizza by id.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"id\"}],\" the pizza id.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the pizza.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@DeleteMapping\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"/{id}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@PreAuthorize\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"hasRole('ROLE_ADMIN')\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Pizza\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"deletePizza\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@PathVariable\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"long\"}],\" id\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Pizza\"}],\" pizza \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" pizzaService\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"deletePizza\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"id\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"pizza \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"throw\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" pizza\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans cet exemple, si la pizza n'est pas trouvée, une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" est lancée. Actuellement, comme nous ne traitons pas cette exception, elle sera renvoyée au client sous forme de réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"500 INTERNAL SERVER ERROR\"}]}],\". Nous allons voir comment gérer cette exception de manière centralisée et la logguer correctement.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Comment gérer les exceptions de manière centralisée ?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour gérer les exceptions de manière centralisée, nous allons utiliser un gestionnaire d'exceptions global. Ce gestionnaire d'exceptions interceptera toutes les exceptions non traitées par les contrôleurs et les logguera de manière appropriée.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce tutoriel, veuillez dans votre projet GitLab créer une nouvelle classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"GlobalExceptionHandler\"}]}],\" dans un nouveau package \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"exceptions\"}]}],\". Cette classe doit être annotée avec \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"@ControllerAdvice\"}]}],\" pour indiquer qu'elle est un gestionnaire d'exceptions global.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ControllerAdvice\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ExceptionHandler\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"server\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * GlobalExceptionHandler to handle exceptions globally.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ControllerAdvice\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"GlobalExceptionHandler\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResponseStatusException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"57\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"58\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"59\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle all other exceptions.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"60\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"62\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"63\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"64\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleGlobalException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Quelques explications sur ce code :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"La méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleResourceNotFoundException\"}]}],\" gère les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\". Elle renvoie une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"404 NOT FOUND\"}]}],\" avec le message d'erreur s'il est défini.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"La méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleResponseStatusException\"}]}],\" gère les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\". Elle renvoie une réponse HTTP avec le code de statut et le message d'erreur de l'exception. Cette méthode permet donc d'utiliser les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" pour renvoyer des réponses HTTP aux clients, sans être obligé de créer des exceptions personnalisées.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"La méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleGlobalException\"}]}],\" gère toutes les autres exceptions non traitées par les contrôleurs. Elle renvoie une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"500 INTERNAL SERVER ERROR\"}]}],\" avec le message d'erreur de l'exception.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Afin de renvoyer dans le body de la réponse HTTP un message d'erreur plus détaillé au format JSON, nous allons créer une classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ErrorDetails\"}]}],\" dans le même package \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"exceptions\"}]}],\".\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"lombok\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Data\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * ErrorDetails to handle error details.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@Data\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" statusCode\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" details\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Constructor for ErrorDetails.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"statusCode\"}],\" the status code.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"message\"}],\"    the message.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"details\"}],\"    the details.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"int\"}],\" statusCode\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" details\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"statusCode \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" statusCode\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"message \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"this\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"details \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" details\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Cette classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ErrorDetails\"}]}],\" contient les informations sur l'erreur à renvoyer dans le body de la réponse HTTP. Elle contient le code de statut, le message d'erreur et les détails de l'erreur.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez tenter de lancer votre application Spring Boot et de tester les différentes exceptions que vous avez mises en place, avec au minimum :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" sans message d'erreur. Veuillez vérifier que le code de statut HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"404 NOT FOUND\"}]}],\" est renvoyé, et que la réponse HTTP ne contient pas de body. Attention à ne pas oublier de d'abord s'authentifier avec un utilisateur ayant le rôle \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ROLE_ADMIN\"}]}],\" pour pouvoir supprimer une pizza.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" avec un message d'erreur. Pour cela vous pouvez, dans l'opération de suppression d'une pizza, utiliser \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"throw new ResourceNotFoundException(\\\"Pizza not found\\\");\"}]}],\".\",[\"$\",\"br\",null,{}],\"\\n\",\"Veuillez vérifier que le code de statut HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"404 NOT FOUND\"}]}],\" est renvoyé, et que la réponse HTTP contient le message d'erreur dans le body.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\". Pour cela vous pouvez, par exemple, tentez de lire une pizza qui n'existe pas.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"💭 Comment tester le passage dans la méthode globale \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleGlobalException\"}]}],\" ?  Pour cela, vous pouvez par exemple, stopper votre base de données et tenter de lire une pizza. Attention, vous devez stopper la base de données après avoir bien démarré l'API ; si vous le faisiez avant, l'API ne démarrerait pas correctement.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Vous devriez obtenir la réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"500 INTERNAL SERVER ERROR\"}]}],\" avec le message d'erreur de l'exception dans le body :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-json\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-json code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"statusCode\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"500\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"message\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Could not open JPA EntityManager for transaction\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"details\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"uri=/pizzas/3\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Et si l'on souhaitait connaître la classe d'exception qui a été levée, comment faire ? Pour cela, il suffit de modifier la méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleGlobalException\"}]}],\" pour soit renvoyer le nom de la classe de l'exception, soit ajouter la cause de l'exception dans le message d'erreur. Ici nous avons choisi d'ajouter tant le nom de la classe que la cause de l'exception :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleGlobalException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cela est impressionnant, nous sommes maintenant capable de \\\"catcher\\\" toutes les exceptions non traitées par les contrôleurs et de les traiter de manière centralisée.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour les exceptions soulevées par la DB, il semble OK de les traiter au sein de la méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleGlobalException\"}]}],\" et de renvoyer un code d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"500 INTERNAL SERVER ERROR\"}]}],\". Mais comment gérer les erreurs associées à l'autorisation ? Par exemple, si un utilisateur non autorisé tente de supprimer une pizza alors qu'il n'est pas admin, une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" est levée.\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_gerer_les_exceptions_de_spring_boot_comme_access_denied_exception\",\"children\":\" Comment gérer les exceptions de Spring Boot comme AccessDeniedException ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Lorsqu'une exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" est levée par Spring Security, cela signifie que l'utilisateur n'est pas autorisé à accéder à la ressource demandée. Cette exception est levée automatiquement par Spring Security lorsqu'un utilisateur tente d'accéder à une ressource sans les autorisations nécessaires.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce tutorial, via les requêtes HTTP, veuillez tenter de supprimer une pizza en tant qu'utilisateur non admin (\",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"guest\"}]}],\" par exemple). Vous devriez normalement obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"403 FORBIDDEN\"}]}],\" avec le message d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Access is denied\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Néanmoins, pour l'instant, vous recevez une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"500 INTERNAL SERVER ERROR\"}]}],\" avec le message d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\" \\\"org.springframework.security.authorization.AuthorizationDeniedException : Access Denied. Cause: null\\\",\"}]}],\". Cela signifie que l'exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" n'est pas correctement gérée par notre gestionnaire d'exceptions global.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Comment gérer les exceptions de Spring Boot ?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Ici, nous devons trouver la classe de l'exception qui est levée par Spring Security lorsqu'un utilisateur n'est pas autorisé à accéder à une ressource.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"En regardant la documentation de Spring Security (\",[\"$\",\"a\",null,{\"href\":\"https://docs.spring.io/spring-security/reference/api/java/org/springframework/security/authorization/AuthorizationDeniedException.html\",\"children\":\"https://docs.spring.io/spring-security/reference/api/java/org/springframework/security/authorization/AuthorizationDeniedException.html\"}],\"), nous découvrons qu'une \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AuthorizationDeniedException\"}]}],\" est une \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" contenant un \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AuthorizationResult\"}]}],\". Nous allons donc modifier notre gestionnaire d'exceptions global pour gérer les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\".\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle AccessDeniedException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleAccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez tester à nouveau de supprimer une pizza en tant qu'utilisateur non admin (\",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"guest\"}]}],\" par exemple). Vous devriez maintenant obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"403 FORBIDDEN\"}]}],\" avec le message d'erreur :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-json\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-json code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"statusCode\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"403\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"message\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"org.springframework.security.authorization.AuthorizationDeniedException : Access Denied. Cause: null\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token property\",\"children\":\"\\\"details\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"uri=/pizzas/2\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Et maintenant, veuillez tester la requête pour tenter d'effacer la pizza avec l'id 2 mais sans fournir de token ! Qu'est-ce que vous obtenez ? Vous obtenez aussi un status code \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"403 FORBIDDEN\"}]}],\" avec le message d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Access is denied\"}]}],\". Cela signifie que la même exception de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" est lancée que l'on soit connecté ou non. Cela est dû au fait que Spring Security intercepte la requête avant même que le contrôleur ne soit appelé.\",[\"$\",\"br\",null,{}],\"\\n\",\"Pour que cela soit propre, nous devrions renvoyer un code d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" pour indiquer que l'utilisateur n'est pas autorisé à accéder à la ressource car il n'est pas authentifié. Pour cela, nous devons mettre à jour notre code pour vérifier s'il y a un token dans la requête et renvoyer un code d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" si ce n'est pas le cas.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez mettre à jour le code de la méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"handleAccessDeniedException\"}]}],\" pour vérifier si l'utilisateur est authentifié et renvoyer un code d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" si ce n'est pas le cas.\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle AccessDeniedException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleAccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"12\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getHeader\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Authorization\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"13\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"14\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez tester à nouveau de supprimer une pizza en tant qu'utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\". Et si vous tentez de supprimer une pizza en tant qu'utilisateur non admin, vous devriez obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"403 FORBIDDEN\"}]}],\".\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Conclusion sur la gestion des exceptions dans une application Spring Boot\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous avons vu comment gérer les exceptions de manière centralisée dans une application Spring Boot en utilisant un gestionnaire d'exceptions global. Ce gestionnaire d'exceptions intercepte toutes les exceptions non traitées par les contrôleurs. Nous avons également vu comment gérer les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" levées par Spring Security lorsqu'un utilisateur n'est pas autorisé à accéder à une ressource. Cet apprentissage devrait vous permettre de gérer n'importe quel type d'exceptions de manière cohérente et de renvoyer des réponses HTTP appropriées aux clients.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons maintenant voir comment logguer les exceptions de manière centralisée pour suivre les erreurs de manière cohérente et les corriger rapidement.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_logguer_les_exceptions_de_maniere_centralisee\",\"children\":\" Comment logguer les exceptions de manière centralisée ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Maintenant que nous avons appris à centraliser les exceptions au sein d'un gestionnaire d'exceptions global, il est temps de les logguer de manière centralisée pour suivre les erreurs de manière cohérente et les corriger rapidement.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour logguer les exceptions de manière centralisée, nous allons utiliser le logger par défaut de Spring Boot, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\". \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" est une librairie de log très populaire dans l'écosystème Spring Boot et offre de nombreuses fonctionnalités pour gérer les logs de manière efficace. C'est le successeur de \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log4j\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log4j2\"}]}],\" et est largement utilisé dans les applications Spring Boot.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour information, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" implémente l'interface \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"SLF4J\"}]}],\" (Simple Logging Facade for Java), qui est une façade de logging standardisée pour Java. \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"SLF4J\"}]}],\" permet de séparer le code de l'application des implémentations de logging, ce qui facilite le changement de librairie de log sans modifier le code de l'application.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si vous souhaitez découvrir plus en détail \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\", vous pouvez consulter la documentation officielle : \",[\"$\",\"a\",null,{\"href\":\"https://logback.qos.ch/\",\"children\":\"https://logback.qos.ch/\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Par défaut, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" est configuré pour logguer les messages de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ERROR\"}]}],\" et supérieur dans la console.\\nNous nous rendons donc compte que les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\" ne sont pas logguées par défaut, tout comme les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\" car elles ne sont pas affichées dans la console.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Comment faire pour logguer ces exceptions de manière centralisée ? Nous allons devoir mettre à jour notre gestionnaire d'exceptions global pour logguer les exceptions de manière appropriée.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Logguer les exceptions de manière centralisée\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez mettre à jour la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"exceptions/GlobalExceptionHandler\"}]}],\" avec ces ajouts :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"security\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"access\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ControllerAdvice\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ExceptionHandler\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"server\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * GlobalExceptionHandler to handle exceptions globally.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ControllerAdvice\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"GlobalExceptionHandler\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}],\" logger \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getLogger\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"GlobalExceptionHandler\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"34\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"35\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"36\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"37\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Resource not found: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"38\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"40\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"41\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResponseStatusException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"57\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"58\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"59\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"60\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Response status exception: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"61\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"62\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"63\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"64\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle AccessDeniedException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"73\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"74\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"75\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"76\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"77\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleAccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"78\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"79\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"80\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getHeader\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Authorization\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"81\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"82\",\"children\":[\"          ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"83\",\"children\":[\"          request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"84\",\"children\":[\"      logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Unauthorized access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"85\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"86\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"87\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"88\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"89\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"90\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"91\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Forbidden access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"92\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"93\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"94\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"95\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"96\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle all other exceptions.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"97\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"98\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"99\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"100\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"101\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"102\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"103\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleGlobalException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"104\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"105\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"106\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"107\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"108\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"109\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"error\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Internal server error: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"110\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"111\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"112\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"113\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Quelques explications sur ce code :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Nous avons ajouté un logger de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logger\"}]}],\" pour logguer les exceptions de manière centralisée. Nous lui avons donné le nom \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"GlobalExceptionHandler\"}]}],\" pour le distinguer des éventuels autres loggers.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Nous avons ajouté des instructions \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logger.info\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logger.error\"}]}],\" pour logguer les exceptions de manière appropriée. Nous utilisons le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\" pour les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\", et le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ERROR\"}]}],\" pour les autres exceptions non traitées par les contrôleurs.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous avons ajouté des messages d'erreur détaillés pour chaque type d'exception, y compris le code de statut, le message d'erreur et les détails de l'erreur. Ces messages d'erreur seront loggués dans la console et permettront de suivre les erreurs de manière cohérente.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour rappel, voici les différents niveau de log que l'on peut utiliser avec \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TRACE\"}]}],\" : Informations détaillées sur le fonctionnement de l'application, utiles pour le débogage.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" : Informations de débogage, utiles pour comprendre le fonctionnement interne de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\" : Informations générales sur le fonctionnement de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"WARN\"}]}],\" : Avertissements sur des situations potentiellement problématiques.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ERROR\"}]}],\" : Erreurs qui ont empêché le bon fonctionnement de l'application.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour créer un log selon le niveau adéquat, il suffit d'appeler la méthode correspondante sur l'objet \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logger\"}]}],\". Par exemple, pour créer un log de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\", on appelle la méthode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logger.info\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Quelle est la différence entre un niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Trace\"}]}],\" et un niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Debug\"}]}],\" ? Le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Trace\"}]}],\" est plus détaillé que le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Debug\"}]}],\". Le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Trace\"}]}],\" est utilisé pour des informations très détaillées sur le fonctionnement de l'application, utiles pour le débogage. Le niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Debug\"}]}],\" est utilisé pour des informations de débogage, utiles pour comprendre le fonctionnement interne de l'application.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez tester à nouveau de supprimer une pizza en tant qu'utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" et voir le message d'erreur loggué dans la console.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vous remarquez que dans le détails, on ne voit pas beaucoup d'informations. On souhaiterait par exemple connaître le type de requête faire sur l'URI.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce faire, voici comment on pourrait modifier la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"GlobalExceptionHandler\"}]}],\" pour ajouter le type de requête et d'autres infos sur le client ayant fait la requête amenant à une exception :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"jakarta\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"servlet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"security\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"access\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ControllerAdvice\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ExceptionHandler\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"server\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * GlobalExceptionHandler to handle exceptions globally.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ControllerAdvice\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"GlobalExceptionHandler\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}],\" logger \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getLogger\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"GlobalExceptionHandler\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod=\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\";\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Resource not found: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResponseStatusException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"57\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"58\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"59\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"60\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"62\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"63\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"64\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod=\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\";\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Response status exception: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"73\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"74\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"75\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"76\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"77\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle AccessDeniedException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"78\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"79\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"80\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"81\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"82\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"83\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"84\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleAccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"85\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"86\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"87\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getHeader\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Authorization\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"88\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"89\",\"children\":[\"          ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"90\",\"children\":[\"          \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod=\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\";\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"91\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"92\",\"children\":[\"      logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Unauthorized access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"93\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"94\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"95\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"96\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"97\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"98\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"99\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"100\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"101\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"102\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod=\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\";\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"103\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"104\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Forbidden access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"105\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"106\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"107\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"108\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"109\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle all other exceptions.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"110\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"111\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"112\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"113\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"114\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"115\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"116\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleGlobalException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"117\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"118\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"119\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"120\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"121\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"122\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"123\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"124\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"125\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod:\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"126\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"127\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"error\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Internal server error: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"128\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"129\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"130\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"131\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Est-ce que ce code est correct point de vue de PMD \u0026 CPD ?\",[\"$\",\"br\",null,{}],\"\\n\",\"N'hésitez pas à lancer les outils de vérification de code pour le vérifier, comme par exemple localement via :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"mvn clean \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Une fois cette commande lancée, on voit qu'il y a de la duplication de code. Comment pourrait-on améliorer cela ?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour éviter la duplication de code, on pourrait extraire la logique de création des \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ErrorDetails\"}]}],\" dans une méthode privée. Voici comment mettre à jour la classe \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"GlobalExceptionHandler\"}]}],\" pour extraire la logique de création des \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ErrorDetails\"}]}],\" dans une méthode privée :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-java\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-java code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"package\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"be\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"vinci\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"ipl\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"cae\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"demo\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"exceptions\"]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"jakarta\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"servlet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"slf4j\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"http\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"security\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"access\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ControllerAdvice\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"bind\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"annotation\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ExceptionHandler\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"context\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token import\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token namespace\",\"children\":[\"org\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"springframework\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"web\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"server\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}]]}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" * GlobalExceptionHandler to handle exceptions globally.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\" */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ControllerAdvice\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"GlobalExceptionHandler\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Logger\"}],\" logger \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"LoggerFactory\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getLogger\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"GlobalExceptionHandler\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"private\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],\" status\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"boolean\"}],\" forLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"String\"}],\" description \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"        forLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"httpMethod=\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMethod\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\";\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"            \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getDescription\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"status\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"        ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getClass\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getName\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\" : \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\". Cause: \\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"+\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getCause\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"        description\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResourceNotFoundException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResourceNotFoundException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResourceNotFoundException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Resource not found: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getMessage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"51\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"52\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"53\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"NOT_FOUND\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"54\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"55\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"56\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"57\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle ResponseStatusException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"58\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"59\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"60\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"62\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"63\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"64\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleResponseStatusException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseStatusException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"valueOf\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"valueOf\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"value\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"73\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Response status exception: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"74\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"75\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getReason\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"76\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"77\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"78\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"79\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getStatusCode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"80\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"81\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"82\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"83\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle AccessDeniedException.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"84\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"85\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"86\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"87\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"88\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"89\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"90\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleAccessDeniedException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"AccessDeniedException\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"91\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"92\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getHeader\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Authorization\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"==\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"null\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"93\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetails \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"94\",\"children\":[\"          httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"95\",\"children\":[\"      logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Unauthorized access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetails\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"96\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"UNAUTHORIZED\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"97\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"98\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"99\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"100\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"101\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"102\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"103\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"104\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"info\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Forbidden access: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"105\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"FORBIDDEN\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"106\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"107\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"108\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"/**\\n\"}]]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"109\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   * Handle all other exceptions.\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"110\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   *\\n\"}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"111\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"ex\"}],\"      the exception.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"112\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@param\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter\",\"children\":\"request\"}],\" the request.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"113\",\"children\":[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":[\"   * \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"@return\"}],\" the response entity.\\n\"]}]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"114\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token doc-comment comment\",\"children\":\"   */\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"115\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token annotation punctuation\",\"children\":\"@ExceptionHandler\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"class\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"116\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"?\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"handleGlobalException\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"Exception\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"WebRequest\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"117\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpServletRequest\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"118\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsClient \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"119\",\"children\":[\"        request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"false\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"120\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ErrorDetails\"}],\" errorDetailsLog \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"createErrorDetails\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" ex\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" request\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"121\",\"children\":[\"        httpRequest\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token boolean\",\"children\":\"true\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"122\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"123\",\"children\":[\"    logger\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"error\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Internal server error: {}\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" errorDetailsLog\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"124\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"125\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"return\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"ResponseEntity\"}],[\"$\",\"span\",null,{\"className\":\"token generics\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003c\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"\u003e\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"errorDetailsClient\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token class-name\",\"children\":\"HttpStatus\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token constant\",\"children\":\"INTERNAL_SERVER_ERROR\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"126\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"127\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Est-ce que ce code est correct point de vue de PMD \u0026 CPD ?\",[\"$\",\"br\",null,{}],\"\\n\",\"N'hésitez pas à lancer les outils de vérification de code pour le vérifier, comme par exemple localement via :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"mvn clean \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Maintenant, nous avons une méthode privée \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"createErrorDetails\"}]}],\" qui prend en paramètre le code de statut, l'exception, la requête, la requête HTTP et un booléen pour indiquer si les détails sont pour le log ou pour le client. Cette méthode crée un objet \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ErrorDetails\"}]}],\" avec les informations nécessaires pour logguer l'erreur de manière centralisée.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez tester à nouveau de supprimer une pizza en tant qu'utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" et voir le message d'erreur loggué dans la console avec le type de requête et d'autres informations sur le client ayant fait la requête.\",[\"$\",\"br\",null,{}],\"\\n\",\"Veuillez aussi observer que le message d'erreur renvoyé au client ne contient pas d'informations sensibles !\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configuration de Logback\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous souhaitons toujours afficher les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ERROR\"}]}],\" et supérieur dans la console, tout en logguant toutes les exceptions de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AccessDeniedException\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResponseStatusException\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ResourceNotFoundException\"}]}],\", etc..., dans un fichier de log.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans les profiles de développement, nous souhaitons afficher les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans les profiles de production, nous souhaitons afficher les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\" et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.\\nPourquoi ? Parce que les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" peuvent contenir des informations sensibles sur le fonctionnement interne de l'application et ne doivent pas être activés en production.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Configuration de Logback pour le profile de développement\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous pouvons configurer certaines options dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" pour écrire les logs dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logs/application.log\"}]}],\". Pour cela, veuillez ajouter les lignes suivantes dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"debug\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.file.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"logs/application.log\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-file-size\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"10MB\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-history\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"7\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Ces lignes permettent de configurer le fichier de log \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logs/application.log\"}]}],\" pour qu'il ne dépasse pas 10 Mo et qu'il conserve les 7 derniers fichiers de log.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"debug=true\"}]}],\" permet d'activer les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" et supérieur dans la console.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Comme nous ne précisons pas le niveau de log, toutes les exceptions seront logguées dans ce fichier de log.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Est-ce que les logs sont aussi affichés dans la console ? Oui, les logs sont également affichés dans la console, car nous n'avons pas modifié la configuration par défaut de \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" pour afficher les logs dans la console.\",[\"$\",\"br\",null,{}],\"\\n\",\"Si on avait souhaité stopper l'affichage des logs dans la console, on pourrait ajouter la ligne suivante dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.pattern.console\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cela aurait permis de supprimer les logs de la console, mais nous ne souhaitons pas le faire !\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Ignorer les fichiers de log dans Git\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour éviter de commiter les fichiers de log dans Git, nous devons ajouter le dossier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logs\"}]}],\" dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\".gitignore\"}]}],\". Pour cela, veuillez ajouter la ligne suivante dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\".gitignore\"}]}],\" de votre API :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"logs/\\n\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez redémarrer votre API et tester à nouveau de supprimer une pizza en tant qu'utilisateur non authentifié. Vous devriez maintenant obtenir une réponse HTTP \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"401 UNAUTHORIZED\"}]}],\" et voir le message d'erreur loggué dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logs/application.log\"}]}],\". De plus, vous devriez voir les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" et supérieur dans la console.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Configuration de Logback pour le profile de développement pour plus de détails sur les logs de type DB\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour avoir plus de détails sur les logs de type DB, nous pouvons ajouter les lignes suivantes dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.show-sql\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.properties.hibernate.format_sql\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.org.hibernate.SQL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"DEBUG\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.org.hibernate.type.descriptor.sql.BasicBinder\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"TRACE\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Que font ces lignes ?\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"spring.jpa.show-sql=true\"}]}],\" permet d'afficher les requêtes SQL générées par Hibernate dans la console.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"spring.jpa.properties.hibernate.format_sql=true\"}]}],\" permet de formater les requêtes SQL générées par Hibernate pour les rendre plus lisibles.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logging.level.org.hibernate.SQL=DEBUG\"}]}],\" permet d'afficher les requêtes SQL générées par Hibernate dans la console avec le niveau de log \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\"}]}],\" permet d'afficher les valeurs des paramètres des requêtes SQL générées par Hibernate dans la console avec le niveau de log \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"TRACE\"}]}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Configuration de Logback pour le profile de production\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Est-ce que les logs de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" sont activés en production ? Non, les logs de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" ne sont pas activés en production, car ils peuvent contenir des informations sensibles sur le fonctionnement interne de l'application. Nous allons donc configurer \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logback\"}]}],\" pour afficher les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\" et supérieur en production.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-production.properties\"}]}],\", veuillez ajouter les\\nlignes suivantes :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.root\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"INFO\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.file.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"logs/application.log\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-file-size\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"10MB\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-history\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"7\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Ces lignes permettent de configurer le niveau de log à \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"INFO\"}]}],\" et supérieur en production, et d'écrire les logs dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"logs/application.log\"}]}],\".\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Configuration de Logback pour le profile de test et le profile de staging\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour les profiles de test et de staging, nous souhaitons afficher les logs de niveau \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DEBUG\"}]}],\" et supérieur dans la console, tout en logguant toutes les exceptions dans un fichier de log.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\", veuillez ajouter les lignes suivantes :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.root\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"DEBUG\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.file.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"logs/application.log\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-file-size\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"10MB\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-history\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"7\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.show-sql\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.properties.hibernate.format_sql\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.org.hibernate.SQL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"DEBUG\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.org.hibernate.type.descriptor.sql.BasicBinder\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"TRACE\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-staging.properties\"}]}],\", veuillez ajouter les lignes suivantes :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.level.root\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"DEBUG\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.file.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"logs/application.log\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-file-size\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"10MB\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"logging.logback.rollingpolicy.max-history\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"7\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_visualiser_les_logs_dans_lenvironnement_deploye\",\"children\":\" Comment visualiser les logs dans l'environnement déployé ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Comment visualiser les logs dans l'environnement déployé ?\",[\"$\",\"br\",null,{}],\"\\n\",\"Ou en d'autres termes, comment stocker les logs dans un endroit sûr et les consulter facilement pour suivre les erreurs de manière cohérente et les corriger rapidement ?\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans notre cours, nous avons choisi de déployer l'API dans Azure Web App à l'aide de Docker Compose. De plus, pour les assets, nous utilisons Azure Blob Storage. Nous allons donc tenter de stocker les logs dans Azure Blob Storage pour les rendre persistants et les consulter (facilement).\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Visualiser les derniers logs dans le portail Azure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans le portail Azure, vous pouvez visualiser les derniers logs de l'API en temps réel. Pour cela, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log stream\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Vous pouvez maintenant voir les logs en temps réel de l'API.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Stocker les diagnostics dans Azure storage\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Création d'un compte de stockage Azure\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour stocker les logs dans Azure Blob Storage, vous devez créer un compte de stockage Azure dans la même région que votre Azure Web App.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous vous avons jusque là recommandé de créer vos services Azure dans la région \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Central US\"}]}],\". Pourquoi ? C'est aussi la région la moins chère pour les étudiants Azure.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour que le service de stockage soit visible par l'Azure Web App, il doit être dans la même région que l'Azure Web App.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vous pourriez utiliser le service de stockage créé pour stocker les images de l'API pour stocker les logs de l'API.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Néanmoins, pour être sûr que le service de stockage est dans la même région que l'Azure Web App, nous allons créer un nouveau service de stockage pour stocker les logs de l'API.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez vérifier la région de votre Azure Web App dans le portail Azure et créer un compte de stockage Azure dans la même région. Pour cela, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Choisissez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Free services\"}]}],\" dans la recherche pour voir les services gratuits.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Azure Blob Storage\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Indiquez comme \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Resource group\"}]}],\" le même que celui de votre Azure Web App.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Donnez un nom à votre compte de stockage, par exemple \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"log007\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Review + create\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Create\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Go to resource\"}]}],\" une fois le compte de stockage créé.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Stockage des logs dans un Azure Blob Storage\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez activer les diagnostics de l'API dans Azure Web App. Pour cela, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Diagnostics settings\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Add diagnostic setting\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Donnez un nom à votre diagnostic setting, par exemple \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Project diagnostic\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez les logs que vous souhaitez stocker. Pour ce tutoriel, nous allons sélectionner \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Console Logs\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Application Logs\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Platform logs\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Destination\"}]}],\". Pour ce tutoriel, nous allons sélectionner \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Archive to a storage account\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour la \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Subscription\"}]}],\", sélectionnez votre abonnement Azure, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Azure for Students\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Storage account\"}]}],\", sélectionnez un compte de stockage Azure existant, celui que vous avez créé dans la même région et dans le même Resource group (\",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"log007\"}]}],\" par exemple).\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Save\"}]}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Activation des logs dans Azure Web App\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Comme nous capturons les Application Logs, nous devons activer les logs dans Azure Web App. Pour cela, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, Dans \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Monitoring\"}]}],\", sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service logs\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Application Logging\"}]}],\", sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"File System\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Save\"}]}],\".\\n`**.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Accès aux logs\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Accès aux outils avancés et au téléchargement des logs\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Comment accéder aux logs créés ? Pour accéder à ces logs, vous pouvez soit utiliser les \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Advanced Tools\"}]}],\" de l'Azure Web App. Pour cela, veuillez suivre ces étapes :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, dans \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Development Tools\"}]}],\", sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Advanced tools\"}]}],\" et cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Go\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Current Docker logs\"}]}],\" (\",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Download as zip\"}]}],\") pour télécharger les logs de Docker.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"NB : Il est aussi possible de cliquer sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log stream\"}]}],\" pour visualiser les logs en temps réel, mais ça semble moins bien fonctionner que le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log stream\"}]}],\" de l'Azure Web App que nous avons déjà vu.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Accès aux logs dans Azure Blob Storage\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Les logs de Azure Web App sont disponibles dans votre compte de stockage Azure. Pour les visualiser, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Storage account\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Containers\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Vous pouvez maintenant voir les logs de l'API dans le conteneur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"insights-logs-appserviceconsolelogs\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"insights-logs-appserviceplatformlogs\"}]}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Ces logs sont stockés dans des fichiers de log au format \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"json\"}]}],\". Vous pourriez les télécharger et les consulter facilement pour suivre les erreurs de manière cohérente et les corriger rapidement.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Néanmoins, il serait plus facile d'avoir une application qui permette de visualiser les logs en temps réel. Pour cela, vous pourriez utiliser Azure Monitor pour visualiser les logs en temps réel.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"utiliser_azure_monitor_pour_visualiser_les_logs_en_temps_reel\",\"children\":\" Utiliser Azure Monitor pour visualiser les logs en temps réel \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Azure Monitor est un service Azure qui permet de visualiser et faire des requêtes sur les logs quasi en temps réel, à quelques minutes près. Pour l'utiliser, vous devez créer un \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log Analytics workspace\"}]}],\" et connecter votre Azure Web App à ce workspace.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Création d'un Log Analytics workspace\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour créer un \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log Analytics workspace\"}]}],\", veuillez suivre ces étapes :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log Analytics workspaces\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Create\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez votre abonnement Azure, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Azure for Students\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Resource group\"}]}],\" de votre Azure Web App, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"pizzeria_group\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Donnez un nom à votre workspace, par exemple \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"cae-log-analytics\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez la région de votre Azure Web App, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Central US\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Review + create\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Create\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Go to resource\"}]}],\" une fois le workspace créé.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Connecter votre Azure Web App à votre Log Analytics workspace\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour connecter votre Azure Web App à votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log Analytics workspace\"}]}],\", veuillez suivre ces étapes :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Recherchez et sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Diagnostics settings\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Add diagnostic setting\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Donnez un nom à votre diagnostic setting, par exemple \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Project analytics\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez les logs que vous souhaitez stocker. Pour ce tutoriel, nous allons sélectionner \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Console Logs\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Application Logs\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Service Platform logs\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Destination\"}]}],\". Pour ce tutoriel, nous allons maintenant sélectionner \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Send to Log Analytics\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour la \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Subscription\"}]}],\", sélectionnez votre abonnement Azure, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Azure for Students\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Log Analytics workspace\"}]}],\", sélectionnez le workspace que vous avez créé, \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"cae-log-analytics\"}]}],\" par exemple.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Save\"}]}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Visualiser les logs en temps réel dans Azure Monitor\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Il est maintenant possible de faire des requêtes sur les logs de l'API dans Azure Monitor ou directement dans le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Monitoring\"}]}],\" de l'Azure Web App.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour cela, veuillez suivre ces étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Connectez-vous au portail Azure.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez votre \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Azure Web App\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le menu de gauche, sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Monitoring\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Logs\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Vous pouvez maintenant faire des requêtes sur les logs de l'API en temps réel.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Un Queries hub est disponible pour vous aider à écrire des requêtes sur les logs de l'API. Pour ce tutoriel, vous pouvez le fermer.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Table\"}]}],\", et dans \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"App Services\"}]}],\", sélectionnez \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AppServiceConsoleLogs\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Vous pouvez maintenant voir les logs de l'API en temps réel.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"En cliquant sur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"Simple mode\"}]}],\", vous pouvez switcher vers le mode \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"KQL mode\"}]}],\" pour écrire des requêtes plus avancées sur les logs de l'API.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"En tapant sur \",[\"$\",\"strong\",null,{\"children\":\"Enter\"}],\" après \",[\"$\",\"strong\",null,{\"children\":\"AppServiceConsoleLogs\"}],\", vous devriez obtenir des options pour construire votre requête. Par exemple, vous pouvez remplacer la requête par \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"AppServiceConsoleLogs | where ResultDescription contains \\\"ERROR\\\"\"}]}],\" pour afficher les logs d'erreur de l'API.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Attention, il est possible que les logs ne soient pas immédiatement disponibles dans Azure Monitor. Il faut parfois attendre quelques minutes avant qu'ils deviennent disponibles.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Conclusion sur la visualisation des logs dans l'environnement déployé\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans ce tutoriel, nous avons vu comment visualiser les logs dans l'environnement déployé. La façon la plus simple et directe est d'utiliser le stream de logs de l'Azure Web App. Cela permet de visualiser les logs en temps réel, mais ne permet pas de faire des requêtes sur les logs.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous avons vu comment stocker les logs dans Azure Blob Storage pour les rendre persistants et les consulter. Nous nous sommes rendus compte que les logs sauvegardés dans Azure Blob Storage sont stockés dans des fichiers de log au format \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"json\"}]}],\" qui ne sont pas facilement lisibles pour les humains. Ces fichiers nécessitent un traitement supplémentaire pour être lus et compris, notamment par des outils de visualisation de logs comme Azure Monitor (ou d'autres outils de visualisation de logs comme Grafana, Kibana, etc...).\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous avons aussi vu comment utiliser \",[\"$\",\"strong\",null,{\"children\":\"Azure Monitor\"}],\" pour faire des requêtes sur les logs quasi en temps réel, à quelques minutes près.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous devrions à présent comprendre que la gestion des logs dépend fortement de chaque provider cloud.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"N'hésitez pas à consulter la documentation de votre provider cloud pour plus d'informations sur la gestion des logs.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Une autre façon intéressante de gérer la persistance des logs pourrait être d'utiliser Spring pour directement stocker les logs dans Azure Blob Storage. Cela pourrait être une piste intéressante pour vos projets.\",[\"$\",\"br\",null,{}],\"\\n\",\"N'hésitez pas à explorer cette piste pour vos projets.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si nécessaire, vous pouvez trouver le code associé à la gestion des erreurs et des logs ici : \",[\"$\",\"a\",null,{\"href\":\"https://github.com/e-vinci/cae-theory-demos/tree/main/logs\",\"children\":\"logs\"}],\".\"]}]]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Logs\"}]]\n"])</script><script>self.__next_f.push([1,"d:null\n"])</script></body></html>