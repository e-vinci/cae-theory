1:"$Sreact.fragment"
2:I[909,["110","static/chunks/110-b5064b8e222f3dc7.js","261","static/chunks/261-ec80f02120d23ca6.js","177","static/chunks/app/layout-393b08a65086606c.js"],"default"]
3:I[7468,["110","static/chunks/110-b5064b8e222f3dc7.js","261","static/chunks/261-ec80f02120d23ca6.js","177","static/chunks/app/layout-393b08a65086606c.js"],"ClientThemeProvider"]
4:I[1886,["110","static/chunks/110-b5064b8e222f3dc7.js","261","static/chunks/261-ec80f02120d23ca6.js","177","static/chunks/app/layout-393b08a65086606c.js"],"default"]
5:I[8412,["110","static/chunks/110-b5064b8e222f3dc7.js","261","static/chunks/261-ec80f02120d23ca6.js","177","static/chunks/app/layout-393b08a65086606c.js"],"default"]
6:I[5244,[],""]
7:I[3866,[],""]
8:I[3620,["110","static/chunks/110-b5064b8e222f3dc7.js","261","static/chunks/261-ec80f02120d23ca6.js","177","static/chunks/app/layout-393b08a65086606c.js"],"default"]
a:I[6213,[],"OutletBoundary"]
c:I[6213,[],"MetadataBoundary"]
e:I[6213,[],"ViewportBoundary"]
10:I[4835,[],""]
:HL["/cae-theory/_next/static/css/fd89b796fb218fbf.css","style"]
0:{"P":null,"b":"npg3vfM7YweC0ACTL0a2e","p":"/cae-theory","c":["","quality","unit-tests"],"i":false,"f":[[["",{"children":[["slug","quality/unit-tests","oc"],{"children":["__PAGE__",{}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/cae-theory/_next/static/css/fd89b796fb218fbf.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L2",null,{"children":["$","$L3",null,{"children":["$","html",null,{"children":[["$","head",null,{"children":[["$","title",null,{"children":"CAE Course"}],["$","link",null,{"rel":"icon","type":"image/svg+xml","href":"/cae-theory/favicon.svg"}]]}],["$","body",null,{"children":[["$","header",null,{"children":["$","$L4",null,{"siteMetaData":{"version":"","title":"CAE","description":"siteDescription","url":"siteURL","youtubeUrl":"youtubeUrl","authorEmail":"authorEmail","facebookUrl":"facebookUrl","instagramUrl":"instagramUrl","menuLinks":[{"name":"Home","link":"/"},{"name":"Intro","link":"/intro"},{"name":"Qualité","link":"/quality","subMenu":[{"name":"Qualité générale","link":"/quality/general"},{"name":"Qualité du frontend","link":"/quality/frontend"},{"name":"Qualité de l'API","link":"/quality/api"},{"name":"Intégration Continue","link":"/quality/ci"},{"name":"Tests e2e","link":"/quality/e2e"}]},{"name":"About","link":"/about"}]}}]}],["$","$L5",null,{"style":{"padding":"1rem","wordWrap":"break-word"},"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[],[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]]],"forbidden":"$undefined","unauthorized":"$undefined"}]}],["$","$L8",null,{}]]}]]}]}]}]]}],{"children":[["slug","quality/unit-tests","oc"],["$","$1","c",{"children":[null,["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","$0:f:0:1:2:children:0","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L9",null,["$","$La",null,{"children":"$Lb"}]]}],{},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","J2BNPwZpCst_Ie8_zrheU",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","$Le",null,{"children":"$Lf"}],null]}]]}],false]],"m":"$undefined","G":["$10","$undefined"],"s":false,"S":true}
11:I[3508,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],"default"]
12:I[283,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],"default"]
13:I[6656,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],"default"]
14:I[8173,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],""]
15:I[7119,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],"default"]
16:I[391,["110","static/chunks/110-b5064b8e222f3dc7.js","75","static/chunks/75-c97a8a7bb0fb66bf.js","340","static/chunks/app/%5B%5B...slug%5D%5D/page-677149b664fe0440.js"],"default"]
9:[["$","$L11",null,{"children":[["$","$L12",null,{"aria-label":"breadcrumb","children":["$","p",null,{"children":[["$","$L13",null,{"href":"/","underline":"hover","color":"inherit","component":"$14","children":" CAE "}],"\n",["$","$L13",null,{"href":"/quality","underline":"hover","color":"inherit","component":"$14","children":" Qualité "}],"\n",["$","$L13",null,{"href":"/quality/frontend","underline":"hover","color":"inherit","component":"$14","children":" Qualité du frontend"}],["$","br",null,{}],"\n",["$","$L13",null,{"href":"#","underline":"hover","color":"inherit","component":"$14","children":" Unit Tests "}]]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#mise_en_place_des_tests_unitaires_avec_vitest","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Mise en place des tests unitaires avec Vitest "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#ou_enregistrer_les_specifications_de_test","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Où enregistrer les spécifications de test ? "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#comment_tester_un_composant_simple","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Comment tester un composant simple ? "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#comment_mocker_un_contexte","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Comment mocker un contexte ? "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#comment_mocker_un_use_navigate","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Comment mocker un useNavigate ? "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#comment_lancer_une_exception_a_laide_dun_mock","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Comment lancer une exception à l'aide d'un mock ? "}]}]}],["$","$L15",null,{"component":"div","sx":{"paddingTop":0,"paddingBottom":0},"children":["$","$L13",null,{"href":"#comment_creer_des_rapports_de_tests","underline":"hover","color":"inherit","component":"$14","children":["$","$L16",null,{"primary":" Comment créer des rapports de tests ?  "}]}]}]]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"mise_en_place_des_tests_unitaires_avec_vitest","children":" Mise en place des tests unitaires avec Vitest "}]}],"\n",["$","h2",null,{"children":"Installation des dépendances"}],"\n",["$","p",null,{"children":["Nous allons réaliser les tests unitaires de nos applications React avec ",["$","code",null,{"children":"Vitest"}],"."]}],"\n",["$","p",null,{"children":["Pour ce tutoriel, veuillez créer un nouveau projet nommé ",["$","code",null,{"children":"unit-tests"}]," sur base d'un copier/coller du dossier ",["$","code",null,{"children":"front"}]," de votre tutoriel ",["$","code",null,{"children":"context"}],". Si nécessaire, vous pouvez trouver le code associé au dossier ",["$","code",null,{"children":"front"}]," ici : ",["$","a",null,{"href":"https://github.com/e-vinci/cae-theory-demos/tree/main/context/front","children":"dossier front du tuto context"}],"."]}],"\n",["$","p",null,{"children":["Pour ajouter ",["$","code",null,{"children":"Vitest"}]," à votre projet, vous pouvez exécuter la commande suivante :"]}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," ",["$","span",null,{"className":"token function","children":"install"}]," ",["$","span",null,{"className":"token parameter variable","children":"-D"}]," vitest @testing-library/react jsdom @vitest/coverage-v8\n"]}]}]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"jsdom"}]," est un environnement de test JavaScript qui simule un navigateur web. Il est utilisé par ",["$","code",null,{"children":"Vitest"}]," pour exécuter les tests unitaires."]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"@testing-library/react"}]," est une bibliothèque de test qui fournit des utilitaires pour tester les composants React."]}],"\n",["$","p",null,{"children":[["$","code",null,{"children":"@vitest/coverage-v8"}]," est un plugin de couverture de code pour ",["$","code",null,{"children":"Vitest"}]," qui génère des rapports de couverture de code."]}],"\n",["$","p",null,{"children":["Veuillez configurer votre application Vite pour exécuter les tests unitaires avec ",["$","code",null,{"children":"Vitest"}],". Pour cela, vous devez modifier votre fichier ",["$","code",null,{"children":"vite.config.ts"}]," :"]}],"\n",["$","pre",null,{"className":"language-ts","children":["$","code",null,{"className":"language-ts code-highlight","children":[["$","span",null,{"className":"code-line line-number highlight-line","line":"1","children":[["$","span",null,{"className":"token comment","children":"// eslint-disable-next-line spaced-comment"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"2","children":[["$","span",null,{"className":"token comment","children":"/// <reference types=\"vitest/config\" />"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," defineConfig ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vite'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":[["$","span",null,{"className":"token keyword","children":"import"}]," react ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'@vitejs/plugin-react-swc'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":[["$","span",null,{"className":"token keyword","children":"import"}]," checker ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vite-plugin-checker'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":[["$","span",null,{"className":"token comment","children":"// https://vitejs.dev/config/"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":[["$","span",null,{"className":"token keyword","children":"export"}]," ",["$","span",null,{"className":"token keyword","children":"default"}]," ",["$","span",null,{"className":"token function","children":"defineConfig"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"10","children":["  test",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"11","children":["    environment",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'jsdom'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"12","children":["    globals",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"13","children":["    setupFiles",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'./src/setupTests.ts'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"14","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"15","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"16","children":["  plugins",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"17","children":["    ",["$","span",null,{"className":"token function","children":"react"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":["    ",["$","span",null,{"className":"token function","children":"checker"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"19","children":["      typescript",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"20","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"21","children":["  ",["$","span",null,{"className":"token punctuation","children":"]"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"22","children":["  server",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"23","children":["    proxy",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"24","children":["      ",["$","span",null,{"className":"token string-property property","children":"'/api'"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"25","children":["        target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'http://localhost:3000'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"26","children":["        changeOrigin",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token boolean","children":"true"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"27","children":["        ",["$","span",null,{"className":"token function-variable function","children":"rewrite"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"path",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token operator","children":"=>"}]," path",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token function","children":"replace"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-source language-regex","children":[["$","span",null,{"className":"token anchor function","children":"^"}],["$","span",null,{"className":"token escape","children":"\\/"}],"api"]}],["$","span",null,{"className":"token regex-delimiter","children":"/"}]]}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"28","children":["      ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"29","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"30","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"31","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["Veuillez créer un fichier vide nommé ",["$","code",null,{"children":"setupTests.ts"}]," dans le répertoire ",["$","code",null,{"children":"/src"}]," de votre projet. Ce fichier pourrait être utilisé pour configurer l'environnement de test. Par exemple, vous pourriez y importer des dépendances nécessaires pour les tests unitaires afin de ne plus les importer dans chaque fichier de test."]}],"\n",["$","h2",null,{"children":"Exécution des tests"}],"\n",["$","p",null,{"children":["Pour écrire des tests unitaires avec ",["$","code",null,{"children":"Vitest"}],", vous pouvez créer un fichier ",["$","strong",null,{"children":["$","code",null,{"children":"NomComposant.test.tsx"}]}]," à côté de votre composant ou fonction à tester."]}],"\n",["$","p",null,{"children":["Par défaut, ",["$","code",null,{"children":"Vitest"}]," recherche les fichiers contenant ",["$","strong",null,{"children":["$","code",null,{"children":".test"}]}]," ou ",["$","strong",null,{"children":["$","code",null,{"children":".spec"}]}]," dans le nom de fichier pour exécuter les tests."]}],"\n",["$","p",null,{"children":["Pour exécuter les tests à l'aide d'une commande, vous devez ajouter un script dans votre fichier ",["$","code",null,{"children":"package.json"}]," :"]}],"\n",["$","pre",null,{"className":"language-json","children":["$","code",null,{"className":"language-json code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token property","children":"\"scripts\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property","children":"\"test\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"vitest\""}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token property","children":"\"coverage\""}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"\"vitest run --coverage\""}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"Vous pouvez exécuter les tests en utilisant la commande suivante :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," ",["$","span",null,{"className":"token builtin class-name","children":"test"}],"\n"]}]}]}],"\n",["$","p",null,{"children":"Pour générer un rapport de couverture de code, vous pouvez exécuter la commande suivante :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," run coverage\n"]}]}]}],"\n",["$","p",null,{"children":["Pour exécuter les tests directement au sein de VS Code, vous pouvez installer l'extension ",["$","code",null,{"children":"Vitest"}]," : ",["$","a",null,{"href":"https://marketplace.visualstudio.com/items?itemName=alexjoverm.vitest","children":"Vitest"}]]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"ou_enregistrer_les_specifications_de_test","children":" Où enregistrer les spécifications de test ? "}]}],"\n",["$","p",null,{"children":"Il existe trois principales approches pour enregistrer les spécifications de test :"}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":[["$","strong",null,{"children":"Approche intégrée"}]," : Les spécifications de test sont enregistrées dans le même fichier que le composant ou la fonction à tester. Cela permet de garder les tests à proximité du code source et de les maintenir ensemble."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Approche séparée dans le répertoire du composant"}]," : Les spécifications de test sont enregistrées dans des fichiers séparés avec l'extension ",["$","code",null,{"children":".test.tsx"}]," ou ",["$","code",null,{"children":".spec.tsx"}],". Cela permet de garder les tests séparés du code source, mais proche."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":"Approche séparée dans un répertoire dédié"}]," : Les spécifications de test sont enregistrées dans un répertoire dédié, par exemple ",["$","code",null,{"children":"/src/unit-tests"}],". Cela permet de garder les tests complètement séparés du code source."]}],"\n"]}],"\n",["$","p",null,{"children":"Chaque approche a ses avantages et ses inconvénients. Il est important de choisir celle qui convient le mieux à votre projet et à votre équipe.  Il est recommandé de garder les tests à proximité du code source pour faciliter la maintenance et la compréhension du code."}],"\n",["$","p",null,{"children":["Pour le Projet CAE, nous vous demandons de suivre ",["$","strong",null,{"children":"l'approche séparée dans le répertoire du composant"}],"."]}],"\n",["$","p",null,{"children":["Plus d'information sur ",["$","code",null,{"children":"Vitest"}]," : ",["$","a",null,{"href":"https://vitest.dev/","children":"Vitest"}]]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"comment_tester_un_composant_simple","children":" Comment tester un composant simple ? "}]}],"\n",["$","p",null,{"children":["Dans un premier temps, nous allons tester le composant ",["$","code",null,{"children":"LoginPage"}]," qui est un composant intelligent dont ses dépendances à la gestion de l'état sont injectées à l'aide d'un contexte."]}],"\n",["$","p",null,{"children":["Nous allons réaliser un premier simple test unitaire pour vérifier que le composant ",["$","code",null,{"children":"LoginPage"}]," affiche deux labels (\"Username\" et \"Password\")."]}],"\n",["$","p",null,{"children":["Veuillez créer un nouveau script nommé ",["$","code",null,{"children":"/src/components/pages/LoginPage.tests.tsx"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," render",["$","span",null,{"className":"token punctuation","children":","}]," screen ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'@testing-library/react'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"MemoryRouter"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," describe",["$","span",null,{"className":"token punctuation","children":","}]," test",["$","span",null,{"className":"token punctuation","children":","}]," expect ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vitest'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":["$","span",null,{"className":"token maybe-class-name","children":"LoginPage"}]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'../../components/pages/LoginPage'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"describe"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'renders a form with username and password inputs'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":"\n"}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":"Voici une explication du code du test unitaire :"}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"describe"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["permet de regrouper des tests liés entre eux. Ici, cela regroupe les tests pour le composant ",["$","code",null,{"children":"LoginPage"}],"."]}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"'LoginPage'"}]," est le nom du groupe de tests, ce qui aide à organiser et à identifier les tests dans les rapports de test."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"test"}]}]," (ou ",["$","strong",null,{"children":["$","code",null,{"children":"it"}]}],") :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"est une fonction qui définit un cas de test individuel."}],"\n",["$","li",null,{"children":[["$","code",null,{"children":"'renders a form with username and password inputs'"}]," : est une description du cas de test. Elle explique ce que le test vérifie."]}],"\n",["$","li",null,{"children":["La fonction fléchée ",["$","strong",null,{"children":["$","code",null,{"children":"() => { ... }"}]}]," contient le code du test."]}],"\n",["$","li",null,{"children":["Est un synonyme de ",["$","strong",null,{"children":["$","code",null,{"children":"it"}]}],"."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"render"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"est une fonction qui rend un composant React dans un environnement de test."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"<MemoryRouter>"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est un composant de ",["$","code",null,{"children":"react-router-dom"}]," qui simule un environnement de routage en mémoire."]}],"\n",["$","li",null,{"children":["Il est utilisé ici pour fournir le contexte de routage nécessaire au composant LoginPage.\n",["$","code",null,{"children":"<LoginPage />"}]," est le composant à tester."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"screen"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"est un objet qui représente le DOM rendu."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"getByLabelText"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une méthode de ",["$","code",null,{"children":"screen"}]," qui recherche un élément dans le DOM par son texte de label associé. Ici, il recherche un élément avec le label ",["$","code",null,{"children":"'Username'"}],"."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"expect"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"est une fonction qui crée une assertion."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"toBeTruthy"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"est une méthode d'assertion qui vérifie que la valeur est \"truthy\" (c'est-à-dire qu'elle n'est pas null, undefined, false, 0, NaN, ou une chaîne vide)."}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"expect(passwordInput).toBeTruthy();"}]}]," : cette assertion vérifie que l'élément ",["$","code",null,{"children":"passwordInput"}]," existe dans le DOM."]}],"\n"]}],"\n",["$","p",null,{"children":"Pour exécuter ce test unitaire, vous pouvez utiliser la commande suivante :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," run ",["$","span",null,{"className":"token builtin class-name","children":"test"}],"\n"]}]}]}],"\n",["$","p",null,{"children":["Il est bien sûr possible de le faire dans VS Code avec l'extension ",["$","code",null,{"children":"Vitest"}],", en cliquant sur le bouton ",["$","code",null,{"children":"Run Test"}]," à côté de la description du test."]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"comment_mocker_un_contexte","children":" Comment mocker un contexte ? "}]}],"\n",["$","p",null,{"children":["Pour tester un composant qui dépend d'un contexte, vous pouvez utiliser la fonction ",["$","code",null,{"children":"render"}]," de ",["$","code",null,{"children":"@testing-library/react"}]," pour envelopper le composant dans un ",["$","code",null,{"children":"Provider"}]," qui fournit les valeurs du contexte."]}],"\n",["$","p",null,{"children":"Voici le code que nous souhaitons tester :"}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"LoginPage"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," loginUser ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"UserContextType"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useContext"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"UserContext"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," navigate ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useNavigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"username",["$","span",null,{"className":"token punctuation","children":","}]," setUsername",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"password",["$","span",null,{"className":"token punctuation","children":","}]," setPassword",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"handleSubmit"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"SyntheticEvent"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    e",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"preventDefault"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"11","children":["      ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"loginUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," username",["$","span",null,{"className":"token punctuation","children":","}]," password ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["      ",["$","span",null,{"className":"token function","children":"navigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"err",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":["      ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage::error: '"}],["$","span",null,{"className":"token punctuation","children":","}]," err",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"15","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"17","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["Nous souhaitons ici injecter un contexte ",["$","code",null,{"children":"UserContext"}]," qui contient une fonction ",["$","code",null,{"children":"loginUser"}]," et vérifier que le composant ",["$","code",null,{"children":"LoginPage"}]," appelle correctement cette fonction lors de la soumission du formulaire."]}],"\n",["$","p",null,{"children":["Voici un nouveau test unitaire à ajouter dans le fichier ",["$","code",null,{"children":"/src/components/pages/LoginPage.tests.tsx"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number highlight-line","line":"1","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," render",["$","span",null,{"className":"token punctuation","children":","}]," screen",["$","span",null,{"className":"token punctuation","children":","}]," fireEvent ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'@testing-library/react'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"MemoryRouter"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"3","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," describe",["$","span",null,{"className":"token punctuation","children":","}]," test",["$","span",null,{"className":"token punctuation","children":","}]," expect",["$","span",null,{"className":"token punctuation","children":","}]," vi ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vitest'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":["$","span",null,{"className":"token maybe-class-name","children":"LoginPage"}]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'../../components/pages/LoginPage'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"5","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"UserContext"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'../../contexts/UserContext'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"7","children":[["$","span",null,{"className":"token function","children":"describe"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'renders a form with username and password inputs'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"11","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"12","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"15","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"17","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"19","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"20","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"21","children":["  ",["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'calls loginUser when the form is submitted'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"22","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," loginUserMock ",["$","span",null,{"className":"token operator","children":"="}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"23","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," mockContextValue ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"24","children":["      authenticatedUser",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"25","children":["      registerUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"26","children":["      loginUser",["$","span",null,{"className":"token operator","children":":"}]," loginUserMock",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"27","children":["      clearUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"28","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"29","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"30","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"31","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"32","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}]," ",["$","span",null,{"className":"token attr-name","children":"value"}],["$","span",null,{"className":"token script language-javascript","children":[["$","span",null,{"className":"token script-punctuation punctuation","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"mockContextValue",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"33","children":[["$","span",null,{"className":"token plain-text","children":"          "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"34","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"35","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"36","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"37","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"38","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"39","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"40","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," submitButton ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByRole"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'button'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"41","children":["      name",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-source language-regex","children":"s'authentifier"}],["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-flags","children":"i"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"42","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"43","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"44","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"45","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"46","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"click"}],["$","span",null,{"className":"token punctuation","children":"("}],"submitButton",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"47","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"48","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"loginUserMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toHaveBeenCalledWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"49","children":["      username",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"50","children":["      password",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"51","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"52","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"53","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.fn()"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"Vitest"}]," qui crée un mock de fonction."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour créer un mock de la fonction ",["$","code",null,{"children":"loginUser"}]," du contexte ",["$","code",null,{"children":"UserContext"}],"."]}],"\n",["$","li",null,{"children":"Un mock est une fonction simulée qui enregistre les appels et les arguments passés à la fonction simulée."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"<UserContext.Provider>"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est un composant de ",["$","code",null,{"children":"React"}]," qui injecte les valeurs du contexte aux composants enfants."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"fireEvent.change"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"@testing-library/react"}]," qui simule un événement de changement sur un élément du DOM."]}],"\n",["$","li",null,{"children":"Elle est utilisée ici pour simuler la saisie de valeurs dans les champs de formulaire."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"fireEvent.click"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"@testing-library/react"}]," qui simule un événement de clic sur un élément du DOM."]}],"\n",["$","li",null,{"children":"Elle est utilisée ici pour simuler le clic sur le bouton de soumission du formulaire."}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"expect(loginUserMock).toHaveBeenCalledWith({ ... })"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une assertion qui vérifie que la fonction ",["$","code",null,{"children":"loginUserMock"}]," a été appelée avec les arguments spécifiés."]}],"\n"]}],"\n",["$","p",null,{"children":"Pour exécuter les deux tests unitaires existants, vous pouvez utiliser la commande suivante :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," run ",["$","span",null,{"className":"token builtin class-name","children":"test"}],"\n"]}]}]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"comment_mocker_un_use_navigate","children":" Comment mocker un useNavigate ? "}]}],"\n",["$","p",null,{"children":["Pour tester un composant qui utilise ",["$","code",null,{"children":"useNavigate"}]," de ",["$","code",null,{"children":"react-router-dom"}],", vous pouvez utiliser la fonction ",["$","code",null,{"children":"vi.mock"}]," pour mocker le module ",["$","code",null,{"children":"react-router-dom"}],"."]}],"\n",["$","p",null,{"children":["Si l'on reprend le composant ",["$","code",null,{"children":"LoginPage"}]," que nous souhaitons tester :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"LoginPage"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," loginUser ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"UserContextType"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useContext"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"UserContext"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," navigate ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useNavigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"username",["$","span",null,{"className":"token punctuation","children":","}]," setUsername",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"password",["$","span",null,{"className":"token punctuation","children":","}]," setPassword",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"handleSubmit"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"SyntheticEvent"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    e",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"preventDefault"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"11","children":["      ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"loginUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," username",["$","span",null,{"className":"token punctuation","children":","}]," password ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"12","children":["      ",["$","span",null,{"className":"token function","children":"navigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"13","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"err",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":["      ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage::error: '"}],["$","span",null,{"className":"token punctuation","children":","}]," err",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"15","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"17","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["Dans notre précédent test, nous avons déjà vérifié que la fonction ",["$","code",null,{"children":"loginUser"}]," est appelée correctement. Pour être complet dans notre deuxième test unitaire, nous allons vérifier que la fonction ",["$","code",null,{"children":"navigate"}]," est appelée avec le chemin '/' après l'appel à ",["$","code",null,{"children":"loginUser"}],"."]}],"\n",["$","p",null,{"children":["Voici le test unitaire à modifier dans le fichier ",["$","code",null,{"children":"/src/components/pages/LoginPage.tests.tsx"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number highlight-line","line":"1","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," render",["$","span",null,{"className":"token punctuation","children":","}]," screen",["$","span",null,{"className":"token punctuation","children":","}]," fireEvent",["$","span",null,{"className":"token punctuation","children":","}]," waitFor ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'@testing-library/react'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"2","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"MemoryRouter"}],["$","span",null,{"className":"token punctuation","children":","}]," useNavigate ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," describe",["$","span",null,{"className":"token punctuation","children":","}]," test",["$","span",null,{"className":"token punctuation","children":","}]," expect",["$","span",null,{"className":"token punctuation","children":","}]," vi ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'vitest'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":["$","span",null,{"className":"token maybe-class-name","children":"LoginPage"}]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'../../components/pages/LoginPage'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":[["$","span",null,{"className":"token keyword","children":"import"}]," ",["$","span",null,{"className":"token imports","children":[["$","span",null,{"className":"token punctuation","children":"{"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"UserContext"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]]}]," ",["$","span",null,{"className":"token keyword","children":"from"}]," ",["$","span",null,{"className":"token string","children":"'../../contexts/UserContext'"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"7","children":["vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mock"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," actual ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"importActual"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"9","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"10","children":["    ",["$","span",null,{"className":"token spread operator","children":"..."}],"actual",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"11","children":["    useNavigate",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"12","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"13","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"15","children":[["$","span",null,{"className":"token function","children":"describe"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":["  ",["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'renders a form with username and password inputs'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"17","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"19","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"20","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"21","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"22","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"23","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"24","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"25","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"26","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toBeTruthy"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"27","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"28","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"29","children":["  ",["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'calls loginUser and navigates to HomePage when the form is submitted'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"30","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," loginUserMock ",["$","span",null,{"className":"token operator","children":"="}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"31","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," navigateMock ",["$","span",null,{"className":"token operator","children":"="}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"32","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," mockContextValue ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"33","children":["      authenticatedUser",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"34","children":["      registerUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"35","children":["      loginUser",["$","span",null,{"className":"token operator","children":":"}]," loginUserMock",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"36","children":["      clearUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"37","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"38","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"39","children":["    vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mocked"}],["$","span",null,{"className":"token punctuation","children":"("}],"useNavigate",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mockReturnValue"}],["$","span",null,{"className":"token punctuation","children":"("}],"navigateMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"40","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"41","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"42","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"43","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}]," ",["$","span",null,{"className":"token attr-name","children":"value"}],["$","span",null,{"className":"token script language-javascript","children":[["$","span",null,{"className":"token script-punctuation punctuation","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"mockContextValue",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"44","children":[["$","span",null,{"className":"token plain-text","children":"          "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"45","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"46","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"47","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"48","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"49","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"50","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"51","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," submitButton ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByRole"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'button'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"52","children":["      name",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-source language-regex","children":"s'authentifier"}],["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-flags","children":"i"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"53","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"54","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"55","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"56","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"57","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"click"}],["$","span",null,{"className":"token punctuation","children":"("}],"submitButton",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"58","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"59","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"loginUserMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toHaveBeenCalledWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"60","children":["      username",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"61","children":["      password",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"62","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"63","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"64","children":["    ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"waitFor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"65","children":["      ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"navigateMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toHaveBeenCalledWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"66","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"67","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"68","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["Voici comment nous avons mocké ",["$","code",null,{"children":"useNavigate"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line","children":["vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mock"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," actual ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"await"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"importActual"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'react-router-dom'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token keyword","children":"return"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line","children":["    ",["$","span",null,{"className":"token spread operator","children":"..."}],"actual",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["    useNavigate",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.mock"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"Vitest"}]," qui permet de mocker un module."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour mocker le module ",["$","code",null,{"children":"react-router-dom"}]," et remplacer la fonction ",["$","code",null,{"children":"useNavigate"}]," par un mock."]}],"\n",["$","li",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.importActual"}]}]," est une fonction qui permet d'importer le module réel pour le mocker."]}],"\n",["$","li",null,{"children":["On récupère ici le module ",["$","code",null,{"children":"react-router-dom"}]," et on remplace uniquement la fonction ",["$","code",null,{"children":"useNavigate"}]," par un mock. On veut par exemple, garder la vrai fonction ",["$","code",null,{"children":"MemoryRouter"}]," pour ne pas la mocker."]}],"\n",["$","li",null,{"children":["Si l'on avait souhaité mocker l'ensemble du module ",["$","code",null,{"children":"react-router-dom"}],", on aurait pu simplement écrire ",["$","strong",null,{"children":["$","code",null,{"children":"vi.mock('react-router-dom', vi.fn())"}]}],". Mais nous aurions eu le problème de ne pas pouvoir utiliser ",["$","code",null,{"children":"MemoryRouter"}],"..."]}],"\n"]}],"\n",["$","p",null,{"children":["Pour info, dans le composant ",["$","code",null,{"children":"LoginPage"}],", voici comment nous utilisons ",["$","code",null,{"children":"useNavigate"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," navigate ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useNavigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"useNavigate"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"react-router-dom"}],", un hook, qui permet de naviguer vers une autre page."]}],"\n",["$","li",null,{"children":["ce hook renvoie une fonction ",["$","code",null,{"children":"navigate"}]," qui peut être appelée pour naviguer vers une autre page."]}],"\n"]}],"\n",["$","p",null,{"children":["Voici comment nous avons créé une nouvelle implémentations pour ",["$","code",null,{"children":"useNavigate"}],", afin de renvoyer notre propre mock de la fonction ",["$","code",null,{"children":"navigate"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token keyword","children":"const"}]," navigateMock ",["$","span",null,{"className":"token operator","children":"="}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line","children":["vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mocked"}],["$","span",null,{"className":"token punctuation","children":"("}],"useNavigate",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mockReturnValue"}],["$","span",null,{"className":"token punctuation","children":"("}],"navigateMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.mocked(useNavigate).mockReturnValue(navigateMock)"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"Vitest"}]," qui permet de mocker une méthode d'un module."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour mocker la méthode ",["$","code",null,{"children":"useNavigate"}]," du module ",["$","code",null,{"children":"react-router-dom"}]," et lui faire renvoyer notre mock ",["$","code",null,{"children":"navigateMock"}],". C'est en fait l'équivalent de la fonction ",["$","code",null,{"children":"navigate"}]," que nous avons utilisée dans le composant ",["$","code",null,{"children":"LoginPage"}],"."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"await waitFor(() => { ... })"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"@testing-library/react"}]," qui attend que la fonction de rappel passe un test."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour attendre que le mock ",["$","code",null,{"children":"navigateMock"}]," soit appelé avec le chemin '/'."]}],"\n"]}],"\n",["$","p",null,{"children":"Veuillez exécuter vos deux tests unitaires."}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"comment_lancer_une_exception_a_laide_dun_mock","children":" Comment lancer une exception à l'aide d'un mock ? "}]}],"\n",["$","p",null,{"children":["Si l'on reprend le composant ",["$","code",null,{"children":"LoginPage"}]," que nous souhaitons tester :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number","line":"1","children":[["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"LoginPage"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"2","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," loginUser ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"UserContextType"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useContext"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token maybe-class-name","children":"UserContext"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"4","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," navigate ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useNavigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"username",["$","span",null,{"className":"token punctuation","children":","}]," setUsername",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token punctuation","children":"["}],"password",["$","span",null,{"className":"token punctuation","children":","}]," setPassword",["$","span",null,{"className":"token punctuation","children":"]"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token function","children":"useState"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"''"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"7","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"8","children":["  ",["$","span",null,{"className":"token keyword","children":"const"}]," ",["$","span",null,{"className":"token function-variable function","children":"handleSubmit"}]," ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"e",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token maybe-class-name","children":"SyntheticEvent"}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"9","children":["    e",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"preventDefault"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"10","children":["    ",["$","span",null,{"className":"token keyword","children":"try"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"11","children":["      ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"loginUser"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}]," username",["$","span",null,{"className":"token punctuation","children":","}]," password ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"12","children":["      ",["$","span",null,{"className":"token function","children":"navigate"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'/'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"13","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token keyword","children":"catch"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],"err",["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"14","children":["      ",["$","span",null,{"className":"token console class-name","children":"console"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'LoginPage::error: '"}],["$","span",null,{"className":"token punctuation","children":","}]," err",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"15","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"17","children":[["$","span",null,{"className":"token comment","children":"//..."}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token punctuation","children":"}"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":["Nous souhaiterions tester le cas où la fonction ",["$","code",null,{"children":"loginUser"}]," lance une exception. Pour cela, nous allons mocker la fonction ",["$","code",null,{"children":"loginUser"}]," pour qu'elle lance une exception."]}],"\n",["$","p",null,{"children":["Nous allons aussi vérifier que la fonction ",["$","code",null,{"children":"console.error"}]," est appelée avec le message d'erreur. Pour ce faire, nous allons mocker ",["$","code",null,{"children":"console.error"}]," et vérifier que cette fonction est appelée avec le message d'erreur."]}],"\n",["$","p",null,{"children":["Voici le test unitaire à ajouter dans le fichier ",["$","code",null,{"children":"/src/components/pages/LoginPage.tests.tsx"}]," :"]}],"\n",["$","pre",null,{"className":"language-tsx","children":["$","code",null,{"className":"language-tsx code-highlight","children":[["$","span",null,{"className":"code-line line-number highlight-line","line":"1","children":[["$","span",null,{"className":"token function","children":"test"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'calls console.error when loginUser throws an error'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token keyword","children":"async"}]," ",["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"2","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," loginUserMock ",["$","span",null,{"className":"token operator","children":"="}]," vi\n"]}],["$","span",null,{"className":"code-line line-number","line":"3","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"4","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mockRejectedValueOnce"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token keyword","children":"new"}]," ",["$","span",null,{"className":"token class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Login failed'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"5","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," consoleErrorMock ",["$","span",null,{"className":"token operator","children":"="}]," vi\n"]}],["$","span",null,{"className":"code-line line-number","line":"6","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"spyOn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token builtin","children":"console"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token string","children":"'error'"}],["$","span",null,{"className":"token punctuation","children":")"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"7","children":["      ",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mockImplementation"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"8","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," mockContextValue ",["$","span",null,{"className":"token operator","children":"="}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"9","children":["      authenticatedUser",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token keyword","children":"undefined"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"10","children":["      registerUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"11","children":["      loginUser",["$","span",null,{"className":"token operator","children":":"}]," loginUserMock",["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"12","children":["      clearUser",["$","span",null,{"className":"token operator","children":":"}]," vi",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"fn"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"13","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"14","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"15","children":["    ",["$","span",null,{"className":"token function","children":"render"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"16","children":["      ",["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"17","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}]," ",["$","span",null,{"className":"token attr-name","children":"value"}],["$","span",null,{"className":"token script language-javascript","children":[["$","span",null,{"className":"token script-punctuation punctuation","children":"="}],["$","span",null,{"className":"token punctuation","children":"{"}],"mockContextValue",["$","span",null,{"className":"token punctuation","children":"}"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"18","children":[["$","span",null,{"className":"token plain-text","children":"          "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"<"}],["$","span",null,{"className":"token class-name","children":"LoginPage"}]]}]," ",["$","span",null,{"className":"token punctuation","children":"/>"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"19","children":[["$","span",null,{"className":"token plain-text","children":"        "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"UserContext.Provider"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token plain-text","children":"\n"}]]}],["$","span",null,{"className":"code-line line-number","line":"20","children":[["$","span",null,{"className":"token plain-text","children":"      "}],["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token tag","children":[["$","span",null,{"className":"token punctuation","children":"</"}],["$","span",null,{"className":"token class-name","children":"MemoryRouter"}]]}],["$","span",null,{"className":"token punctuation","children":">"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"21","children":["    ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"22","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"23","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," usernameInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Username'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"24","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," passwordInput ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByLabelText"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'Password'"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"25","children":["    ",["$","span",null,{"className":"token keyword","children":"const"}]," submitButton ",["$","span",null,{"className":"token operator","children":"="}]," screen",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"getByRole"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token string","children":"'button'"}],["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"26","children":["      name",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token regex","children":[["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-source language-regex","children":"s'authentifier"}],["$","span",null,{"className":"token regex-delimiter","children":"/"}],["$","span",null,{"className":"token regex-flags","children":"i"}]]}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"27","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"28","children":"\n"}],["$","span",null,{"className":"code-line line-number highlight-line","line":"29","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"usernameInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"30","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"change"}],["$","span",null,{"className":"token punctuation","children":"("}],"passwordInput",["$","span",null,{"className":"token punctuation","children":","}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," target",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}]," value",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}]," ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"31","children":["    fireEvent",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"click"}],["$","span",null,{"className":"token punctuation","children":"("}],"submitButton",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"32","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"33","children":["    ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"loginUserMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toHaveBeenCalledWith"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"34","children":["      username",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'testuser'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"35","children":["      password",["$","span",null,{"className":"token operator","children":":"}]," ",["$","span",null,{"className":"token string","children":"'password'"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"36","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"37","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"38","children":["    ",["$","span",null,{"className":"token keyword","children":"await"}]," ",["$","span",null,{"className":"token function","children":"waitFor"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}]," ",["$","span",null,{"className":"token arrow operator","children":"=>"}]," ",["$","span",null,{"className":"token punctuation","children":"{"}],"\n"]}],["$","span",null,{"className":"code-line line-number highlight-line","line":"39","children":["      ",["$","span",null,{"className":"token function","children":"expect"}],["$","span",null,{"className":"token punctuation","children":"("}],"consoleErrorMock",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"toHaveBeenCalledWith"}],["$","span",null,{"className":"token punctuation","children":"("}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"40","children":["        ",["$","span",null,{"className":"token string","children":"'LoginPage::error: '"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"41","children":["        expect",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"any"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token known-class-name class-name","children":"Error"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":","}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"42","children":["      ",["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"43","children":["    ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"44","children":"\n"}],["$","span",null,{"className":"code-line line-number","line":"45","children":["    consoleErrorMock",["$","span",null,{"className":"token punctuation","children":"."}],["$","span",null,{"className":"token method function property-access","children":"mockRestore"}],["$","span",null,{"className":"token punctuation","children":"("}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}],["$","span",null,{"className":"code-line line-number","line":"46","children":["  ",["$","span",null,{"className":"token punctuation","children":"}"}],["$","span",null,{"className":"token punctuation","children":")"}],["$","span",null,{"className":"token punctuation","children":";"}],"\n"]}]]}]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.fn().mockRejectedValueOnce(new Error('Login failed'))"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"Vitest"}]," qui crée un mock de fonction qui lance une exception."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour créer un mock de la fonction ",["$","code",null,{"children":"loginUser"}]," qui lance une exception avec le message 'Login failed'."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"vi.spyOn(console, 'error').mockImplementation(() => {})"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une fonction de ",["$","code",null,{"children":"Vitest"}]," qui crée un mock de la méthode ",["$","code",null,{"children":"console.error"}],"."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour créer un mock de la méthode ",["$","code",null,{"children":"console.error"}]," qui ne fait rien."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"expect(consoleErrorMock).toHaveBeenCalledWith('LoginPage::error: ', expect.any(Error))"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une assertion qui vérifie que la méthode ",["$","code",null,{"children":"console.error"}]," a été appelée avec le message 'LoginPage::error: ' et une instance de la classe ",["$","code",null,{"children":"Error"}],"."]}],"\n"]}],"\n",["$","p",null,{"children":[["$","strong",null,{"children":["$","code",null,{"children":"consoleErrorMock.mockRestore()"}]}]," :"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["est une méthode qui restaure la méthode ",["$","code",null,{"children":"console.error"}]," à sa valeur d'origine."]}],"\n",["$","li",null,{"children":["Elle est utilisée ici pour restaurer la méthode ",["$","code",null,{"children":"console.error"}]," après le test."]}],"\n"]}],"\n",["$","p",null,{"children":"Veuillez exécuter vos trois tests unitaires."}],"\n",["$","p",null,{"children":["Pour en savoir plus sur les tests, notamment pour éviter les redondances de code (",["$","code",null,{"children":"beforeAll"}],", ",["$","code",null,{"children":"beforeEach"}],"...), vous pouvez consulter la documentation de l'API de ",["$","code",null,{"children":"Vitest"}]," : ",["$","a",null,{"href":"https://vitest.dev/api/","children":"Vitest API"}]]}],"\n",["$","p",null,{"children":["Si nécessaire, vous pouvez trouver le code associé à ce tutorial ici : ",["$","a",null,{"href":"https://github.com/e-vinci/cae-theory-demos/tree/main/unit-tests","children":"unit-tests"}],"."]}],"\n",["$","h1",null,{"children":["$","a",null,{"id":"comment_creer_des_rapports_de_tests","children":" Comment créer des rapports de tests ? "}]}],"\n",["$","h2",null,{"children":"Génération de rapport de tests"}],"\n",["$","p",null,{"children":"Pour générer des rapports de tests, vous pouvez exécuter la commande suivante :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":[["$","span",null,{"className":"token function","children":"npm"}]," run coverage\n"]}]}]}],"\n",["$","p",null,{"children":["Cette commande génère un rapport de couverture de code dans le répertoire ",["$","code",null,{"children":"/coverage"}],". Vous pouvez ouvrir le fichier ",["$","code",null,{"children":"index.html"}]," dans votre navigateur pour visualiser le rapport de couverture de code."]}],"\n",["$","h2",null,{"children":"Visualisation des tests via une UI"}],"\n",["$","p",null,{"children":"Pour visualiser les tests via une interface utilisateur, vous pouvez exécuter la commande suivante dans le répertoire de votre projet contenant des tests unitaires :"}],"\n",["$","pre",null,{"className":"language-bash","children":["$","code",null,{"className":"language-bash code-highlight","children":["$","span",null,{"className":"code-line","children":["npx vitest ",["$","span",null,{"className":"token parameter variable","children":"--ui"}],"\n"]}]}]}]]
f:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"React Unit Tests"}]]
b:null
