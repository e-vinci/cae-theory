<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><link rel="preload" href="/cae-project/_next/static/css/54348c36b736b07a.css" as="style"/><link rel="stylesheet" href="/cae-project/_next/static/css/54348c36b736b07a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" noModule="" src="/cae-project/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/cae-project/_next/static/chunks/webpack-8abf8b8f68183f21.js" defer=""></script><script src="/cae-project/_next/static/chunks/framework-a4ddb9b21624b39b.js" defer=""></script><script src="/cae-project/_next/static/chunks/main-1647ebf2bc906b54.js" defer=""></script><script src="/cae-project/_next/static/chunks/pages/_app-67bb6dd369fbff61.js" defer=""></script><script src="/cae-project/_next/static/chunks/449-fc1234a078dae93b.js" defer=""></script><script src="/cae-project/_next/static/chunks/pages/%5B%5B...slug%5D%5D-6f3320baf1728d21.js" defer=""></script><script src="/cae-project/_next/static/envgJpGHCCHkDOEzEZQTf/_buildManifest.js" defer=""></script><script src="/cae-project/_next/static/envgJpGHCCHkDOEzEZQTf/_ssgManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><header><style data-emotion="css ljfsoa">.css-ljfsoa{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);color:#fff;}</style><style data-emotion="css w6pz14">.css-w6pz14{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);color:#fff;}</style><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic css-w6pz14" style="--Paper-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)"><style data-emotion="css awgou1">.css-awgou1{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.css-awgou1{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.css-awgou1{min-height:48px;}}}@media (min-width:600px){.css-awgou1{min-height:64px;}}</style><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular css-awgou1"><style data-emotion="css 1499ij9">.css-1499ij9{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;letter-spacing:0.0075em;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="MuiTypography-root MuiTypography-h6 css-1499ij9">CAE</div><div><a href="/cae-project"><style data-emotion="css mcfrop">.css-mcfrop{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.css-mcfrop:hover{-webkit-text-decoration:none;text-decoration:none;}.css-mcfrop.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.css-mcfrop:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.css-mcfrop.MuiButton-loading{color:transparent;}</style><style data-emotion="css o34szc">.css-o34szc{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.css-o34szc::-moz-focus-inner{border-style:none;}.css-o34szc.Mui-disabled{pointer-events:none;cursor:default;}@media print{.css-o34szc{-webkit-print-color-adjust:exact;color-adjust:exact;}}.css-o34szc:hover{-webkit-text-decoration:none;text-decoration:none;}.css-o34szc.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.css-o34szc:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.css-o34szc.MuiButton-loading{color:transparent;}</style><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-o34szc" tabindex="0" type="button" id=":R1l96:">Home</button></a></div><div><a href="/cae-project/intro"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-o34szc" tabindex="0" type="button" id=":R2l96:">Intro</button></a></div><div><a href="/cae-project/quality"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-o34szc" tabindex="0" type="button" id=":Rbl96:">Qualité</button></a></div><div><a href="/cae-project/about"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit css-o34szc" tabindex="0" type="button" id=":R4l96:">About</button></a></div></div></header></header><style data-emotion="css 9wvnva">.css-9wvnva{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:16px;padding-right:16px;}@media (min-width:600px){.css-9wvnva{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.css-9wvnva{max-width:1200px;}}</style><div class="MuiContainer-root MuiContainer-maxWidthLg css-9wvnva" style="padding:1rem;word-wrap:break-word"><style data-emotion="css kxijxt">.css-kxijxt{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;width:100%;border-radius:8px;border:1px solid;border-color:rgba(0, 0, 0, 0.12);padding:0.5rem;}</style><ul class="MuiList-root MuiList-padding css-kxijxt"><style data-emotion="css q7mezt">.css-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}</style><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="HighlightOffIcon"><path d="M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"></path></svg><style data-emotion="css wfm2y7">.css-wfm2y7{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.6);}</style><nav class="MuiTypography-root MuiTypography-body1 MuiBreadcrumbs-root css-wfm2y7" aria-label="breadcrumb"><style data-emotion="css 51eq8m">.css-51eq8m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;margin:0;list-style:none;}</style><ol class="MuiBreadcrumbs-ol css-51eq8m"><li class="MuiBreadcrumbs-li"><p><style data-emotion="css 1ttcndq">.css-1ttcndq{-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-1ttcndq:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css ub0mep">.css-ub0mep{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.css-ub0mep:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project"> CAE </a>
<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality"> Qualité </a>
<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/frontend"> Qualité du frontend</a><br/>
<a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#"> Unit Tests </a></p></li></ol></nav><style data-emotion="css ihsi0z">.css-ihsi0z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%;box-sizing:border-box;text-align:left;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;padding-top:0px;padding-bottom:0px;}</style><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#mise_en_place_des_tests_unitaires_avec_vitest"><style data-emotion="css 14rdsw0">.css-14rdsw0{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;margin-top:4px;margin-bottom:4px;}.MuiTypography-root:where(.css-14rdsw0 .MuiListItemText-primary){display:block;}.MuiTypography-root:where(.css-14rdsw0 .MuiListItemText-secondary){display:block;}</style><div class="MuiListItemText-root css-14rdsw0"><style data-emotion="css fyswvn">.css-fyswvn{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}</style><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Mise en place des tests unitaires avec Vitest </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#ou_enregistrer_les_specifications_de_test"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Où enregistrer les spécifications de test ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#comment_tester_un_composant_simple"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Comment tester un composant simple ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#comment_mocker_un_contexte"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Comment mocker un contexte ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#comment_mocker_un_use_navigate"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Comment mocker un useNavigate ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#comment_lancer_une_exception_a_laide_dun_mock"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Comment lancer une exception à l&#x27;aide d&#x27;un mock ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding css-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover css-ub0mep" href="/cae-project/quality/unit-tests#comment_creer_des_rapports_de_tests"><div class="MuiListItemText-root css-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary css-fyswvn"> Comment créer des rapports de tests ?  </span></div></a></div></ul>
<h1><a id="mise_en_place_des_tests_unitaires_avec_vitest"> Mise en place des tests unitaires avec Vitest </a></h1>
<h2>Installation des dépendances</h2>
<p>Nous allons réaliser les tests unitaires de nos applications React avec <code>Vitest</code>.</p>
<p>Pour ce tutoriel, veuillez créer un nouveau projet nommé <code>unit-tests</code> sur base d&#x27;un copier/coller du dossier <code>front</code>de votre tutoriel <code>context</code>. Si nécessaire, vous pouvez trouver le code associé au dossier <code>front</code> ici : <a href="https://github.com/e-vinci/ts-demos/tree/main/front/context/front">dossier front du tuto context</a>.</p>
<p>Pour ajouter <code>Vitest</code> à votre projet, vous pouvez exécuter la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> vitest @testing-library/react jsdom @vitest/coverage-v8
</span></code></pre>
<p><code>jsdom</code> est un environnement de test JavaScript qui simule un navigateur web. Il est utilisé par <code>Vitest</code> pour exécuter les tests unitaires.</p>
<p><code>@testing-library/react</code> est une bibliothèque de test qui fournit des utilitaires pour tester les composants React.</p>
<p><code>@vitest/coverage-v8</code> est un plugin de couverture de code pour <code>Vitest</code> qui génère des rapports de couverture de code.</p>
<p>Veuillez configurer votre application Vite pour exécuter les tests unitaires avec <code>Vitest</code>. Pour cela, vous devez modifier votre fichier <code>vite.config.ts</code> :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number highlight-line" line="1"><span class="token comment">// eslint-disable-next-line spaced-comment</span>
</span><span class="code-line line-number highlight-line" line="2"><span class="token comment">/// &lt;reference types=&quot;vitest/config&quot; /&gt;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;vite&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> react <span class="token keyword">from</span> <span class="token string">&#x27;@vitejs/plugin-react-swc&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">import</span> checker <span class="token keyword">from</span> <span class="token string">&#x27;vite-plugin-checker&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token comment">// https://vitejs.dev/config/</span>
</span><span class="code-line line-number" line="9"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="10">  test<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="11">    environment<span class="token operator">:</span> <span class="token string">&#x27;jsdom&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="12">    globals<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="13">    setupFiles<span class="token operator">:</span> <span class="token string">&#x27;./src/setupTests.ts&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="14">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line line-number" line="17">    <span class="token function">react</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="18">    <span class="token function">checker</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">      typescript<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="20">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="21">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="22">  server<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">      <span class="token string-property property">&#x27;/api&#x27;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="25">        target<span class="token operator">:</span> <span class="token string">&#x27;http://localhost:3000&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="26">        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="27">        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token anchor function">^</span><span class="token escape">\/</span>api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="28">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="29">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="30">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="31"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h2>Exécution des tests</h2>
<p>Pour écrire des tests unitaires avec <code>Vitest</code>, vous pouvez créer un fichier <code>*.test.tsx</code> à côté de votre composant ou fonction à tester.</p>
<p>Par défaut, <code>Vitest</code> recherche les fichiers contenant <strong><code>.test</code></strong> ou <strong><code>.spec</code></strong> dans le nom de fichier pour exécuter les tests.</p>
<p>Pour exécuter les tests à l&#x27;aide d&#x27;une commande, vous devez ajouter un script dans votre fichier <code>package.json</code> :</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;coverage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vitest run --coverage&quot;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>Vous pouvez exécuter les tests en utilisant la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token builtin class-name">test</span>
</span></code></pre>
<p>Pour générer un rapport de couverture de code, vous pouvez exécuter la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> run coverage
</span></code></pre>
<p>Pour exécuter les tests directement au sein de VS Code, vous pouvez installer l&#x27;extension <code>Vitest</code> : <a href="https://marketplace.visualstudio.com/items?itemName=alexjoverm.vitest">Vitest</a></p>
<h1><a id="ou_enregistrer_les_specifications_de_test"> Où enregistrer les spécifications de test ? </a></h1>
<p>Il existe trois principales approches pour enregistrer les spécifications de test :</p>
<ul>
<li><strong>Approche intégrée</strong> : Les spécifications de test sont enregistrées dans le même fichier que le composant ou la fonction à tester. Cela permet de garder les tests à proximité du code source et de les maintenir ensemble.</li>
<li><strong>Approche séparée dans répertoire du composant</strong> : Les spécifications de test sont enregistrées dans des fichiers séparés avec l&#x27;extension <code>.test.tsx</code> ou <code>.spec.tsx</code>. Cela permet de garder les tests séparés du code source, mais proche.</li>
<li><strong>Approche séparée dans un répertoire dédié</strong> : Les spécifications de test sont enregistrées dans un répertoire dédié, par exemple <code>/src/unit-tests</code>. Cela permet de garder les tests complètement séparés du code source.</li>
</ul>
<p>Chaque approche a ses avantages et ses inconvénients. Il est important de choisir celle qui convient le mieux à votre projet et à votre équipe.  Il est recommandé de garder les tests à proximité du code source pour faciliter la maintenance et la compréhension du code.</p>
<p>Pour le Projet CAE, nous vous demandons de suivre <strong>l&#x27;approche séparée dans répertoire du composant</strong>.</p>
<p>Plus d&#x27;information sur <code>Vitest</code> : <a href="https://vitest.dev/">Vitest</a></p>
<h1><a id="comment_tester_un_composant_simple"> Comment tester un composant simple ? </a></h1>
<p>Dans un premier temps, nous allons tester le composant <code>LoginPage</code> qui est un composant intelligent dont ses dépendances à la gestion de l&#x27;état sont injectées à l&#x27;aide d&#x27;un contexte.</p>
<p>Nous allons réaliser un premier simple test unitaire pour vérifier que le composant <code>LoginPage</code> affiche deux labels (&quot;Username&quot; et &quot;Password&quot;).</p>
<p>Veuillez créer un nouveau script nommé <code>/src/components/pages/LoginPage.tests.tsx</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> render<span class="token punctuation">,</span> screen <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@testing-library/react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">MemoryRouter</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> describe<span class="token punctuation">,</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;vitest&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LoginPage</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../components/pages/LoginPage&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;renders a form with username and password inputs&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>describe</code></strong> :</p>
<ul>
<li>permet de regrouper des tests liés entre eux. Ici, elle regroupe les tests pour le composant <code>LoginPage</code>.</li>
<li>&#x27;LoginPage&#x27; est le nom du groupe de tests, ce qui aide à organiser et à identifier les tests dans les rapports de test.</li>
</ul>
<p><strong><code>test</code></strong> (ou <strong><code>it</code></strong>) :</p>
<ul>
<li>est une fonction qui définit un cas de test individuel.</li>
<li>&#x27;renders a form with username and password inputs&#x27; : est une description du cas de test. Elle explique ce que le test vérifie.</li>
<li>La fonction fléchée <strong><code>() =&gt; { ... }</code></strong> contient le code du test.</li>
<li>Est un synonyme de <strong><code>it</code></strong>.</li>
</ul>
<p><strong><code>render</code></strong> :</p>
<ul>
<li>est une fonction qui rend un composant React dans un environnement de test.</li>
</ul>
<p><strong><code>&lt;MemoryRouter&gt;</code></strong> :</p>
<ul>
<li>est un composant de <code>react-router-dom</code> qui simule un environnement de routage en mémoire.</li>
<li>Il est utilisé ici pour fournir le contexte de routage nécessaire au composant LoginPage.
<strong><code>&lt;LoginPage /&gt;</code></strong> est le composant à tester.</li>
</ul>
<p><strong><code>screen</code></strong> :</p>
<ul>
<li>est un objet qui représente le DOM rendu.</li>
</ul>
<p><strong><code>getByLabelText</code></strong> :</p>
<ul>
<li>est une méthode de screen qui recherche un élément dans le DOM par son texte de label associé. Ici, il recherche un élément avec le label &#x27;Username&#x27;.</li>
</ul>
<p><strong><code>expect</code></strong> :</p>
<ul>
<li>est une fonction qui crée une assertion.</li>
</ul>
<p><strong><code>toBeTruthy</code></strong> :</p>
<ul>
<li>est une méthode d&#x27;assertion qui vérifie que la valeur est &quot;truthy&quot; (c&#x27;est-à-dire qu&#x27;elle n&#x27;est pas null, undefined, false, 0, NaN, ou une chaîne vide).</li>
<li><strong><code>expect(passwordInput).toBeTruthy();</code></strong> : cette assertion vérifie que l&#x27;élément <code>passwordInput</code> existe dans le DOM.</li>
</ul>
<p>Pour exécuter ce test unitaire, vous pouvez utiliser la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> run <span class="token builtin class-name">test</span>
</span></code></pre>
<p>Il est bien sûr possible de le faire dans VS Code avec l&#x27;extension <code>Vitest</code>, en cliquant sur le bouton &quot;Run Test&quot; à côté de la description du test.</p>
<h1><a id="comment_mocker_un_contexte"> Comment mocker un contexte ? </a></h1>
<p>Pour tester un composant qui dépend d&#x27;un contexte, vous pouvez utiliser la fonction <code>render</code> de <code>@testing-library/react</code> pour envelopper le composant dans un <code>Provider</code> qui fournit les valeurs du contexte.</p>
<p>Voici le code que nous souhaitons tester :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token function-variable function">LoginPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">UserContextType</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">const</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> setUsername<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> <span class="token punctuation">[</span>password<span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">SyntheticEvent</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="11">      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">      <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage::error: &#x27;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17"><span class="token comment">//...</span>
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span>
</span></code></pre>
<p>Nous souhaitons ici injecter un contexte <code>UserContext</code> qui contient une fonction <code>loginUser</code> et vérifier que le composant <code>LoginPage</code> appelle correctement cette fonction lors de la soumission du formulaire.</p>
<p>Voici un nouveau test unitaire à ajouter dans le fichier <code>/src/components/pages/LoginPage.tests.tsx</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number highlight-line" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> render<span class="token punctuation">,</span> screen<span class="token punctuation">,</span> fireEvent <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@testing-library/react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">MemoryRouter</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="3"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> describe<span class="token punctuation">,</span> test<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;vitest&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LoginPage</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../components/pages/LoginPage&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="5"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">UserContext</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../contexts/UserContext&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;renders a form with username and password inputs&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="10">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="11"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="12"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    <span class="token function">expect</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">    <span class="token function">expect</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number highlight-line" line="21">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;calls loginUser when the form is submitted&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="22">    <span class="token keyword">const</span> loginUserMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="23">    <span class="token keyword">const</span> mockContextValue <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="24">      authenticatedUser<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="25">      registerUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="26">      loginUser<span class="token operator">:</span> loginUserMock<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="27">      clearUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="28">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="29">
</span><span class="code-line line-number highlight-line" line="30">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line line-number highlight-line" line="31">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number highlight-line" line="32"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mockContextValue<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number highlight-line" line="33"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number highlight-line" line="34"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number highlight-line" line="35"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="36">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="37">
</span><span class="code-line line-number highlight-line" line="38">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="39">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="40">    <span class="token keyword">const</span> submitButton <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByRole</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="41">      name<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s&#x27;authentifier</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="42">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="43">
</span><span class="code-line line-number highlight-line" line="44">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="45">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="46">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span>submitButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="47">
</span><span class="code-line line-number highlight-line" line="48">    <span class="token function">expect</span><span class="token punctuation">(</span>loginUserMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="49">      username<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="50">      password<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="51">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="52">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="53"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>vi.fn()</code></strong> :</p>
<ul>
<li>est une fonction de <code>Vitest</code> qui crée un mock de fonction.</li>
<li>Elle est utilisée ici pour créer un mock de la fonction <code>loginUser</code> du contexte <code>UserContext</code>.</li>
<li>Un mock est une fonction simulée qui enregistre les appels et les arguments passés à la fonction simulée.</li>
</ul>
<p><strong><code>&lt;UserContext.Provider&gt;</code></strong> :</p>
<ul>
<li>est un composant de <code>React</code> qui injecte les valeurs du contexte aux composants enfants.</li>
</ul>
<p><strong><code>fireEvent.change</code></strong> :</p>
<ul>
<li>est une fonction de <code>@testing-library/react</code> qui simule un événement de changement sur un élément du DOM.</li>
<li>Elle est utilisée ici pour simuler la saisie de valeurs dans les champs de formulaire.</li>
</ul>
<p><strong><code>fireEvent.click</code></strong> :</p>
<ul>
<li>est une fonction de <code>@testing-library/react</code> qui simule un événement de clic sur un élément du DOM.</li>
<li>Elle est utilisée ici pour simuler le clic sur le bouton de soumission du formulaire.</li>
</ul>
<p><strong><code>expect(loginUserMock).toHaveBeenCalledWith({ ... })</code></strong> :</p>
<ul>
<li>est une assertion qui vérifie que la fonction <code>loginUserMock</code> a été appelée avec les arguments spécifiés.</li>
</ul>
<p>Pour exécuter les deux tests unitaires existants, vous pouvez utiliser la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> run <span class="token builtin class-name">test</span>
</span></code></pre>
<h1><a id="comment_mocker_un_use_navigate"> Comment mocker un useNavigate ? </a></h1>
<p>Pour tester un composant qui utilise <code>useNavigate</code> de <code>react-router-dom</code>, vous pouvez utiliser la fonction <code>vi.mock</code> pour mocker le module <code>react-router-dom</code>.</p>
<p>Si l&#x27;on reprend le composant <code>LoginPage</code> que nous souhaitons tester :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token function-variable function">LoginPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">UserContextType</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">const</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> setUsername<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> <span class="token punctuation">[</span>password<span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">SyntheticEvent</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="12">      <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage::error: &#x27;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17"><span class="token comment">//...</span>
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span>
</span></code></pre>
<p>Dans notre précédent test, nous avons déjà vérifié que la fonction <code>loginUser</code> est appelée correctement. Pour être complet dans notre deuxième test unitaire, nous allons vérifier que la fonction <code>navigate</code> est appelée avec le chemin &#x27;/&#x27; après l&#x27;appel à <code>loginUser</code>.</p>
<p>Voici le test unitaire à modifier dans le fichier <code>/src/components/pages/LoginPage.tests.tsx</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number highlight-line" line="1"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> render<span class="token punctuation">,</span> screen<span class="token punctuation">,</span> fireEvent<span class="token punctuation">,</span> waitFor <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;@testing-library/react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="2"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">MemoryRouter</span><span class="token punctuation">,</span> useNavigate <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> describe<span class="token punctuation">,</span> test<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> vi <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;vitest&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token keyword">import</span> <span class="token imports"><span class="token maybe-class-name">LoginPage</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../components/pages/LoginPage&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">UserContext</span> <span class="token punctuation">}</span></span> <span class="token keyword">from</span> <span class="token string">&#x27;../../contexts/UserContext&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number highlight-line" line="7">vi<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="8">  <span class="token keyword">const</span> actual <span class="token operator">=</span> <span class="token keyword">await</span> vi<span class="token punctuation">.</span><span class="token method function property-access">importActual</span><span class="token punctuation">(</span><span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="9">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="10">    <span class="token spread operator">...</span>actual<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="11">    useNavigate<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="12">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="13"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="16">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;renders a form with username and password inputs&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="17">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="18">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="19"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="20"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="21">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25">    <span class="token function">expect</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="26">    <span class="token function">expect</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBeTruthy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="27">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number highlight-line" line="29">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;calls loginUser and navigates to HomePage when the form is submitted&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="30">    <span class="token keyword">const</span> loginUserMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="31">    <span class="token keyword">const</span> navigateMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">    <span class="token keyword">const</span> mockContextValue <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="33">      authenticatedUser<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="34">      registerUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="35">      loginUser<span class="token operator">:</span> loginUserMock<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="36">      clearUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="37">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="38">
</span><span class="code-line line-number highlight-line" line="39">    vi<span class="token punctuation">.</span><span class="token method function property-access">mocked</span><span class="token punctuation">(</span>useNavigate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockReturnValue</span><span class="token punctuation">(</span>navigateMock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="40">
</span><span class="code-line line-number" line="41">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="42">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="43"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mockContextValue<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="44"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="45"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="46"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="47">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="48">
</span><span class="code-line line-number" line="49">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="50">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="51">    <span class="token keyword">const</span> submitButton <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByRole</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="52">      name<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s&#x27;authentifier</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="53">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="54">
</span><span class="code-line line-number" line="55">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="56">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="57">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span>submitButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="58">
</span><span class="code-line line-number" line="59">    <span class="token function">expect</span><span class="token punctuation">(</span>loginUserMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="60">      username<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="61">      password<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="62">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="63">
</span><span class="code-line line-number highlight-line" line="64">    <span class="token keyword">await</span> <span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="65">      <span class="token function">expect</span><span class="token punctuation">(</span>navigateMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="66">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="67">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="68"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Voici comment nous avons mocké <code>useNavigate</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line">vi<span class="token punctuation">.</span><span class="token method function property-access">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> actual <span class="token operator">=</span> <span class="token keyword">await</span> vi<span class="token punctuation">.</span><span class="token method function property-access">importActual</span><span class="token punctuation">(</span><span class="token string">&#x27;react-router-dom&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token spread operator">...</span>actual<span class="token punctuation">,</span>
</span><span class="code-line">    useNavigate<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>vi.mock</code></strong> :</p>
<ul>
<li>est une fonction de <code>Vitest</code> qui permet de mocker un module.</li>
<li>Elle est utilisée ici pour mocker le module <code>react-router-dom</code> et remplacer la fonction <code>useNavigate</code> par un mock.</li>
<li><strong><code>vi.importActual</code></strong> est une fonction qui permet d&#x27;importer le module réel pour le mocker.</li>
<li>On récupère ici le module <code>react-router-dom</code> et on remplace uniquement la fonction <code>useNavigate</code> par un mock. On veut par exemple, garder la vrai fonction <code>MemoryRouter</code> pour ne pas la mocker.</li>
<li>Si l&#x27;on avait souhaité mocker l&#x27;ensemble du module <code>react-router-dom</code>, on aurait pu simplement écrire <strong><code>vi.mock(&#x27;react-router-dom&#x27;, vi.fn())</code></strong>. Mais nous aurions eu le problème de ne pas pouvoir utiliser <code>MemoryRouter</code>...  ?</li>
</ul>
<p>Pour info, dans le composant <code>LoginPage</code>, voici comment nous utilisons <code>useNavigate</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>useNavigate</code></strong> :</p>
<ul>
<li>est une fonction de <code>react-router-dom</code>, un hook, qui permet de naviguer vers une autre page.</li>
<li>ce hook renvoie une fonction <code>navigate</code> qui peut être appelée pour naviguer vers une autre page.</li>
</ul>
<p>Voici comment nous avons créé une nouvelle implémentations pour <code>useNavigate</code>, afin de renvoyer notre propre mock de la fonction <code>navigate</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> navigateMock <span class="token operator">=</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token comment">//...</span>
</span><span class="code-line">vi<span class="token punctuation">.</span><span class="token method function property-access">mocked</span><span class="token punctuation">(</span>useNavigate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">mockReturnValue</span><span class="token punctuation">(</span>navigateMock<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>vi.mocked(useNavigate).mockReturnValue(navigateMock)</code></strong> :</p>
<ul>
<li>est une fonction de <code>Vitest</code> qui permet de mocker une méthode d&#x27;un module.</li>
<li>Elle est utilisée ici pour mocker la méthode <code>useNavigate</code> du module <code>react-router-dom</code> et lui faire renvoyer notre mock <code>navigateMock</code>. C&#x27;est en fait l&#x27;équivalent de la fonction <code>navigate</code> que nous avons utilisée dans le composant <code>LoginPage</code>.</li>
</ul>
<p><strong><code>await waitFor(() =&gt; { ... })</code></strong> :</p>
<ul>
<li>est une fonction de <code>@testing-library/react</code> qui attend que la fonction de rappel passe un test.</li>
<li>Elle est utilisée ici pour attendre que le mock <code>navigateMock</code> soit appelé avec le chemin &#x27;/&#x27;.</li>
</ul>
<p>Veuillez exécuter vos deux tests unitaires.</p>
<h1><a id="comment_lancer_une_exception_a_laide_dun_mock"> Comment lancer une exception à l&#x27;aide d&#x27;un mock ? </a></h1>
<p>Si l&#x27;on reprend le composant <code>LoginPage</code> que nous souhaitons tester :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> <span class="token function-variable function">LoginPage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token keyword">const</span> <span class="token punctuation">{</span> loginUser <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">UserContextType</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">UserContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">  <span class="token keyword">const</span> <span class="token punctuation">[</span>username<span class="token punctuation">,</span> setUsername<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token keyword">const</span> <span class="token punctuation">[</span>password<span class="token punctuation">,</span> setPassword<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">  <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">SyntheticEvent</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="11">      <span class="token keyword">await</span> <span class="token function">loginUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">      <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="13">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="14">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;LoginPage::error: &#x27;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="15">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17"><span class="token comment">//...</span>
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span>
</span></code></pre>
<p>Nous souhaiterions tester le cas où la fonction <code>loginUser</code> lance une exception. Pour cela, nous allons mocker la fonction <code>loginUser</code> pour qu&#x27;elle lance une exception.</p>
<p>Nous allons aussi vérifier que la fonction <code>console.error</code> est appelée avec le message d&#x27;erreur. Pour ce faire, nous allons mocker <code>console.error</code> et vérifier que cette fonction est appelée avec le message d&#x27;erreur.</p>
<p>Voici le test unitaire à ajouter dans le fichier <code>/src/components/pages/LoginPage.tests.tsx</code> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line line-number highlight-line" line="1"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;calls console.error when loginUser throws an error&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="2">    <span class="token keyword">const</span> loginUserMock <span class="token operator">=</span> vi
</span><span class="code-line line-number" line="3">      <span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">      <span class="token punctuation">.</span><span class="token method function property-access">mockRejectedValueOnce</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;Login failed&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">const</span> consoleErrorMock <span class="token operator">=</span> vi
</span><span class="code-line line-number" line="6">      <span class="token punctuation">.</span><span class="token method function property-access">spyOn</span><span class="token punctuation">(</span><span class="token builtin">console</span><span class="token punctuation">,</span> <span class="token string">&#x27;error&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line line-number highlight-line" line="7">      <span class="token punctuation">.</span><span class="token method function property-access">mockImplementation</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="8">    <span class="token keyword">const</span> mockContextValue <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="9">      authenticatedUser<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="10">      registerUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="11">      loginUser<span class="token operator">:</span> loginUserMock<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="12">      clearUser<span class="token operator">:</span> vi<span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="13">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="16">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="17"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>mockContextValue<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="18"><span class="token plain-text">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LoginPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="19"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Provider</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line line-number" line="20"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MemoryRouter</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="21">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">    <span class="token keyword">const</span> usernameInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Username&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">    <span class="token keyword">const</span> passwordInput <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByLabelText</span><span class="token punctuation">(</span><span class="token string">&#x27;Password&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">    <span class="token keyword">const</span> submitButton <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token method function property-access">getByRole</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">      name<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s&#x27;authentifier</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="27">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number highlight-line" line="29">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>usernameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">change</span><span class="token punctuation">(</span>passwordInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="31">    fireEvent<span class="token punctuation">.</span><span class="token method function property-access">click</span><span class="token punctuation">(</span>submitButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">
</span><span class="code-line line-number" line="33">    <span class="token function">expect</span><span class="token punctuation">(</span>loginUserMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="34">      username<span class="token operator">:</span> <span class="token string">&#x27;testuser&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="35">      password<span class="token operator">:</span> <span class="token string">&#x27;password&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="36">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="37">
</span><span class="code-line line-number" line="38">    <span class="token keyword">await</span> <span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="39">      <span class="token function">expect</span><span class="token punctuation">(</span>consoleErrorMock<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toHaveBeenCalledWith</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="40">        <span class="token string">&#x27;LoginPage::error: &#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="41">        expect<span class="token punctuation">.</span><span class="token method function property-access">any</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Error</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="42">      <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="43">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44">
</span><span class="code-line line-number" line="45">    consoleErrorMock<span class="token punctuation">.</span><span class="token method function property-access">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="46">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>vi.fn().mockRejectedValueOnce(new Error(&#x27;Login failed&#x27;))</code></strong> :</p>
<ul>
<li>est une fonction de <code>Vitest</code> qui crée un mock de fonction qui lance une exception.</li>
<li>Elle est utilisée ici pour créer un mock de la fonction <code>loginUser</code> qui lance une exception avec le message &#x27;Login failed&#x27;.</li>
</ul>
<p><strong><code>vi.spyOn(console, &#x27;error&#x27;).mockImplementation(() =&gt; {})</code></strong> :</p>
<ul>
<li>est une fonction de <code>Vitest</code> qui crée un mock de la méthode <code>console.error</code>.</li>
<li>Elle est utilisée ici pour créer un mock de la méthode <code>console.error</code> qui ne fait rien.</li>
</ul>
<p><strong><code>expect(consoleErrorMock).toHaveBeenCalledWith(&#x27;LoginPage::error: &#x27;, expect.any(Error))</code></strong> :</p>
<ul>
<li>est une assertion qui vérifie que la méthode <code>console.error</code> a été appelée avec le message &#x27;LoginPage::error: &#x27; et une instance de la classe <code>Error</code>.</li>
</ul>
<p><strong><code>consoleErrorMock.mockRestore()</code></strong> :</p>
<ul>
<li>est une méthode qui restaure la méthode <code>console.error</code> à sa valeur d&#x27;origine.</li>
<li>Elle est utilisée ici pour restaurer la méthode <code>console.error</code> après le test.</li>
</ul>
<p>Veuillez exécuter vos trois tests unitaires.</p>
<p>Pour en savoir plus sur les tests, notamment pour éviter les redondances de code (<code>beforeAll</code>, <code>beforeEach</code>...), vous pouvez consulter la documentation de l&#x27;API de <code>Vitest</code> : <a href="https://vitest.dev/api/">Vitest API</a></p>
<p>Si nécessaire, vous pouvez trouver le code associé à ce tutorial ici : <a href="https://github.com/e-vinci/ts-demos/tree/main/front/unit-tests">unit-tests</a>.</p>
<h1><a id="comment_creer_des_rapports_de_tests"> Comment créer des rapports de tests ? </a></h1>
<h2>Génération de rapport de tests</h2>
<p>Pour générer des rapports de tests, vous pouvez exécuter la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> run coverage
</span></code></pre>
<p>Cette commande génère un rapport de couverture de code dans le répertoire <code>/coverage</code>. Vous pouvez ouvrir le fichier <code>index.html</code> dans votre navigateur pour visualiser le rapport de couverture de code.</p>
<h2>Visualisation des tests via une UI</h2>
<p>Pour visualiser les tests via une interface utilisateur, vous pouvez exécuter la commande suivante dans le répertoire de votre projet contenant des tests unitaires :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">npx vitest <span class="token parameter variable">--ui</span>
</span></code></pre></div><div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"React Unit Tests","description":"Tests unitaires avec React","body":{"raw":"\n\u003cInternalPageMenu\u003e\n  \u003cPathViewer\u003e\n   \u003cPathViewerItem to=\"/\"\u003e CAE \u003c/PathViewerItem\u003e\n    \u003cPathViewerItem to=\"/quality\"\u003e Qualité \u003c/PathViewerItem\u003e\n     \u003cPathViewerItem to=\"/quality/frontend\"\u003e Qualité du frontend\u003c/PathViewerItem\u003e    \n    \u003cPathViewerItem selected\u003e Unit Tests \u003c/PathViewerItem\u003e\n  \u003c/PathViewer\u003e\n  \u003cInternalPageMenuItem\u003e Mise en place des tests unitaires avec Vitest \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Où enregistrer les spécifications de test ? \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Comment tester un composant simple ? \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Comment mocker un contexte ? \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Comment mocker un useNavigate ? \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Comment lancer une exception à l'aide d'un mock ? \u003c/InternalPageMenuItem\u003e\n  \u003cInternalPageMenuItem\u003e Comment créer des rapports de tests ?  \u003c/InternalPageMenuItem\u003e\n\u003c/InternalPageMenu\u003e\n\n\n# \u003cInternalPageTitle\u003e Mise en place des tests unitaires avec Vitest \u003c/InternalPageTitle\u003e\n\n## Installation des dépendances\nNous allons réaliser les tests unitaires de nos applications React avec `Vitest`.\n\nPour ce tutoriel, veuillez créer un nouveau projet nommé `unit-tests` sur base d'un copier/coller du dossier `front`de votre tutoriel `context`. Si nécessaire, vous pouvez trouver le code associé au dossier `front` ici : [dossier front du tuto context](https://github.com/e-vinci/ts-demos/tree/main/front/context/front).\n\nPour ajouter `Vitest` à votre projet, vous pouvez exécuter la commande suivante :\n\n```bash\nnpm install -D vitest @testing-library/react jsdom @vitest/coverage-v8\n```\n\n`jsdom` est un environnement de test JavaScript qui simule un navigateur web. Il est utilisé par `Vitest` pour exécuter les tests unitaires.\n\n`@testing-library/react` est une bibliothèque de test qui fournit des utilitaires pour tester les composants React.\n\n`@vitest/coverage-v8` est un plugin de couverture de code pour `Vitest` qui génère des rapports de couverture de code.\n\nVeuillez configurer votre application Vite pour exécuter les tests unitaires avec `Vitest`. Pour cela, vous devez modifier votre fichier `vite.config.ts` :\n\n```ts {1-2,10-14} showLineNumbers\n// eslint-disable-next-line spaced-comment\n/// \u003creference types=\"vitest/config\" /\u003e\n\nimport { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react-swc';\nimport checker from 'vite-plugin-checker';\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  test: {\n    environment: 'jsdom',\n    globals: true,\n    setupFiles: './src/setupTests.ts',\n  },\n\n  plugins: [\n    react(),\n    checker({\n      typescript: true,\n    }),\n  ],\n  server: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:3000',\n        changeOrigin: true,\n        rewrite: (path) =\u003e path.replace(/^\\/api/, ''),\n      },\n    },\n  },\n});\n```\n\n## Exécution des tests\n\nPour écrire des tests unitaires avec `Vitest`, vous pouvez créer un fichier `*.test.tsx` à côté de votre composant ou fonction à tester.\n\nPar défaut, `Vitest` recherche les fichiers contenant **`.test`** ou **`.spec`** dans le nom de fichier pour exécuter les tests.\n\nPour exécuter les tests à l'aide d'une commande, vous devez ajouter un script dans votre fichier `package.json` :\n\n```json\n{\n  \"scripts\": {\n    \"test\": \"vitest\",\n    \"coverage\": \"vitest run --coverage\"\n  }\n}\n```\n\nVous pouvez exécuter les tests en utilisant la commande suivante :\n\n```bash\nnpm test\n```\n\nPour générer un rapport de couverture de code, vous pouvez exécuter la commande suivante :\n\n```bash\nnpm run coverage\n```\n\nPour exécuter les tests directement au sein de VS Code, vous pouvez installer l'extension `Vitest` : [Vitest](https://marketplace.visualstudio.com/items?itemName=alexjoverm.vitest)\n\n# \u003cInternalPageTitle\u003e Où enregistrer les spécifications de test ? \u003c/InternalPageTitle\u003e\n\nIl existe trois principales approches pour enregistrer les spécifications de test :\n- **Approche intégrée** : Les spécifications de test sont enregistrées dans le même fichier que le composant ou la fonction à tester. Cela permet de garder les tests à proximité du code source et de les maintenir ensemble.\n- **Approche séparée dans répertoire du composant** : Les spécifications de test sont enregistrées dans des fichiers séparés avec l'extension `.test.tsx` ou `.spec.tsx`. Cela permet de garder les tests séparés du code source, mais proche. \n- **Approche séparée dans un répertoire dédié** : Les spécifications de test sont enregistrées dans un répertoire dédié, par exemple `/src/unit-tests`. Cela permet de garder les tests complètement séparés du code source.\n\nChaque approche a ses avantages et ses inconvénients. Il est important de choisir celle qui convient le mieux à votre projet et à votre équipe.  Il est recommandé de garder les tests à proximité du code source pour faciliter la maintenance et la compréhension du code. \n\nPour le Projet CAE, nous vous demandons de suivre **l'approche séparée dans répertoire du composant**.\n\n\nPlus d'information sur `Vitest` : [Vitest](https://vitest.dev/)\n\n\n# \u003cInternalPageTitle\u003e Comment tester un composant simple ? \u003c/InternalPageTitle\u003e\n\nDans un premier temps, nous allons tester le composant `LoginPage` qui est un composant intelligent dont ses dépendances à la gestion de l'état sont injectées à l'aide d'un contexte.\n\nNous allons réaliser un premier simple test unitaire pour vérifier que le composant `LoginPage` affiche deux labels (\"Username\" et \"Password\").\n\nVeuillez créer un nouveau script nommé `/src/components/pages/LoginPage.tests.tsx` :\n\n```tsx\nimport { render, screen } from '@testing-library/react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { describe, test, expect } from 'vitest';\nimport LoginPage from '../../components/pages/LoginPage';\n\ndescribe('LoginPage', () =\u003e {\n  test('renders a form with username and password inputs', () =\u003e {\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cLoginPage /\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n\n    expect(usernameInput).toBeTruthy();\n    expect(passwordInput).toBeTruthy();\n  });\n});\n```\n\n\n**`describe`** : \n- permet de regrouper des tests liés entre eux. Ici, elle regroupe les tests pour le composant `LoginPage`.\n- 'LoginPage' est le nom du groupe de tests, ce qui aide à organiser et à identifier les tests dans les rapports de test.\n\n**`test`** (ou **`it`**) : \n- est une fonction qui définit un cas de test individuel.\n- 'renders a form with username and password inputs' : est une description du cas de test. Elle explique ce que le test vérifie.\n- La fonction fléchée **`() =\u003e { ... }`** contient le code du test.\n- Est un synonyme de **`it`**.\n\n\n**`render`** :\n- est une fonction qui rend un composant React dans un environnement de test.\n\n**`\u003cMemoryRouter\u003e`** : \n- est un composant de `react-router-dom` qui simule un environnement de routage en mémoire.\n- Il est utilisé ici pour fournir le contexte de routage nécessaire au composant LoginPage.\n**`\u003cLoginPage /\u003e`** est le composant à tester.\n\n**`screen`** :\n- est un objet qui représente le DOM rendu.\n\n**`getByLabelText`** :\n- est une méthode de screen qui recherche un élément dans le DOM par son texte de label associé. Ici, il recherche un élément avec le label 'Username'.\n\n**`expect`** :\n- est une fonction qui crée une assertion.\n\n**`toBeTruthy`** :\n- est une méthode d'assertion qui vérifie que la valeur est \"truthy\" (c'est-à-dire qu'elle n'est pas null, undefined, false, 0, NaN, ou une chaîne vide).\n- **`expect(passwordInput).toBeTruthy();`** : cette assertion vérifie que l'élément `passwordInput` existe dans le DOM.\n\nPour exécuter ce test unitaire, vous pouvez utiliser la commande suivante :\n\n```bash\nnpm run test\n```\n\nIl est bien sûr possible de le faire dans VS Code avec l'extension `Vitest`, en cliquant sur le bouton \"Run Test\" à côté de la description du test.\n\n\n# \u003cInternalPageTitle\u003e Comment mocker un contexte ? \u003c/InternalPageTitle\u003e\n\nPour tester un composant qui dépend d'un contexte, vous pouvez utiliser la fonction `render` de `@testing-library/react` pour envelopper le composant dans un `Provider` qui fournit les valeurs du contexte.\n\nVoici le code que nous souhaitons tester :\n```tsx {11} showLineNumbers\nconst LoginPage = () =\u003e {\n  const { loginUser }: UserContextType = useContext(UserContext);\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = async (e: SyntheticEvent) =\u003e {\n    e.preventDefault();\n    try {\n      await loginUser({ username, password });\n      navigate('/');\n    } catch (err) {\n      console.error('LoginPage::error: ', err);\n    }\n  };\n//...\n}\n```\n\nNous souhaitons ici injecter un contexte `UserContext` qui contient une fonction `loginUser` et vérifier que le composant `LoginPage` appelle correctement cette fonction lors de la soumission du formulaire.\n\nVoici un nouveau test unitaire à ajouter dans le fichier `/src/components/pages/LoginPage.tests.tsx` :\n\n```tsx {1,3,5,21-52} showLineNumbers\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport { MemoryRouter } from 'react-router-dom';\nimport { describe, test, expect, vi } from 'vitest';\nimport LoginPage from '../../components/pages/LoginPage';\nimport { UserContext } from '../../contexts/UserContext';\n\ndescribe('LoginPage', () =\u003e {\n  test('renders a form with username and password inputs', () =\u003e {\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cLoginPage /\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n\n    expect(usernameInput).toBeTruthy();\n    expect(passwordInput).toBeTruthy();\n  });\n\n  test('calls loginUser when the form is submitted', async () =\u003e {\n    const loginUserMock = vi.fn();\n    const mockContextValue = {\n      authenticatedUser: undefined,\n      registerUser: vi.fn(),\n      loginUser: loginUserMock,\n      clearUser: vi.fn(),\n    };\n\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cUserContext.Provider value={mockContextValue}\u003e\n          \u003cLoginPage /\u003e\n        \u003c/UserContext.Provider\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n    const submitButton = screen.getByRole('button', {\n      name: /s'authentifier/i,\n    });\n\n    fireEvent.change(usernameInput, { target: { value: 'testuser' } });\n    fireEvent.change(passwordInput, { target: { value: 'password' } });\n    fireEvent.click(submitButton);\n\n    expect(loginUserMock).toHaveBeenCalledWith({\n      username: 'testuser',\n      password: 'password',\n    });\n  });\n});\n```\n\n**`vi.fn()`** :  \n- est une fonction de `Vitest` qui crée un mock de fonction. \n- Elle est utilisée ici pour créer un mock de la fonction `loginUser` du contexte `UserContext`.\n- Un mock est une fonction simulée qui enregistre les appels et les arguments passés à la fonction simulée.\n\n**`\u003cUserContext.Provider\u003e`** :\n- est un composant de `React` qui injecte les valeurs du contexte aux composants enfants.\n\n**`fireEvent.change`** :\n- est une fonction de `@testing-library/react` qui simule un événement de changement sur un élément du DOM.\n- Elle est utilisée ici pour simuler la saisie de valeurs dans les champs de formulaire.\n\n**`fireEvent.click`** :\n- est une fonction de `@testing-library/react` qui simule un événement de clic sur un élément du DOM.\n- Elle est utilisée ici pour simuler le clic sur le bouton de soumission du formulaire.\n\n**`expect(loginUserMock).toHaveBeenCalledWith({ ... })`** :\n- est une assertion qui vérifie que la fonction `loginUserMock` a été appelée avec les arguments spécifiés.\n\nPour exécuter les deux tests unitaires existants, vous pouvez utiliser la commande suivante :\n\n```bash\nnpm run test\n```\n\n# \u003cInternalPageTitle\u003e Comment mocker un useNavigate ? \u003c/InternalPageTitle\u003e\n\nPour tester un composant qui utilise `useNavigate` de `react-router-dom`, vous pouvez utiliser la fonction `vi.mock` pour mocker le module `react-router-dom`.\n\nSi l'on reprend le composant `LoginPage` que nous souhaitons tester :\n```tsx {12} showLineNumbers\nconst LoginPage = () =\u003e {\n  const { loginUser }: UserContextType = useContext(UserContext);\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = async (e: SyntheticEvent) =\u003e {\n    e.preventDefault();\n    try {\n      await loginUser({ username, password });\n      navigate('/');\n    } catch (err) {\n      console.error('LoginPage::error: ', err);\n    }\n  };\n//...\n}\n```\n\nDans notre précédent test, nous avons déjà vérifié que la fonction `loginUser` est appelée correctement. Pour être complet dans notre deuxième test unitaire, nous allons vérifier que la fonction `navigate` est appelée avec le chemin '/' après l'appel à `loginUser`.\n\nVoici le test unitaire à modifier dans le fichier `/src/components/pages/LoginPage.tests.tsx` :\n\n```tsx {1,2,7-13,29,31,39,64-66} showLineNumbers\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { MemoryRouter, useNavigate } from 'react-router-dom';\nimport { describe, test, expect, vi } from 'vitest';\nimport LoginPage from '../../components/pages/LoginPage';\nimport { UserContext } from '../../contexts/UserContext';\n\nvi.mock('react-router-dom', async () =\u003e {\n  const actual = await vi.importActual('react-router-dom');\n  return {\n    ...actual,\n    useNavigate: vi.fn(),\n  };\n});\n\ndescribe('LoginPage', () =\u003e {\n  test('renders a form with username and password inputs', () =\u003e {\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cLoginPage /\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n\n    expect(usernameInput).toBeTruthy();\n    expect(passwordInput).toBeTruthy();\n  });\n\n  test('calls loginUser and navigates to HomePage when the form is submitted', async () =\u003e {\n    const loginUserMock = vi.fn();\n    const navigateMock = vi.fn();\n    const mockContextValue = {\n      authenticatedUser: undefined,\n      registerUser: vi.fn(),\n      loginUser: loginUserMock,\n      clearUser: vi.fn(),\n    };\n\n    vi.mocked(useNavigate).mockReturnValue(navigateMock);\n\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cUserContext.Provider value={mockContextValue}\u003e\n          \u003cLoginPage /\u003e\n        \u003c/UserContext.Provider\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n    const submitButton = screen.getByRole('button', {\n      name: /s'authentifier/i,\n    });\n\n    fireEvent.change(usernameInput, { target: { value: 'testuser' } });\n    fireEvent.change(passwordInput, { target: { value: 'password' } });\n    fireEvent.click(submitButton);\n\n    expect(loginUserMock).toHaveBeenCalledWith({\n      username: 'testuser',\n      password: 'password',\n    });\n\n    await waitFor(() =\u003e {\n      expect(navigateMock).toHaveBeenCalledWith('/');\n    });\n  });\n});\n  ```\n\nVoici comment nous avons mocké `useNavigate` :\n```tsx\nvi.mock('react-router-dom', async () =\u003e {\n  const actual = await vi.importActual('react-router-dom');\n  return {\n    ...actual,\n    useNavigate: vi.fn(),\n  };\n});\n```\n\n**`vi.mock`** : \n- est une fonction de `Vitest` qui permet de mocker un module.\n- Elle est utilisée ici pour mocker le module `react-router-dom` et remplacer la fonction `useNavigate` par un mock.\n- **`vi.importActual`** est une fonction qui permet d'importer le module réel pour le mocker. \n- On récupère ici le module `react-router-dom` et on remplace uniquement la fonction `useNavigate` par un mock. On veut par exemple, garder la vrai fonction `MemoryRouter` pour ne pas la mocker.\n- Si l'on avait souhaité mocker l'ensemble du module `react-router-dom`, on aurait pu simplement écrire **`vi.mock('react-router-dom', vi.fn())`**. Mais nous aurions eu le problème de ne pas pouvoir utiliser `MemoryRouter`...  ?   \n\nPour info, dans le composant `LoginPage`, voici comment nous utilisons `useNavigate` :\n```tsx\nconst navigate = useNavigate();\n```\n\n**`useNavigate`** :\n- est une fonction de `react-router-dom`, un hook, qui permet de naviguer vers une autre page.\n- ce hook renvoie une fonction `navigate` qui peut être appelée pour naviguer vers une autre page.\n\nVoici comment nous avons créé une nouvelle implémentations pour `useNavigate`, afin de renvoyer notre propre mock de la fonction `navigate` :\n```tsx\nconst navigateMock = vi.fn();\n//...\nvi.mocked(useNavigate).mockReturnValue(navigateMock);\n```\n\n**`vi.mocked(useNavigate).mockReturnValue(navigateMock)`** :\n- est une fonction de `Vitest` qui permet de mocker une méthode d'un module.\n- Elle est utilisée ici pour mocker la méthode `useNavigate` du module `react-router-dom` et lui faire renvoyer notre mock `navigateMock`. C'est en fait l'équivalent de la fonction `navigate` que nous avons utilisée dans le composant `LoginPage`.\n\n**`await waitFor(() =\u003e { ... })`** :\n- est une fonction de `@testing-library/react` qui attend que la fonction de rappel passe un test.\n- Elle est utilisée ici pour attendre que le mock `navigateMock` soit appelé avec le chemin '/'.\n\nVeuillez exécuter vos deux tests unitaires.\n\n# \u003cInternalPageTitle\u003e Comment lancer une exception à l'aide d'un mock ? \u003c/InternalPageTitle\u003e\n\nSi l'on reprend le composant `LoginPage` que nous souhaitons tester :\n```tsx {11,13-15} showLineNumbers\nconst LoginPage = () =\u003e {\n  const { loginUser }: UserContextType = useContext(UserContext);\n\n  const navigate = useNavigate();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const handleSubmit = async (e: SyntheticEvent) =\u003e {\n    e.preventDefault();\n    try {\n      await loginUser({ username, password });\n      navigate('/');\n    } catch (err) {\n      console.error('LoginPage::error: ', err);\n    }\n  };\n//...\n}\n```\n\nNous souhaiterions tester le cas où la fonction `loginUser` lance une exception. Pour cela, nous allons mocker la fonction `loginUser` pour qu'elle lance une exception.\n\nNous allons aussi vérifier que la fonction `console.error` est appelée avec le message d'erreur. Pour ce faire, nous allons mocker `console.error` et vérifier que cette fonction est appelée avec le message d'erreur.\n\nVoici le test unitaire à ajouter dans le fichier `/src/components/pages/LoginPage.tests.tsx` :\n\n```tsx {1,2,7-13,29,31,39,64-66} showLineNumbers\ntest('calls console.error when loginUser throws an error', async () =\u003e {\n    const loginUserMock = vi\n      .fn()\n      .mockRejectedValueOnce(new Error('Login failed'));\n    const consoleErrorMock = vi\n      .spyOn(console, 'error')\n      .mockImplementation(() =\u003e {});\n    const mockContextValue = {\n      authenticatedUser: undefined,\n      registerUser: vi.fn(),\n      loginUser: loginUserMock,\n      clearUser: vi.fn(),\n    };\n\n    render(\n      \u003cMemoryRouter\u003e\n        \u003cUserContext.Provider value={mockContextValue}\u003e\n          \u003cLoginPage /\u003e\n        \u003c/UserContext.Provider\u003e\n      \u003c/MemoryRouter\u003e,\n    );\n\n    const usernameInput = screen.getByLabelText('Username');\n    const passwordInput = screen.getByLabelText('Password');\n    const submitButton = screen.getByRole('button', {\n      name: /s'authentifier/i,\n    });\n\n    fireEvent.change(usernameInput, { target: { value: 'testuser' } });\n    fireEvent.change(passwordInput, { target: { value: 'password' } });\n    fireEvent.click(submitButton);\n\n    expect(loginUserMock).toHaveBeenCalledWith({\n      username: 'testuser',\n      password: 'password',\n    });\n\n    await waitFor(() =\u003e {\n      expect(consoleErrorMock).toHaveBeenCalledWith(\n        'LoginPage::error: ',\n        expect.any(Error),\n      );\n    });\n\n    consoleErrorMock.mockRestore();\n  });\n```\n\n**`vi.fn().mockRejectedValueOnce(new Error('Login failed'))`** :\n- est une fonction de `Vitest` qui crée un mock de fonction qui lance une exception.\n- Elle est utilisée ici pour créer un mock de la fonction `loginUser` qui lance une exception avec le message 'Login failed'.\n\n**`vi.spyOn(console, 'error').mockImplementation(() =\u003e {})`** :\n- est une fonction de `Vitest` qui crée un mock de la méthode `console.error`.\n- Elle est utilisée ici pour créer un mock de la méthode `console.error` qui ne fait rien.\n\n**`expect(consoleErrorMock).toHaveBeenCalledWith('LoginPage::error: ', expect.any(Error))`** :\n- est une assertion qui vérifie que la méthode `console.error` a été appelée avec le message 'LoginPage::error: ' et une instance de la classe `Error`.\n\n**`consoleErrorMock.mockRestore()`** :\n- est une méthode qui restaure la méthode `console.error` à sa valeur d'origine.\n- Elle est utilisée ici pour restaurer la méthode `console.error` après le test.\n\nVeuillez exécuter vos trois tests unitaires.\n\nPour en savoir plus sur les tests, notamment pour éviter les redondances de code (`beforeAll`, `beforeEach`...), vous pouvez consulter la documentation de l'API de `Vitest` : [Vitest API](https://vitest.dev/api/)\n\nSi nécessaire, vous pouvez trouver le code associé à ce tutorial ici : [unit-tests](https://github.com/e-vinci/ts-demos/tree/main/front/unit-tests).\n\n# \u003cInternalPageTitle\u003e Comment créer des rapports de tests ? \u003c/InternalPageTitle\u003e\n\n## Génération de rapport de tests\n\nPour générer des rapports de tests, vous pouvez exécuter la commande suivante :\n\n```bash\nnpm run coverage\n```\n\nCette commande génère un rapport de couverture de code dans le répertoire `/coverage`. Vous pouvez ouvrir le fichier `index.html` dans votre navigateur pour visualiser le rapport de couverture de code.\n\n## Visualisation des tests via une UI\n\nPour visualiser les tests via une interface utilisateur, vous pouvez exécuter la commande suivante dans le répertoire de votre projet contenant des tests unitaires :\n\n```bash\nnpx vitest --ui\n```\n\n","code":"var Component=(()=\u003e{var N=Object.create;var o=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var v=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=\u003e{for(var c in e)o(a,c,{get:e[c],enumerable:!0})},p=(a,e,c,l)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!f.call(a,s)\u0026\u0026s!==c\u0026\u0026o(a,s,{get:()=\u003ee[s],enumerable:!(l=k(e,s))||l.enumerable});return a};var x=(a,e,c)=\u003e(c=a!=null?N(b(a)):{},p(e||!a||!a.__esModule?o(c,\"default\",{value:a,enumerable:!0}):c,a)),w=a=\u003ep(o({},\"__esModule\",{value:!0}),a);var u=v((L,d)=\u003e{d.exports=_jsx_runtime});var U={};y(U,{default:()=\u003eh,frontmatter:()=\u003eP});var n=x(u()),P={title:\"React Unit Tests\",description:\"Tests unitaires avec React\"};function m(a){let e={a:\"a\",br:\"br\",code:\"code\",h1:\"h1\",h2:\"h2\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components},{InternalPageMenu:c,InternalPageMenuItem:l,InternalPageTitle:s,PathViewer:r,PathViewerItem:t}=e;return c||i(\"InternalPageMenu\",!0),l||i(\"InternalPageMenuItem\",!0),s||i(\"InternalPageTitle\",!0),r||i(\"PathViewer\",!0),t||i(\"PathViewerItem\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c,{children:[(0,n.jsx)(r,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(t,{to:\"/\",children:\" CAE \"}),`\n`,(0,n.jsx)(t,{to:\"/quality\",children:\" Qualit\\xE9 \"}),`\n`,(0,n.jsx)(t,{to:\"/quality/frontend\",children:\" Qualit\\xE9 du frontend\"}),(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(t,{selected:!0,children:\" Unit Tests \"})]})}),(0,n.jsx)(l,{children:\" Mise en place des tests unitaires avec Vitest \"}),(0,n.jsx)(l,{children:\" O\\xF9 enregistrer les sp\\xE9cifications de test ? \"}),(0,n.jsx)(l,{children:\" Comment tester un composant simple ? \"}),(0,n.jsx)(l,{children:\" Comment mocker un contexte ? \"}),(0,n.jsx)(l,{children:\" Comment mocker un useNavigate ? \"}),(0,n.jsx)(l,{children:\" Comment lancer une exception \\xE0 l'aide d'un mock ? \"}),(0,n.jsx)(l,{children:\" Comment cr\\xE9er des rapports de tests ?  \"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Mise en place des tests unitaires avec Vitest \"})}),`\n`,(0,n.jsx)(e.h2,{children:\"Installation des d\\xE9pendances\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons r\\xE9aliser les tests unitaires de nos applications React avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ce tutoriel, veuillez cr\\xE9er un nouveau projet nomm\\xE9 \",(0,n.jsx)(e.code,{children:\"unit-tests\"}),\" sur base d'un copier/coller du dossier \",(0,n.jsx)(e.code,{children:\"front\"}),\"de votre tutoriel \",(0,n.jsx)(e.code,{children:\"context\"}),\". Si n\\xE9cessaire, vous pouvez trouver le code associ\\xE9 au dossier \",(0,n.jsx)(e.code,{children:\"front\"}),\" ici : \",(0,n.jsx)(e.a,{href:\"https://github.com/e-vinci/ts-demos/tree/main/front/context/front\",children:\"dossier front du tuto context\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ajouter \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" \\xE0 votre projet, vous pouvez ex\\xE9cuter la commande suivante :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-D\"}),` vitest @testing-library/react jsdom @vitest/coverage-v8\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"jsdom\"}),\" est un environnement de test JavaScript qui simule un navigateur web. Il est utilis\\xE9 par \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" pour ex\\xE9cuter les tests unitaires.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" est une biblioth\\xE8que de test qui fournit des utilitaires pour tester les composants React.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"@vitest/coverage-v8\"}),\" est un plugin de couverture de code pour \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui g\\xE9n\\xE8re des rapports de couverture de code.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Veuillez configurer votre application Vite pour ex\\xE9cuter les tests unitaires avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\". Pour cela, vous devez modifier votre fichier \",(0,n.jsx)(e.code,{children:\"vite.config.ts\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// eslint-disable-next-line spaced-comment\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:'/// \u003creference types=\"vitest/config\" /\u003e'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" defineConfig \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vite'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" react \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@vitejs/plugin-react-swc'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" checker \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vite-plugin-checker'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// https://vitejs.dev/config/\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"defineConfig\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"  test\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"    environment\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'jsdom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"    globals\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    setupFiles\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./src/setupTests.ts'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"14\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  plugins\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"react\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"checker\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[\"      typescript\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"22\",children:[\"  server\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    proxy\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"24\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:\"'/api'\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"        target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'http://localhost:3000'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"        changeOrigin\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"rewrite\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"replace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsxs)(e.span,{className:\"token regex-source language-regex\",children:[(0,n.jsx)(e.span,{className:\"token anchor function\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token escape\",children:\"\\\\/\"}),\"api\"]}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"28\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"29\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"31\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.h2,{children:\"Ex\\xE9cution des tests\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour \\xE9crire des tests unitaires avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\", vous pouvez cr\\xE9er un fichier \",(0,n.jsx)(e.code,{children:\"*.test.tsx\"}),\" \\xE0 c\\xF4t\\xE9 de votre composant ou fonction \\xE0 tester.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Par d\\xE9faut, \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" recherche les fichiers contenant \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\".test\"})}),\" ou \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\".spec\"})}),\" dans le nom de fichier pour ex\\xE9cuter les tests.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ex\\xE9cuter les tests \\xE0 l'aide d'une commande, vous devez ajouter un script dans votre fichier \",(0,n.jsx)(e.code,{children:\"package.json\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"language-json code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scripts\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"test\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"vitest\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"coverage\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"vitest run --coverage\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"Vous pouvez ex\\xE9cuter les tests en utilisant la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Pour g\\xE9n\\xE9rer un rapport de couverture de code, vous pouvez ex\\xE9cuter la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` run coverage\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ex\\xE9cuter les tests directement au sein de VS Code, vous pouvez installer l'extension \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://marketplace.visualstudio.com/items?itemName=alexjoverm.vitest\",children:\"Vitest\"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" O\\xF9 enregistrer les sp\\xE9cifications de test ? \"})}),`\n`,(0,n.jsx)(e.p,{children:\"Il existe trois principales approches pour enregistrer les sp\\xE9cifications de test :\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche int\\xE9gr\\xE9e\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans le m\\xEAme fichier que le composant ou la fonction \\xE0 tester. Cela permet de garder les tests \\xE0 proximit\\xE9 du code source et de les maintenir ensemble.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche s\\xE9par\\xE9e dans r\\xE9pertoire du composant\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans des fichiers s\\xE9par\\xE9s avec l'extension \",(0,n.jsx)(e.code,{children:\".test.tsx\"}),\" ou \",(0,n.jsx)(e.code,{children:\".spec.tsx\"}),\". Cela permet de garder les tests s\\xE9par\\xE9s du code source, mais proche.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche s\\xE9par\\xE9e dans un r\\xE9pertoire d\\xE9di\\xE9\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans un r\\xE9pertoire d\\xE9di\\xE9, par exemple \",(0,n.jsx)(e.code,{children:\"/src/unit-tests\"}),\". Cela permet de garder les tests compl\\xE8tement s\\xE9par\\xE9s du code source.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Chaque approche a ses avantages et ses inconv\\xE9nients. Il est important de choisir celle qui convient le mieux \\xE0 votre projet et \\xE0 votre \\xE9quipe.  Il est recommand\\xE9 de garder les tests \\xE0 proximit\\xE9 du code source pour faciliter la maintenance et la compr\\xE9hension du code.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour le Projet CAE, nous vous demandons de suivre \",(0,n.jsx)(e.strong,{children:\"l'approche s\\xE9par\\xE9e dans r\\xE9pertoire du composant\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Plus d'information sur \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://vitest.dev/\",children:\"Vitest\"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment tester un composant simple ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Dans un premier temps, nous allons tester le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" qui est un composant intelligent dont ses d\\xE9pendances \\xE0 la gestion de l'\\xE9tat sont inject\\xE9es \\xE0 l'aide d'un contexte.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons r\\xE9aliser un premier simple test unitaire pour v\\xE9rifier que le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),' affiche deux labels (\"Username\" et \"Password\").']}),`\n`,(0,n.jsxs)(e.p,{children:[\"Veuillez cr\\xE9er un nouveau script nomm\\xE9 \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"describe\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"permet de regrouper des tests li\\xE9s entre eux. Ici, elle regroupe les tests pour le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"'LoginPage' est le nom du groupe de tests, ce qui aide \\xE0 organiser et \\xE0 identifier les tests dans les rapports de test.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"test\"})}),\" (ou \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"it\"})}),\") :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui d\\xE9finit un cas de test individuel.\"}),`\n`,(0,n.jsx)(e.li,{children:\"'renders a form with username and password inputs' : est une description du cas de test. Elle explique ce que le test v\\xE9rifie.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"La fonction fl\\xE9ch\\xE9e \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"() =\u003e { ... }\"})}),\" contient le code du test.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Est un synonyme de \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"it\"})}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"render\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui rend un composant React dans un environnement de test.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cMemoryRouter\u003e\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est un composant de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" qui simule un environnement de routage en m\\xE9moire.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[`Il est utilis\\xE9 ici pour fournir le contexte de routage n\\xE9cessaire au composant LoginPage.\n`,(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cLoginPage /\u003e\"})}),\" est le composant \\xE0 tester.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"screen\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est un objet qui repr\\xE9sente le DOM rendu.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"getByLabelText\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une m\\xE9thode de screen qui recherche un \\xE9l\\xE9ment dans le DOM par son texte de label associ\\xE9. Ici, il recherche un \\xE9l\\xE9ment avec le label 'Username'.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui cr\\xE9e une assertion.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"toBeTruthy\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:`est une m\\xE9thode d'assertion qui v\\xE9rifie que la valeur est \"truthy\" (c'est-\\xE0-dire qu'elle n'est pas null, undefined, false, 0, NaN, ou une cha\\xEEne vide).`}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(passwordInput).toBeTruthy();\"})}),\" : cette assertion v\\xE9rifie que l'\\xE9l\\xE9ment \",(0,n.jsx)(e.code,{children:\"passwordInput\"}),\" existe dans le DOM.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Pour ex\\xE9cuter ce test unitaire, vous pouvez utiliser la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" run \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Il est bien s\\xFBr possible de le faire dans VS Code avec l'extension \",(0,n.jsx)(e.code,{children:\"Vitest\"}),', en cliquant sur le bouton \"Run Test\" \\xE0 c\\xF4t\\xE9 de la description du test.']}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment mocker un contexte ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour tester un composant qui d\\xE9pend d'un contexte, vous pouvez utiliser la fonction \",(0,n.jsx)(e.code,{children:\"render\"}),\" de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" pour envelopper le composant dans un \",(0,n.jsx)(e.code,{children:\"Provider\"}),\" qui fournit les valeurs du contexte.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Voici le code que nous souhaitons tester :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous souhaitons ici injecter un contexte \",(0,n.jsx)(e.code,{children:\"UserContext\"}),\" qui contient une fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" et v\\xE9rifier que le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" appelle correctement cette fonction lors de la soumission du formulaire.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici un nouveau test unitaire \\xE0 ajouter dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fireEvent \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" vi \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../contexts/UserContext'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"16\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"20\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"21\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls loginUser when the form is submitted'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"22\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"24\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"25\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"26\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"27\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"28\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"30\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"32\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"33\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"34\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"35\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"36\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"37\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"38\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"40\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"41\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"42\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"43\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"44\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"45\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"46\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"47\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"48\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"49\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"50\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"51\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"52\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"53\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.fn()\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de fonction.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" du contexte \",(0,n.jsx)(e.code,{children:\"UserContext\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Un mock est une fonction simul\\xE9e qui enregistre les appels et les arguments pass\\xE9s \\xE0 la fonction simul\\xE9e.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cUserContext.Provider\u003e\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est un composant de \",(0,n.jsx)(e.code,{children:\"React\"}),\" qui injecte les valeurs du contexte aux composants enfants.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"fireEvent.change\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui simule un \\xE9v\\xE9nement de changement sur un \\xE9l\\xE9ment du DOM.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Elle est utilis\\xE9e ici pour simuler la saisie de valeurs dans les champs de formulaire.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"fireEvent.click\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui simule un \\xE9v\\xE9nement de clic sur un \\xE9l\\xE9ment du DOM.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Elle est utilis\\xE9e ici pour simuler le clic sur le bouton de soumission du formulaire.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(loginUserMock).toHaveBeenCalledWith({ ... })\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une assertion qui v\\xE9rifie que la fonction \",(0,n.jsx)(e.code,{children:\"loginUserMock\"}),\" a \\xE9t\\xE9 appel\\xE9e avec les arguments sp\\xE9cifi\\xE9s.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Pour ex\\xE9cuter les deux tests unitaires existants, vous pouvez utiliser la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" run \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment mocker un useNavigate ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour tester un composant qui utilise \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", vous pouvez utiliser la fonction \",(0,n.jsx)(e.code,{children:\"vi.mock\"}),\" pour mocker le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si l'on reprend le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" que nous souhaitons tester :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Dans notre pr\\xE9c\\xE9dent test, nous avons d\\xE9j\\xE0 v\\xE9rifi\\xE9 que la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" est appel\\xE9e correctement. Pour \\xEAtre complet dans notre deuxi\\xE8me test unitaire, nous allons v\\xE9rifier que la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" est appel\\xE9e avec le chemin '/' apr\\xE8s l'appel \\xE0 \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici le test unitaire \\xE0 modifier dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" waitFor \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useNavigate \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" vi \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../contexts/UserContext'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" actual \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"importActual\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"actual\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"    useNavigate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"14\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"22\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"24\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls loginUser and navigates to HomePage when the form is submitted'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigateMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"32\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"33\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"34\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"35\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"36\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"37\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"38\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"    vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mocked\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"useNavigate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockReturnValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"40\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"41\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"42\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"43\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"44\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"45\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"46\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"47\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"48\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"49\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"50\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"51\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"52\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"53\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"54\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"55\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"56\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"57\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"58\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"59\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"60\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"61\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"62\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"63\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"64\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"waitFor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"65\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"66\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"67\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"68\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici comment nous avons mock\\xE9 \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" actual \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"importActual\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"actual\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    useNavigate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mock\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui permet de mocker un module.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour mocker le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et remplacer la fonction \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" par un mock.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.importActual\"})}),\" est une fonction qui permet d'importer le module r\\xE9el pour le mocker.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"On r\\xE9cup\\xE8re ici le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et on remplace uniquement la fonction \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" par un mock. On veut par exemple, garder la vrai fonction \",(0,n.jsx)(e.code,{children:\"MemoryRouter\"}),\" pour ne pas la mocker.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Si l'on avait souhait\\xE9 mocker l'ensemble du module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", on aurait pu simplement \\xE9crire \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mock('react-router-dom', vi.fn())\"})}),\". Mais nous aurions eu le probl\\xE8me de ne pas pouvoir utiliser \",(0,n.jsx)(e.code,{children:\"MemoryRouter\"}),\"...  ?\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour info, dans le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\", voici comment nous utilisons \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsx)(e.code,{className:\"language-tsx code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"useNavigate\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", un hook, qui permet de naviguer vers une autre page.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"ce hook renvoie une fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" qui peut \\xEAtre appel\\xE9e pour naviguer vers une autre page.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici comment nous avons cr\\xE9\\xE9 une nouvelle impl\\xE9mentations pour \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\", afin de renvoyer notre propre mock de la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigateMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mocked\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"useNavigate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockReturnValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mocked(useNavigate).mockReturnValue(navigateMock)\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui permet de mocker une m\\xE9thode d'un module.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour mocker la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" du module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et lui faire renvoyer notre mock \",(0,n.jsx)(e.code,{children:\"navigateMock\"}),\". C'est en fait l'\\xE9quivalent de la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" que nous avons utilis\\xE9e dans le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"await waitFor(() =\u003e { ... })\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui attend que la fonction de rappel passe un test.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour attendre que le mock \",(0,n.jsx)(e.code,{children:\"navigateMock\"}),\" soit appel\\xE9 avec le chemin '/'.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Veuillez ex\\xE9cuter vos deux tests unitaires.\"}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment lancer une exception \\xE0 l'aide d'un mock ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si l'on reprend le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" que nous souhaitons tester :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous souhaiterions tester le cas o\\xF9 la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" lance une exception. Pour cela, nous allons mocker la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" pour qu'elle lance une exception.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons aussi v\\xE9rifier que la fonction \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" est appel\\xE9e avec le message d'erreur. Pour ce faire, nous allons mocker \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" et v\\xE9rifier que cette fonction est appel\\xE9e avec le message d'erreur.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici le test unitaire \\xE0 ajouter dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls console.error when loginUser throws an error'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` vi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockRejectedValueOnce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Login failed'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" consoleErrorMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` vi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"spyOn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'error'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockImplementation\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"14\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"22\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"24\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"32\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"34\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"35\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"36\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"37\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"38\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"waitFor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"consoleErrorMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"40\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"41\",children:[\"        expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"42\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"43\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"44\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"45\",children:[\"    consoleErrorMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockRestore\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"46\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.fn().mockRejectedValueOnce(new Error('Login failed'))\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de fonction qui lance une exception.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" qui lance une exception avec le message 'Login failed'.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.spyOn(console, 'error').mockImplementation(() =\u003e {})\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" qui ne fait rien.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(consoleErrorMock).toHaveBeenCalledWith('LoginPage::error: ', expect.any(Error))\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une assertion qui v\\xE9rifie que la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" a \\xE9t\\xE9 appel\\xE9e avec le message 'LoginPage::error: ' et une instance de la classe \",(0,n.jsx)(e.code,{children:\"Error\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"consoleErrorMock.mockRestore()\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une m\\xE9thode qui restaure la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" \\xE0 sa valeur d'origine.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour restaurer la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" apr\\xE8s le test.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Veuillez ex\\xE9cuter vos trois tests unitaires.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour en savoir plus sur les tests, notamment pour \\xE9viter les redondances de code (\",(0,n.jsx)(e.code,{children:\"beforeAll\"}),\", \",(0,n.jsx)(e.code,{children:\"beforeEach\"}),\"...), vous pouvez consulter la documentation de l'API de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://vitest.dev/api/\",children:\"Vitest API\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si n\\xE9cessaire, vous pouvez trouver le code associ\\xE9 \\xE0 ce tutorial ici : \",(0,n.jsx)(e.a,{href:\"https://github.com/e-vinci/ts-demos/tree/main/front/unit-tests\",children:\"unit-tests\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment cr\\xE9er des rapports de tests ? \"})}),`\n`,(0,n.jsx)(e.h2,{children:\"G\\xE9n\\xE9ration de rapport de tests\"}),`\n`,(0,n.jsx)(e.p,{children:\"Pour g\\xE9n\\xE9rer des rapports de tests, vous pouvez ex\\xE9cuter la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` run coverage\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Cette commande g\\xE9n\\xE8re un rapport de couverture de code dans le r\\xE9pertoire \",(0,n.jsx)(e.code,{children:\"/coverage\"}),\". Vous pouvez ouvrir le fichier \",(0,n.jsx)(e.code,{children:\"index.html\"}),\" dans votre navigateur pour visualiser le rapport de couverture de code.\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"Visualisation des tests via une UI\"}),`\n`,(0,n.jsx)(e.p,{children:\"Pour visualiser les tests via une interface utilisateur, vous pouvez ex\\xE9cuter la commande suivante dans le r\\xE9pertoire de votre projet contenant des tests unitaires :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"npx vitest \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--ui\"}),`\n`]})})})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(m,{...a})}):m(a)}function i(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(U);})();\n;return Component;"},"_id":"quality/unit-tests.mdx","_raw":{"sourceFilePath":"quality/unit-tests.mdx","sourceFileName":"unit-tests.mdx","sourceFileDir":"quality","contentType":"mdx","flattenedPath":"quality/unit-tests"},"type":"Page"},"body":"var Component=(()=\u003e{var N=Object.create;var o=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var v=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=\u003e{for(var c in e)o(a,c,{get:e[c],enumerable:!0})},p=(a,e,c,l)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!f.call(a,s)\u0026\u0026s!==c\u0026\u0026o(a,s,{get:()=\u003ee[s],enumerable:!(l=k(e,s))||l.enumerable});return a};var x=(a,e,c)=\u003e(c=a!=null?N(b(a)):{},p(e||!a||!a.__esModule?o(c,\"default\",{value:a,enumerable:!0}):c,a)),w=a=\u003ep(o({},\"__esModule\",{value:!0}),a);var u=v((L,d)=\u003e{d.exports=_jsx_runtime});var U={};y(U,{default:()=\u003eh,frontmatter:()=\u003eP});var n=x(u()),P={title:\"React Unit Tests\",description:\"Tests unitaires avec React\"};function m(a){let e={a:\"a\",br:\"br\",code:\"code\",h1:\"h1\",h2:\"h2\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components},{InternalPageMenu:c,InternalPageMenuItem:l,InternalPageTitle:s,PathViewer:r,PathViewerItem:t}=e;return c||i(\"InternalPageMenu\",!0),l||i(\"InternalPageMenuItem\",!0),s||i(\"InternalPageTitle\",!0),r||i(\"PathViewer\",!0),t||i(\"PathViewerItem\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c,{children:[(0,n.jsx)(r,{children:(0,n.jsxs)(e.p,{children:[(0,n.jsx)(t,{to:\"/\",children:\" CAE \"}),`\n`,(0,n.jsx)(t,{to:\"/quality\",children:\" Qualit\\xE9 \"}),`\n`,(0,n.jsx)(t,{to:\"/quality/frontend\",children:\" Qualit\\xE9 du frontend\"}),(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(t,{selected:!0,children:\" Unit Tests \"})]})}),(0,n.jsx)(l,{children:\" Mise en place des tests unitaires avec Vitest \"}),(0,n.jsx)(l,{children:\" O\\xF9 enregistrer les sp\\xE9cifications de test ? \"}),(0,n.jsx)(l,{children:\" Comment tester un composant simple ? \"}),(0,n.jsx)(l,{children:\" Comment mocker un contexte ? \"}),(0,n.jsx)(l,{children:\" Comment mocker un useNavigate ? \"}),(0,n.jsx)(l,{children:\" Comment lancer une exception \\xE0 l'aide d'un mock ? \"}),(0,n.jsx)(l,{children:\" Comment cr\\xE9er des rapports de tests ?  \"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Mise en place des tests unitaires avec Vitest \"})}),`\n`,(0,n.jsx)(e.h2,{children:\"Installation des d\\xE9pendances\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons r\\xE9aliser les tests unitaires de nos applications React avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ce tutoriel, veuillez cr\\xE9er un nouveau projet nomm\\xE9 \",(0,n.jsx)(e.code,{children:\"unit-tests\"}),\" sur base d'un copier/coller du dossier \",(0,n.jsx)(e.code,{children:\"front\"}),\"de votre tutoriel \",(0,n.jsx)(e.code,{children:\"context\"}),\". Si n\\xE9cessaire, vous pouvez trouver le code associ\\xE9 au dossier \",(0,n.jsx)(e.code,{children:\"front\"}),\" ici : \",(0,n.jsx)(e.a,{href:\"https://github.com/e-vinci/ts-demos/tree/main/front/context/front\",children:\"dossier front du tuto context\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ajouter \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" \\xE0 votre projet, vous pouvez ex\\xE9cuter la commande suivante :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),\" \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"-D\"}),` vitest @testing-library/react jsdom @vitest/coverage-v8\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"jsdom\"}),\" est un environnement de test JavaScript qui simule un navigateur web. Il est utilis\\xE9 par \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" pour ex\\xE9cuter les tests unitaires.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" est une biblioth\\xE8que de test qui fournit des utilitaires pour tester les composants React.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"@vitest/coverage-v8\"}),\" est un plugin de couverture de code pour \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui g\\xE9n\\xE8re des rapports de couverture de code.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Veuillez configurer votre application Vite pour ex\\xE9cuter les tests unitaires avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\". Pour cela, vous devez modifier votre fichier \",(0,n.jsx)(e.code,{children:\"vite.config.ts\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// eslint-disable-next-line spaced-comment\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:'/// \u003creference types=\"vitest/config\" /\u003e'}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" defineConfig \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vite'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" react \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@vitejs/plugin-react-swc'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" checker \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vite-plugin-checker'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// https://vitejs.dev/config/\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"defineConfig\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"  test\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"    environment\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'jsdom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"    globals\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    setupFiles\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./src/setupTests.ts'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"14\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"15\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  plugins\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"react\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"checker\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[\"      typescript\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"22\",children:[\"  server\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    proxy\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"24\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token string-property property\",children:\"'/api'\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"        target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'http://localhost:3000'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"        changeOrigin\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean\",children:\"true\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"rewrite\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\u003e\"}),\" path\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token function\",children:\"replace\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsxs)(e.span,{className:\"token regex-source language-regex\",children:[(0,n.jsx)(e.span,{className:\"token anchor function\",children:\"^\"}),(0,n.jsx)(e.span,{className:\"token escape\",children:\"\\\\/\"}),\"api\"]}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"28\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"29\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"31\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.h2,{children:\"Ex\\xE9cution des tests\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour \\xE9crire des tests unitaires avec \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\", vous pouvez cr\\xE9er un fichier \",(0,n.jsx)(e.code,{children:\"*.test.tsx\"}),\" \\xE0 c\\xF4t\\xE9 de votre composant ou fonction \\xE0 tester.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Par d\\xE9faut, \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" recherche les fichiers contenant \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\".test\"})}),\" ou \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\".spec\"})}),\" dans le nom de fichier pour ex\\xE9cuter les tests.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ex\\xE9cuter les tests \\xE0 l'aide d'une commande, vous devez ajouter un script dans votre fichier \",(0,n.jsx)(e.code,{children:\"package.json\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"language-json code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scripts\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"test\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"vitest\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"coverage\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"vitest run --coverage\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"Vous pouvez ex\\xE9cuter les tests en utilisant la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Pour g\\xE9n\\xE9rer un rapport de couverture de code, vous pouvez ex\\xE9cuter la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` run coverage\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour ex\\xE9cuter les tests directement au sein de VS Code, vous pouvez installer l'extension \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://marketplace.visualstudio.com/items?itemName=alexjoverm.vitest\",children:\"Vitest\"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" O\\xF9 enregistrer les sp\\xE9cifications de test ? \"})}),`\n`,(0,n.jsx)(e.p,{children:\"Il existe trois principales approches pour enregistrer les sp\\xE9cifications de test :\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche int\\xE9gr\\xE9e\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans le m\\xEAme fichier que le composant ou la fonction \\xE0 tester. Cela permet de garder les tests \\xE0 proximit\\xE9 du code source et de les maintenir ensemble.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche s\\xE9par\\xE9e dans r\\xE9pertoire du composant\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans des fichiers s\\xE9par\\xE9s avec l'extension \",(0,n.jsx)(e.code,{children:\".test.tsx\"}),\" ou \",(0,n.jsx)(e.code,{children:\".spec.tsx\"}),\". Cela permet de garder les tests s\\xE9par\\xE9s du code source, mais proche.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Approche s\\xE9par\\xE9e dans un r\\xE9pertoire d\\xE9di\\xE9\"}),\" : Les sp\\xE9cifications de test sont enregistr\\xE9es dans un r\\xE9pertoire d\\xE9di\\xE9, par exemple \",(0,n.jsx)(e.code,{children:\"/src/unit-tests\"}),\". Cela permet de garder les tests compl\\xE8tement s\\xE9par\\xE9s du code source.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Chaque approche a ses avantages et ses inconv\\xE9nients. Il est important de choisir celle qui convient le mieux \\xE0 votre projet et \\xE0 votre \\xE9quipe.  Il est recommand\\xE9 de garder les tests \\xE0 proximit\\xE9 du code source pour faciliter la maintenance et la compr\\xE9hension du code.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour le Projet CAE, nous vous demandons de suivre \",(0,n.jsx)(e.strong,{children:\"l'approche s\\xE9par\\xE9e dans r\\xE9pertoire du composant\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Plus d'information sur \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://vitest.dev/\",children:\"Vitest\"})]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment tester un composant simple ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Dans un premier temps, nous allons tester le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" qui est un composant intelligent dont ses d\\xE9pendances \\xE0 la gestion de l'\\xE9tat sont inject\\xE9es \\xE0 l'aide d'un contexte.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons r\\xE9aliser un premier simple test unitaire pour v\\xE9rifier que le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),' affiche deux labels (\"Username\" et \"Password\").']}),`\n`,(0,n.jsxs)(e.p,{children:[\"Veuillez cr\\xE9er un nouveau script nomm\\xE9 \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"describe\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"permet de regrouper des tests li\\xE9s entre eux. Ici, elle regroupe les tests pour le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"'LoginPage' est le nom du groupe de tests, ce qui aide \\xE0 organiser et \\xE0 identifier les tests dans les rapports de test.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"test\"})}),\" (ou \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"it\"})}),\") :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui d\\xE9finit un cas de test individuel.\"}),`\n`,(0,n.jsx)(e.li,{children:\"'renders a form with username and password inputs' : est une description du cas de test. Elle explique ce que le test v\\xE9rifie.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"La fonction fl\\xE9ch\\xE9e \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"() =\u003e { ... }\"})}),\" contient le code du test.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Est un synonyme de \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"it\"})}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"render\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui rend un composant React dans un environnement de test.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cMemoryRouter\u003e\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est un composant de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" qui simule un environnement de routage en m\\xE9moire.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[`Il est utilis\\xE9 ici pour fournir le contexte de routage n\\xE9cessaire au composant LoginPage.\n`,(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cLoginPage /\u003e\"})}),\" est le composant \\xE0 tester.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"screen\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est un objet qui repr\\xE9sente le DOM rendu.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"getByLabelText\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une m\\xE9thode de screen qui recherche un \\xE9l\\xE9ment dans le DOM par son texte de label associ\\xE9. Ici, il recherche un \\xE9l\\xE9ment avec le label 'Username'.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"est une fonction qui cr\\xE9e une assertion.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"toBeTruthy\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:`est une m\\xE9thode d'assertion qui v\\xE9rifie que la valeur est \"truthy\" (c'est-\\xE0-dire qu'elle n'est pas null, undefined, false, 0, NaN, ou une cha\\xEEne vide).`}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(passwordInput).toBeTruthy();\"})}),\" : cette assertion v\\xE9rifie que l'\\xE9l\\xE9ment \",(0,n.jsx)(e.code,{children:\"passwordInput\"}),\" existe dans le DOM.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Pour ex\\xE9cuter ce test unitaire, vous pouvez utiliser la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" run \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Il est bien s\\xFBr possible de le faire dans VS Code avec l'extension \",(0,n.jsx)(e.code,{children:\"Vitest\"}),', en cliquant sur le bouton \"Run Test\" \\xE0 c\\xF4t\\xE9 de la description du test.']}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment mocker un contexte ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour tester un composant qui d\\xE9pend d'un contexte, vous pouvez utiliser la fonction \",(0,n.jsx)(e.code,{children:\"render\"}),\" de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" pour envelopper le composant dans un \",(0,n.jsx)(e.code,{children:\"Provider\"}),\" qui fournit les valeurs du contexte.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Voici le code que nous souhaitons tester :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous souhaitons ici injecter un contexte \",(0,n.jsx)(e.code,{children:\"UserContext\"}),\" qui contient une fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" et v\\xE9rifier que le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" appelle correctement cette fonction lors de la soumission du formulaire.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici un nouveau test unitaire \\xE0 ajouter dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fireEvent \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" vi \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../contexts/UserContext'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"7\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"16\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"20\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"21\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls loginUser when the form is submitted'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"22\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"24\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"25\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"26\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"27\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"28\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"30\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"32\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"33\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"34\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"35\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"36\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"37\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"38\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"40\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"41\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"42\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"43\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"44\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"45\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"46\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number highlight-line\",line:\"47\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"48\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"49\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"50\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"51\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"52\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"53\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.fn()\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de fonction.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" du contexte \",(0,n.jsx)(e.code,{children:\"UserContext\"}),\".\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Un mock est une fonction simul\\xE9e qui enregistre les appels et les arguments pass\\xE9s \\xE0 la fonction simul\\xE9e.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"\u003cUserContext.Provider\u003e\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est un composant de \",(0,n.jsx)(e.code,{children:\"React\"}),\" qui injecte les valeurs du contexte aux composants enfants.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"fireEvent.change\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui simule un \\xE9v\\xE9nement de changement sur un \\xE9l\\xE9ment du DOM.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Elle est utilis\\xE9e ici pour simuler la saisie de valeurs dans les champs de formulaire.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"fireEvent.click\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui simule un \\xE9v\\xE9nement de clic sur un \\xE9l\\xE9ment du DOM.\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Elle est utilis\\xE9e ici pour simuler le clic sur le bouton de soumission du formulaire.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(loginUserMock).toHaveBeenCalledWith({ ... })\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une assertion qui v\\xE9rifie que la fonction \",(0,n.jsx)(e.code,{children:\"loginUserMock\"}),\" a \\xE9t\\xE9 appel\\xE9e avec les arguments sp\\xE9cifi\\xE9s.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Pour ex\\xE9cuter les deux tests unitaires existants, vous pouvez utiliser la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" run \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]})})}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment mocker un useNavigate ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour tester un composant qui utilise \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", vous pouvez utiliser la fonction \",(0,n.jsx)(e.code,{children:\"vi.mock\"}),\" pour mocker le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si l'on reprend le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" que nous souhaitons tester :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Dans notre pr\\xE9c\\xE9dent test, nous avons d\\xE9j\\xE0 v\\xE9rifi\\xE9 que la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" est appel\\xE9e correctement. Pour \\xEAtre complet dans notre deuxi\\xE8me test unitaire, nous allons v\\xE9rifier que la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" est appel\\xE9e avec le chemin '/' apr\\xE8s l'appel \\xE0 \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici le test unitaire \\xE0 modifier dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" render\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" waitFor \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'@testing-library/react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"MemoryRouter\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useNavigate \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" describe\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" test\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" vi \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'vitest'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token imports\",children:(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"LoginPage\"})}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../components/pages/LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsxs)(e.span,{className:\"token imports\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'../../contexts/UserContext'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"6\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" actual \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"importActual\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"actual\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"    useNavigate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"14\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"describe\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'renders a form with username and password inputs'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"22\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"24\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toBeTruthy\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls loginUser and navigates to HomePage when the form is submitted'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigateMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"32\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"33\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"34\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"35\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"36\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"37\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"38\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"    vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mocked\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"useNavigate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockReturnValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"40\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"41\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"42\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"43\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"44\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"45\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"46\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"47\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"48\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"49\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"50\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"51\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"52\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"53\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"54\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"55\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"56\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"57\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"58\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"59\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"60\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"61\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"62\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"63\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"64\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"waitFor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"65\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"66\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"67\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"68\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici comment nous avons mock\\xE9 \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mock\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" actual \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"importActual\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'react-router-dom'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token spread operator\",children:\"...\"}),\"actual\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    useNavigate\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mock\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui permet de mocker un module.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour mocker le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et remplacer la fonction \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" par un mock.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.importActual\"})}),\" est une fonction qui permet d'importer le module r\\xE9el pour le mocker.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"On r\\xE9cup\\xE8re ici le module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et on remplace uniquement la fonction \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" par un mock. On veut par exemple, garder la vrai fonction \",(0,n.jsx)(e.code,{children:\"MemoryRouter\"}),\" pour ne pas la mocker.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Si l'on avait souhait\\xE9 mocker l'ensemble du module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", on aurait pu simplement \\xE9crire \",(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mock('react-router-dom', vi.fn())\"})}),\". Mais nous aurions eu le probl\\xE8me de ne pas pouvoir utiliser \",(0,n.jsx)(e.code,{children:\"MemoryRouter\"}),\"...  ?\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour info, dans le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\", voici comment nous utilisons \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsx)(e.code,{className:\"language-tsx code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"useNavigate\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\", un hook, qui permet de naviguer vers une autre page.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"ce hook renvoie une fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" qui peut \\xEAtre appel\\xE9e pour naviguer vers une autre page.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici comment nous avons cr\\xE9\\xE9 une nouvelle impl\\xE9mentations pour \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\", afin de renvoyer notre propre mock de la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigateMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mocked\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"useNavigate\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockReturnValue\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"navigateMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.mocked(useNavigate).mockReturnValue(navigateMock)\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui permet de mocker une m\\xE9thode d'un module.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour mocker la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"useNavigate\"}),\" du module \",(0,n.jsx)(e.code,{children:\"react-router-dom\"}),\" et lui faire renvoyer notre mock \",(0,n.jsx)(e.code,{children:\"navigateMock\"}),\". C'est en fait l'\\xE9quivalent de la fonction \",(0,n.jsx)(e.code,{children:\"navigate\"}),\" que nous avons utilis\\xE9e dans le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"await waitFor(() =\u003e { ... })\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"@testing-library/react\"}),\" qui attend que la fonction de rappel passe un test.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour attendre que le mock \",(0,n.jsx)(e.code,{children:\"navigateMock\"}),\" soit appel\\xE9 avec le chemin '/'.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Veuillez ex\\xE9cuter vos deux tests unitaires.\"}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment lancer une exception \\xE0 l'aide d'un mock ? \"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si l'on reprend le composant \",(0,n.jsx)(e.code,{children:\"LoginPage\"}),\" que nous souhaitons tester :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"LoginPage\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"2\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" loginUser \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContextType\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"UserContext\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"3\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" navigate \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useNavigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setUsername\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"[\"}),\"password\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" setPassword\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"useState\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"''\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"7\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"8\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"token function-variable function\",children:\"handleSubmit\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"e\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token maybe-class-name\",children:\"SyntheticEvent\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"9\",children:[\"    e\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"preventDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"10\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"try\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"loginUser\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" username\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" password \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"12\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"navigate\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'/'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"catch\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"14\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token console class-name\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" err\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"//...\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous souhaiterions tester le cas o\\xF9 la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" lance une exception. Pour cela, nous allons mocker la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" pour qu'elle lance une exception.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Nous allons aussi v\\xE9rifier que la fonction \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" est appel\\xE9e avec le message d'erreur. Pour ce faire, nous allons mocker \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" et v\\xE9rifier que cette fonction est appel\\xE9e avec le message d'erreur.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Voici le test unitaire \\xE0 ajouter dans le fichier \",(0,n.jsx)(e.code,{children:\"/src/components/pages/LoginPage.tests.tsx\"}),\" :\"]}),`\n`,(0,n.jsx)(e.pre,{className:\"language-tsx\",children:(0,n.jsxs)(e.code,{className:\"language-tsx code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"1\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'calls console.error when loginUser throws an error'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"2\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" loginUserMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` vi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"3\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"4\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockRejectedValueOnce\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token keyword\",children:\"new\"}),\" \",(0,n.jsx)(e.span,{className:\"token class-name\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Login failed'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"5\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" consoleErrorMock \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),` vi\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"6\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"spyOn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token builtin\",children:\"console\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'error'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"7\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockImplementation\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"8\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" mockContextValue \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"9\",children:[\"      authenticatedUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"undefined\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"10\",children:[\"      registerUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"11\",children:[\"      loginUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"12\",children:[\"      clearUser\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" vi\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"fn\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"13\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"14\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"15\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"render\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"16\",children:[\"      \",(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"17\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token attr-name\",children:\"value\"}),(0,n.jsxs)(e.span,{className:\"token script language-javascript\",children:[(0,n.jsx)(e.span,{className:\"token script-punctuation punctuation\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"mockContextValue\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"18\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"          \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"LoginPage\"})]}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"/\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"19\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"        \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"UserContext.Provider\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token plain-text\",children:`\n`})]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"20\",children:[(0,n.jsx)(e.span,{className:\"token plain-text\",children:\"      \"}),(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsxs)(e.span,{className:\"token tag\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003c/\"}),(0,n.jsx)(e.span,{className:\"token class-name\",children:\"MemoryRouter\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"\u003e\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"21\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"22\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"23\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" usernameInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Username'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"24\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" passwordInput \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByLabelText\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'Password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"25\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"const\"}),\" submitButton \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" screen\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"getByRole\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token string\",children:\"'button'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"26\",children:[\"      name\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsxs)(e.span,{className:\"token regex\",children:[(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-source language-regex\",children:\"s'authentifier\"}),(0,n.jsx)(e.span,{className:\"token regex-delimiter\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token regex-flags\",children:\"i\"})]}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"27\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"28\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"29\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"usernameInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"30\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"change\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"passwordInput\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" value\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"31\",children:[\"    fireEvent\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"click\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"submitButton\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"32\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"33\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"loginUserMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"34\",children:[\"      username\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'testuser'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"35\",children:[\"      password\",(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'password'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"36\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"37\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"38\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"await\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"waitFor\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token arrow operator\",children:\"=\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number highlight-line\",line:\"39\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token function\",children:\"expect\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"consoleErrorMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"toHaveBeenCalledWith\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"40\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'LoginPage::error: '\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"41\",children:[\"        expect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"any\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token known-class-name class-name\",children:\"Error\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"42\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"43\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line line-number\",line:\"44\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"45\",children:[\"    consoleErrorMock\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),(0,n.jsx)(e.span,{className:\"token method function property-access\",children:\"mockRestore\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line line-number\",line:\"46\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.fn().mockRejectedValueOnce(new Error('Login failed'))\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de fonction qui lance une exception.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la fonction \",(0,n.jsx)(e.code,{children:\"loginUser\"}),\" qui lance une exception avec le message 'Login failed'.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"vi.spyOn(console, 'error').mockImplementation(() =\u003e {})\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une fonction de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" qui cr\\xE9e un mock de la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\".\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour cr\\xE9er un mock de la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" qui ne fait rien.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"expect(consoleErrorMock).toHaveBeenCalledWith('LoginPage::error: ', expect.any(Error))\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une assertion qui v\\xE9rifie que la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" a \\xE9t\\xE9 appel\\xE9e avec le message 'LoginPage::error: ' et une instance de la classe \",(0,n.jsx)(e.code,{children:\"Error\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:(0,n.jsx)(e.code,{children:\"consoleErrorMock.mockRestore()\"})}),\" :\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"est une m\\xE9thode qui restaure la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" \\xE0 sa valeur d'origine.\"]}),`\n`,(0,n.jsxs)(e.li,{children:[\"Elle est utilis\\xE9e ici pour restaurer la m\\xE9thode \",(0,n.jsx)(e.code,{children:\"console.error\"}),\" apr\\xE8s le test.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Veuillez ex\\xE9cuter vos trois tests unitaires.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pour en savoir plus sur les tests, notamment pour \\xE9viter les redondances de code (\",(0,n.jsx)(e.code,{children:\"beforeAll\"}),\", \",(0,n.jsx)(e.code,{children:\"beforeEach\"}),\"...), vous pouvez consulter la documentation de l'API de \",(0,n.jsx)(e.code,{children:\"Vitest\"}),\" : \",(0,n.jsx)(e.a,{href:\"https://vitest.dev/api/\",children:\"Vitest API\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Si n\\xE9cessaire, vous pouvez trouver le code associ\\xE9 \\xE0 ce tutorial ici : \",(0,n.jsx)(e.a,{href:\"https://github.com/e-vinci/ts-demos/tree/main/front/unit-tests\",children:\"unit-tests\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{children:(0,n.jsx)(s,{children:\" Comment cr\\xE9er des rapports de tests ? \"})}),`\n`,(0,n.jsx)(e.h2,{children:\"G\\xE9n\\xE9ration de rapport de tests\"}),`\n`,(0,n.jsx)(e.p,{children:\"Pour g\\xE9n\\xE9rer des rapports de tests, vous pouvez ex\\xE9cuter la commande suivante :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` run coverage\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Cette commande g\\xE9n\\xE8re un rapport de couverture de code dans le r\\xE9pertoire \",(0,n.jsx)(e.code,{children:\"/coverage\"}),\". Vous pouvez ouvrir le fichier \",(0,n.jsx)(e.code,{children:\"index.html\"}),\" dans votre navigateur pour visualiser le rapport de couverture de code.\"]}),`\n`,(0,n.jsx)(e.h2,{children:\"Visualisation des tests via une UI\"}),`\n`,(0,n.jsx)(e.p,{children:\"Pour visualiser les tests via une interface utilisateur, vous pouvez ex\\xE9cuter la commande suivante dans le r\\xE9pertoire de votre projet contenant des tests unitaires :\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"npx vitest \",(0,n.jsx)(e.span,{className:\"token parameter variable\",children:\"--ui\"}),`\n`]})})})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(m,{...a})}):m(a)}function i(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(U);})();\n;return Component;"},"__N_SSG":true},"page":"/[[...slug]]","query":{"slug":["quality","unit-tests"]},"buildId":"envgJpGHCCHkDOEzEZQTf","assetPrefix":"/cae-project","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>