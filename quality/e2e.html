<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/cae-theory/_next/static/css/fd89b796fb218fbf.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/cae-theory/_next/static/chunks/webpack-0335b56ac768253e.js"/><script src="/cae-theory/_next/static/chunks/4bd1b696-1c20c52a7d48565d.js" async=""></script><script src="/cae-theory/_next/static/chunks/517-35a1bc7953f03a32.js" async=""></script><script src="/cae-theory/_next/static/chunks/main-app-058efed246406231.js" async=""></script><script src="/cae-theory/_next/static/chunks/144-6ef9499ac178c5dc.js" async=""></script><script src="/cae-theory/_next/static/chunks/245-30e455921c0f8f22.js" async=""></script><script src="/cae-theory/_next/static/chunks/app/layout-a6c5d823159daef4.js" async=""></script><script src="/cae-theory/_next/static/chunks/830-d07b37352b41f989.js" async=""></script><script src="/cae-theory/_next/static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js" async=""></script><title>CAE Course</title><link rel="icon" type="image/svg+xml" href="/cae-theory/favicon.svg"/><title>Tests e2e</title><script src="/cae-theory/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-emotion="mui-global o6gwfi">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:rgba(0, 0, 0, 0.87);font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;background-color:#fff;}@media print{body{background-color:#fff;}}body::backdrop{background-color:#fff;}</style><style data-emotion="mui-global 1o1x9wj">blockquote{border-left:5px solid #1976d2;background-color:rgba(0, 0, 0, 0.04);padding:0.5em;margin:1em 0;}table{width:100%;border-collapse:collapse;overflow-x:auto;display:block;}th{border:1px solid rgba(0, 0, 0, 0.12);padding:8px;background-color:#1976d2;color:#fff;font-weight:bold;}td{border:1px solid rgba(0, 0, 0, 0.12);padding:8px;}tr:nth-of-type(even){background-color:rgba(0, 0, 0, 0.04);}tr:hover{background-color:rgba(0, 0, 0, 0.08);}</style><style data-emotion="mui ljfsoa w6pz14 awgou1 tdg6lc 1mm3lge 1dya3jy q7mezt 1myx5lw 130f8nx 6n7j50 mcfrop o34szc 1xdhyk6 13wylk3 1oz5b8u 1gychr7 kxijxt wfm2y7 51eq8m 1ttcndq ub0mep 1nd5pgh ihsi0z 14rdsw0 fyswvn">.mui-ljfsoa{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);color:#fff;}.mui-w6pz14{background-color:#fff;color:rgba(0, 0, 0, 0.87);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:static;--AppBar-background:#1976d2;--AppBar-color:#fff;background-color:var(--AppBar-background);color:var(--AppBar-color);color:#fff;}.mui-awgou1{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:16px;padding-right:16px;min-height:56px;}@media (min-width:600px){.mui-awgou1{padding-left:24px;padding-right:24px;}}@media (min-width:0px){@media (orientation: landscape){.mui-awgou1{min-height:48px;}}}@media (min-width:600px){.mui-awgou1{min-height:64px;}}.mui-tdg6lc{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);margin-left:-12px;color:inherit;margin-right:16px;}.mui-tdg6lc:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-tdg6lc:hover{background-color:transparent;}}.mui-tdg6lc.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-tdg6lc.MuiIconButton-loading{color:transparent;}.mui-1mm3lge{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:rgba(0, 0, 0, 0.54);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(0, 0, 0, 0.04);margin-left:-12px;color:inherit;margin-right:16px;}.mui-1mm3lge::-moz-focus-inner{border-style:none;}.mui-1mm3lge.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1mm3lge{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1mm3lge:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-1mm3lge:hover{background-color:transparent;}}.mui-1mm3lge.Mui-disabled{background-color:transparent;color:rgba(0, 0, 0, 0.26);}.mui-1mm3lge.MuiIconButton-loading{color:transparent;}.mui-1dya3jy{display:none;position:absolute;visibility:visible;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);color:rgba(0, 0, 0, 0.26);}.mui-q7mezt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}.mui-1myx5lw{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:1.25rem;line-height:1.6;letter-spacing:0.0075em;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:600px){.mui-1myx5lw{display:block;}}@media (min-width:0px){.mui-130f8nx{display:none;}}@media (min-width:600px){.mui-130f8nx{display:block;}}.mui-6n7j50{display:inline;}.mui-mcfrop{font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.mui-mcfrop:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-mcfrop.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.mui-mcfrop:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.mui-mcfrop.MuiButton-loading{color:transparent;}.mui-o34szc{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.75;letter-spacing:0.02857em;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:4px;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);color:inherit;border-color:currentColor;--variant-containedBg:#e0e0e0;-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:#fff;}.mui-o34szc::-moz-focus-inner{border-style:none;}.mui-o34szc.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-o34szc{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-o34szc:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-o34szc.Mui-disabled{color:rgba(0, 0, 0, 0.26);}@media (hover: hover){.mui-o34szc:hover{--variant-containedBg:#f5f5f5;--variant-textBg:rgba(0, 0, 0, 0.04);--variant-outlinedBg:rgba(0, 0, 0, 0.04);}}.mui-o34szc.MuiButton-loading{color:transparent;}.mui-1oz5b8u{z-index:1200;}@media (min-width:0px){.mui-1oz5b8u{display:block;}}@media (min-width:600px){.mui-1oz5b8u{display:none;}}.mui-1oz5b8u .MuiDrawer-paper{box-sizing:border-box;width:240px;color:#fff;background-color:#1976d2;}.mui-1gychr7{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:16px;padding-right:16px;padding:1rem;word-wrap:break-word;}@media (min-width:600px){.mui-1gychr7{padding-left:24px;padding-right:24px;}}@media (min-width:1200px){.mui-1gychr7{max-width:1200px;}}.mui-kxijxt{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;width:100%;border-radius:8px;border:1px solid;border-color:rgba(0, 0, 0, 0.12);padding:0.5rem;}.mui-wfm2y7{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;color:rgba(0, 0, 0, 0.6);}.mui-51eq8m{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0;margin:0;list-style:none;}.mui-1ttcndq{-webkit-text-decoration:none;text-decoration:none;color:inherit;}.mui-1ttcndq:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-ub0mep{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;-webkit-text-decoration:none;text-decoration:none;color:inherit;}.mui-ub0mep:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-1nd5pgh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:8px;margin-right:8px;}.mui-ihsi0z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%;box-sizing:border-box;text-align:left;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;padding-top:0px;padding-bottom:0px;}.mui-14rdsw0{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;min-width:0;margin-top:4px;margin-bottom:4px;}.MuiTypography-root:where(.mui-14rdsw0 .MuiListItemText-primary){display:block;}.MuiTypography-root:where(.mui-14rdsw0 .MuiListItemText-secondary){display:block;}.mui-fyswvn{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:400;font-size:1rem;line-height:1.5;letter-spacing:0.00938em;}</style></head><body><header><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionStatic mui-w6pz14" style="--Paper-shadow:0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12)"><div class="MuiToolbar-root MuiToolbar-gutters MuiToolbar-regular mui-awgou1"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeStart MuiIconButton-sizeMedium mui-1mm3lge" tabindex="0" type="button" id=":R1l5nb:" aria-label="open drawer"><span class="MuiIconButton-loadingIndicator mui-1dya3jy"></span><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path></svg></button><div class="MuiTypography-root MuiTypography-h6 mui-1myx5lw">CAE</div><div class="MuiBox-root mui-130f8nx"><div class="MuiBox-root mui-6n7j50"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" id=":R8rl5nb:" href="/cae-theory">Home</a></div><div class="MuiBox-root mui-6n7j50"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" id=":R9bl5nb:" href="/cae-theory/intro">Intro</a></div><div class="MuiBox-root mui-6n7j50"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" type="button" id=":Rprl5nb:">Qualité</button></div><div class="MuiBox-root mui-6n7j50"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" type="button" id=":Rqbl5nb:">Itération 2</button></div><div class="MuiBox-root mui-6n7j50"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit MuiButton-root MuiButton-text MuiButton-textInherit MuiButton-sizeMedium MuiButton-textSizeMedium MuiButton-colorInherit mui-o34szc" tabindex="0" id=":Rarl5nb:" href="/cae-theory/about">About</a></div></div></div></header><nav></nav></header><div class="MuiContainer-root MuiContainer-maxWidthLg mui-1gychr7"><ul class="MuiList-root MuiList-padding mui-kxijxt"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-q7mezt" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="HighlightOffIcon"><path d="M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"></path></svg><nav class="MuiTypography-root MuiTypography-body1 MuiBreadcrumbs-root mui-wfm2y7" aria-label="breadcrumb"><ol class="MuiBreadcrumbs-ol mui-51eq8m"><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="/cae-theory"> CAE </a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator mui-1nd5pgh">/</li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="/cae-theory/quality"> Qualité </a></li><li aria-hidden="true" class="MuiBreadcrumbs-separator mui-1nd5pgh">/</li><li class="MuiBreadcrumbs-li"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#"> Tests e2e </a></li></ol></nav><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_gerer_des_tests_de_bout_en_bout"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment gérer des tests de bout en bout ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_mettre_en_place_les_tests_e_2_e_avec_playwright"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment mettre en place les tests e2e avec Playwright ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#ou_enregistrer_les_specifications_de_test"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Où enregistrer les spécifications de test ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_tester_une_application_web_avec_playwright"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment tester une application web avec Playwright ?  </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_sassurer_de_letat_de_lapplication_avant_de_commencer_les_tests"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment s&#x27;assurer de l&#x27;état de l&#x27;application avant de commencer les tests ?  </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_gerer_les_duplications_de_code_dans_les_tests"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment gérer les duplications de code dans les tests ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_ecrire_des_tests_e_2_e_de_qualite"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment écrire des tests e2e de qualité ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_integrer_les_tests_e_2_e_dans_le_pipeline_de_ci"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment intégrer les tests e2e dans le pipeline de CI ? </span></div></a></div><div class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-ihsi0z"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-ub0mep" href="#comment_utiliser_le_cache_de_git_lab_ci"><div class="MuiListItemText-root mui-14rdsw0"><span class="MuiTypography-root MuiTypography-body1 MuiListItemText-primary mui-fyswvn"> Comment utiliser le cache de GitLab CI ? </span></div></a></div></ul>
<h1><a id="comment_gerer_des_tests_de_bout_en_bout"> Comment gérer des tests de bout en bout ? </a></h1>
<h2>Introduction</h2>
<p>Les tests de bout en bout (e2e) sont des tests qui simulent le comportement d&#x27;un utilisateur sur une application. Ils permettent de vérifier que l&#x27;application fonctionne correctement dans son ensemble, en testant l&#x27;interaction entre les différentes parties de l&#x27;application.</p>
<p>Pour pouvoir gérer efficacement les tests e2e, il est important de suivre quelques bonnes pratiques :</p>
<ul>
<li><strong>Définir une stratégie de test</strong> : Avant de commencer à écrire des tests e2e, il est important de définir une stratégie de test qui détermine quels scénarios seront testés et comment ils seront testés.</li>
<li><strong>Utiliser des outils adaptés</strong> : Il existe de nombreux outils pour écrire des tests e2e, comme Playwright, Cypress, Selenium ou Puppeteer. Il est important de choisir l&#x27;outil qui convient le mieux à votre projet.</li>
<li><strong>Écrire des tests robustes</strong> : Les tests e2e doivent être robustes et fiables. Il est important de s&#x27;assurer qu&#x27;ils sont capables de détecter les erreurs et les problèmes potentiels dans l&#x27;application.</li>
<li><strong>Automatiser les tests</strong> : Les tests e2e doivent être automatisés pour pouvoir être exécutés régulièrement et rapidement. Il est important de les intégrer dans votre pipeline CI/CD.</li>
<li><strong>Suivre les bonnes pratiques de développement</strong> : Comme pour les autres types de tests, il est important de suivre les bonnes pratiques de développement pour écrire des tests e2e de qualité.</li>
</ul>
<p>Pour ce cours, nous avons choisi l&#x27;outil <strong>Playwright</strong> pour écrire nos tests e2e. Playwright est un outil moderne et puissant qui permet d&#x27;écrire des tests e2e pour les applications web et mobiles. Il offre de nombreuses fonctionnalités avancées, comme la prise en charge des applications PWA, des tests parallèles et la possibilité de tester sur plusieurs navigateurs.</p>
<h2>Comment définir une stratégie de test e2e ?</h2>
<h3>Introduction</h3>
<p>Avant de commencer à écrire des tests e2e, il est important de définir une stratégie de test qui détermine quels scénarios seront testés et comment ils seront testés. Voici quelques étapes à suivre pour définir une stratégie de test e2e :</p>
<ul>
<li><strong>Identifier les scénarios à tester</strong> : Commencez par identifier les scénarios les plus importants de votre application. Il peut s&#x27;agir de scénarios critiques pour le bon fonctionnement de l&#x27;application, de scénarios qui couvrent les fonctionnalités les plus utilisées par les utilisateurs, ou de scénarios qui ont été à l&#x27;origine de bugs dans le passé.</li>
<li><strong>Déterminer les cas de test</strong> : Pour chaque scénario identifié, déterminez les cas de test (&quot;test cases&quot; en anglais) à exécuter. Un cas de test est une séquence d&#x27;actions qui permet de vérifier le bon fonctionnement d&#x27;une fonctionnalité de l&#x27;application.</li>
</ul>
<h3>Identification des scénarios à tester</h3>
<p>Un scénario de test décrit une situation ou un flux d&#x27;utilisation spécifique que vous souhaitez tester. Il se concentre sur les actions de l&#x27;utilisateur et les résultats attendus de manière générale.</p>
<p>Pour identifier les scénarios à tester, nous vous recommandons cette approche :</p>
<ul>
<li><strong>Identification des cas d&#x27;utilisation</strong> : Commencez par identifier les cas d&#x27;utilisation de votre application. Un cas d&#x27;utilisation est une description d&#x27;une interaction entre un utilisateur et l&#x27;application, c&#x27;est une fonctionnalité offerte par votre application.</li>
<li><strong>Priorisation des cas d&#x27;utilisation</strong> : Priorisez les cas d&#x27;utilisation en fonction de leur importance pour l&#x27;application. Vous pouvez utiliser des critères comme la criticité, la fréquence d&#x27;utilisation, ou l&#x27;impact sur l&#x27;expérience utilisateur.</li>
<li><strong>Définition des scénarios de test</strong> : Pour chaque cas d&#x27;utilisation priorisé, définissez un ou plusieurs scénarios de test qui couvrent les différentes étapes de l&#x27;interaction entre l&#x27;utilisateur et l&#x27;application.</li>
</ul>
<p>Par exemple, pour tester le cas d&#x27;utilisation &quot;Créer un compte utilisateur&quot;, vous pourriez définir les scénarios de test suivants :</p>
<ul>
<li><strong>Scénario 1</strong> : L&#x27;utilisateur saisit son username et son mot de passe, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait être redirigé vers la homepage.</li>
<li><strong>Scénario 2</strong> : L&#x27;utilisateur saisit un username déjà existant, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait voir un message d&#x27;erreur indiquant que le username est déjà pris.</li>
<li><strong>Scénario 3</strong> : L&#x27;utilisateur saisit un username valide et un mot de passe invalide, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait voir un message d&#x27;erreur.</li>
</ul>
<h3>Détermination des cas de test</h3>
<p>Un cas de test est une instance spécifique d&#x27;un scénario de test. Il inclut des données d&#x27;entrée précises, des actions détaillées, et des résultats attendus. Un scénario de test peut avoir plusieurs cas de test pour couvrir différentes variations et conditions.</p>
<p>Pour chaque scénario identifié, déterminez les cas de test à exécuter.</p>
<p>Pour couvrir les tests du cas d&#x27;utilisation &quot;Créer un compte utilisateur&quot;, vous pourriez définir les cas de test suivants :</p>
<h4>Scénario 1 : L&#x27;utilisateur saisit son username et son mot de passe, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait être redirigé vers la homepage.</h4>
<ul>
<li><strong>Cas de test 1.1</strong> : Saisir un username et un mot de passe valides, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur est redirigé vers la homepage.</li>
</ul>
<h4>Scénario 2 : L&#x27;utilisateur saisit un username déjà existant, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait voir un message d&#x27;erreur indiquant que le username est déjà pris.</h4>
<ul>
<li><strong>Cas de test 2.1</strong> : Saisir un username déjà existant et un mot de passe valide, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur voit un message d&#x27;erreur indiquant que le username est déjà pris.</li>
<li><strong>Cas de test 2.2</strong> : Saisir un username déjà existant et laisser le champ mot de passe vide, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur voit un message d&#x27;erreur indiquant que le mot de passe est requis.</li>
</ul>
<h4>Scénario 3 : L&#x27;utilisateur saisit un username valide et un mot de passe invalide, puis clique sur le bouton &quot;Créer un compte&quot;. Il devrait voir un message d&#x27;erreur.</h4>
<ul>
<li><strong>Cas de test 3.1</strong> : Saisir un username valide et un mot de passe trop court, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur voit un message d&#x27;erreur indiquant que le mot de passe est trop court.</li>
<li><strong>Cas de test 3.2</strong> : Saisir un username valide et laisser le champ mot de passe vide, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur voit un message d&#x27;erreur indiquant que le mot de passe est requis.</li>
</ul>
<h1><a id="comment_mettre_en_place_les_tests_e_2_e_avec_playwright"> Comment mettre en place les tests e2e avec Playwright ? </a></h1>
<h2>Introduction</h2>
<p>Playwright est un outil moderne et puissant pour écrire des tests e2e pour les applications web et mobiles. Il offre de nombreuses fonctionnalités avancées, comme la prise en charge des applications PWA, des tests parallèles et la possibilité de tester sur plusieurs navigateurs.</p>
<p>Pour mettre en place les tests e2e avec Playwright, vous devez suivre quelques étapes :</p>
<ul>
<li><strong>Installation de Playwright</strong> : Commencez par installer Playwright et les dépendances nécessaires. Pour utiliser Playwright, nous vous recommandons de créer un nouveau projet ; vous pourriez l&#x27;intégrer dans le frontend de votre application, mais nous vous conseillons de le garder séparé pour des raisons de clarté.</li>
<li><strong>Écriture des tests</strong> : Écrivez les tests e2e en utilisant l&#x27;API de Playwright pour simuler le comportement de l&#x27;utilisateur.</li>
</ul>
<h2>Installation des dépendances</h2>
<p>Pour ce tutorial, veuillez créer un nouveau répertoire <code>e2e-tests</code> sur base d&#x27;un copier / coller de <code>ci</code> : <a href="https://github.com/e-vinci/cae-theory-demos/tree/main/ci">ci</a>.</p>
<p>Une fois votre répertoire <code>e2e-tests</code> créé, veuillez démarrer l&#x27;API et le frontend de la pizzeria du projet <code>e2e-tests</code>.</p>
<p>Pour ce tutoriel, au sein du répertoire <code>e2e-tests</code>, nous allons créer un projet de tests e2e avec Playwright et nommer ce projet <code>e2e</code>.<br/>
<!-- -->Pour ce faire, créez un répertoire nommé <code>e2e</code> au sein du répertoire <code>e2e-tests</code> et placez-vous dedans.</p>
<p>Pour utiliser Playwright, vous devez installer les dépendances suivantes au sein de <code>e2e-tests/e2e</code> :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> init playwright@latest
</span></code></pre>
<p>Veuillez suivre les instructions et sélectionnez toutes les options par défaut :</p>
<ul>
<li>le langage de programmation : TypeScript</li>
<li><code>Where to put your end-to-end tests?</code> : <code>tests</code> (c&#x27;est le dossier où seront stockés les tests e2e)</li>
<li><code>Add a GitHub Actions workflow?</code> : false (pour ajouter un workflow GitHub Actions pour exécuter les tests e2e)</li>
<li><code>Install Playwright browsers (can be done manually via &#x27;npx playwright install&#x27;)?</code> : true (pour installer les navigateurs pris en charge par Playwright)</li>
</ul>
<p>Une fois l&#x27;installation terminée, vous devriez voir un nouveau répertoire <code>tests</code> dans votre projet <code>e2e</code> et un fichier <code>playwright.config.ts</code> à la racine du projet.</p>
<p><code>playwright.config.ts</code> : Ce fichier contient la configuration de Playwright pour les tests e2e. Vous pouvez personnaliser cette configuration en fonction de vos besoins, notamment pour définir les navigateurs à utiliser, les options de lancement, ou les paramètres de test.</p>
<p>Le répertoire <code>tests</code> contient un fichier <code>example.spec.ts</code> qui donne un exemple de test e2e avec Playwright. Vous pouvez le modifier ou le supprimer selon vos besoins.</p>
<h2>Exécution des tests</h2>
<h3>Exécution des tests e2e dans le terminal</h3>
<p>Pour exécuter les tests e2e avec Playwright en mode headless, c&#x27;est-à-dire sans interface graphique, vous pouvez utiliser la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">npx playwright <span class="token builtin class-name">test</span>
</span></code></pre>
<p>Les résultats des tests s&#x27;afficheront dans la console, indiquant si les tests ont réussi ou échoué.</p>
<p>Veuillez taper cette commande dans le répertoire <code>e2e</code> de votre projet.</p>
<p>Playwright détecte toutes les spécifications de tests se trouvant dans le répertoire <code>tests</code>.</p>
<p>La seule spécification de test fournie par défaut est <code>example.spec.ts</code> qui contient deux tests. Comme par défaut il y a 3 browsers installés, les tests seront exécutés sur ces 3 navigateurs, à savoir Chromium, Firefox et WebKit.<br/>
<!-- -->C&#x27;est pourquoi, au sein du terminal, vous verrez que 6 tests ont passé. C&#x27;est en fait que 2 tests ont passé avec succès sur chacun des 3 navigateurs.</p>
<h3>Execution des tests e2e dans le mode UI</h3>
<p>Pour exécuter les tests e2e dans le mode UI, vous pouvez utiliser la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">npx playwright <span class="token builtin class-name">test</span> <span class="token parameter variable">--ui</span>
</span></code></pre>
<p>Cette commande ouvre une interface graphique qui vous permet de visualiser les tests en cours d&#x27;exécution et de voir les résultats en temps réel.</p>
<p>Veuillez lancer les tests à l&#x27;aide de l&#x27;UI.</p>
<h3>Exécution de tests au sein de VS Code</h3>
<p>VS Code a une extension Playwright qui permet d&#x27;exécuter les tests e2e directement dans l&#x27;éditeur. Pour utiliser cette extension, vous devez l&#x27;installer à partir du marketplace des extensions de VS Code.<br/>
<!-- -->Pour ce faire, veuillez suivre les étapes suivantes :</p>
<ul>
<li>Ouvrez VS Code</li>
<li>Cliquez sur l&#x27;icône des extensions dans la barre latérale gauche</li>
<li>Recherchez &quot;Playwright&quot; dans la barre de recherche</li>
<li>Cliquez sur &quot;Installer&quot; pour installer l&#x27;extension <code>Playwright Test for VSCode </code></li>
</ul>
<p>Une fois l&#x27;extension installée, vous pouvez configurer et exécuter les tests e2e directement dans VS Code en cliquant sur l&#x27;icône &quot;Testing&quot; dans la barre latérale gauche.</p>
<p>Pour configurer les tests, vous devez cliquer sur l&#x27;onglet &quot;Playwright&quot; dans la barre latérale gauche.</p>
<p>Par exemple, veuillez sélectionner seulement le navigateur Chromium pour exécuter les tests.</p>
<p>Vous pouvez ensuite lancer les tests soit :</p>
<ul>
<li>via le <code>Test Explorer</code> : en cliquant sur le bouton <code>Run Test</code></li>
<li>via le fichier <code>example.spec.ts</code> : en cliquant sur le bouton <code>Run</code> à côté du mot clé <code>test</code> ou <code>describe</code>.</li>
</ul>
<p>Pour en savoir plus, veuillez consulter la documentation : <a href="https://playwright.dev/docs/getting-started-vscode">https://playwright.dev/docs/getting-started-vscode</a></p>
<h2>Rapports de tests au format HTML</h2>
<p>Par défaut, si certains tests échouent, Playwright génère un rapport de tests au format HTML dans le répertoire <code>test-results</code> et ouvre automatiquement ce rapport.</p>
<p>Il est possible de visualiser le rapport de tests en tapant la commande suivante :</p>
<pre class="language-sh"><code class="language-sh code-highlight"><span class="code-line">npx playwright show-report
</span></code></pre>
<p>Une façon de visualiser le rapport de tests est de consulter le fichier <code>playwright-report/index.html</code> dans votre navigateur.</p>
<h1><a id="ou_enregistrer_les_specifications_de_test"> Où enregistrer les spécifications de test ? </a></h1>
<p>Playwright détecte toutes les spécifications de tests se trouvant dans le répertoire <code>tests</code> par défaut. Vous pouvez personnaliser ce répertoire dans le fichier <code>playwright.config.ts</code> en modifiant la propriété <code>testDir</code>.</p>
<p>Vous pouvez ajouter d&#x27;autres spécifications de test en créant de nouveaux fichiers <code>*.spec.ts</code> dans le répertoire <code>tests</code>.</p>
<p>Pour apprendre à écrire des tests e2e avec Playwright, veuillez lire la documentation officielle : <a href="https://playwright.dev/docs/writing-tests">https://playwright.dev/docs/writing-tests</a></p>
<h1><a id="comment_tester_une_application_web_avec_playwright"> Comment tester une application web avec Playwright ? </a></h1>
<h2>Introduction</h2>
<p>Nous souhaitons tester une application web avec Playwright. Pour ce tutorial, nous souhaitons tester la création d&#x27;un compte utilisateur sur une application web.</p>
<p>Pour ce faire, vous devez avoir démarré l&#x27;application web que vous souhaitez tester.
Veuillez démarrer l&#x27;api du site de la pizzeria et le frontend de la pizzeria :</p>
<ul>
<li>Pour l&#x27;API, vous devez d&#x27;abord démarrer la DB localement à l&#x27;aide de Docker Compose (ou Docker Desktop). Veuillez démarrer la dernière version de l&#x27;API en utilisant la commande <code>npm run dev</code> dans le répertoire <code>/e2e-tests/api</code>.</li>
<li>Pour le frontend, vous devez démarrer la dernière version du frontend de la pizzeria en utilisant la commande <code>npm run dev</code> dans le répertoire <code>/e2e-tests/frontend</code>.</li>
</ul>
<h2>Écriture des tests</h2>
<p>Pour tester le register d&#x27;un utilisateur sur une application web, vous pouvez écrire des tests e2e avec Playwright.</p>
<p>Veuillez créer une nouvelle spécification de test dans le répertoire <code>tests</code> de votre projet <code>/e2e-tests/e2e</code> en créant un fichier <code>register.spec.ts</code>.</p>
<p>Nous allons commencer par ce scénario : <code>Scénario 1 - &quot;Register OK&quot; : L&#x27;utilisateur clic sur &quot;Créer un utilisateur&quot;, saisit son username et son mot de passe, puis clique sur le bouton &quot;Créer le compte&quot;. Il devrait être redirigé vers la homepage.</code>.</p>
<p>Pour un scénario donné, vous pouvez définir plusieurs cas de test. Nous allons commencer par ce premier cas de test : <code>Cas de test 1.1 : Naviguer vers &quot;Créer un utilisateur&quot;, saisir un username et un mot de passe valides, puis cliquer sur le bouton &quot;Créer le compte&quot;. Vérifier que l&#x27;utilisateur est redirigé vers la homepage et que l&#x27;on affiche son username</code>.</p>
<p>Voici le code de la spécification de test <code>register.spec.ts</code> pour ce cas de test :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">test<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Register&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC1.1: should register a new user when valid username &amp; password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    page<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">&quot;ananda&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Quelques explications sur ce code :</p>
<ul>
<li><strong><code>test.describe</code></strong> : Cette fonction permet de définir un groupe de tests. Dans notre cas, nous avons un groupe de tests pour tous les scénarios associés au cas d&#x27;utilisation &quot;Créer un compte&quot; (ou &quot;Register&quot;).</li>
<li><strong><code>test</code></strong> : Cette fonction permet de définir un test individuel. Dans notre cas, nous avons un test pour le cas de test 1.1.</li>
<li><strong><code>page.goto</code></strong> : Cette fonction permet de naviguer vers une URL spécifique. Dans notre cas, nous naviguons vers la page d&#x27;accueil de l&#x27;application.</li>
<li><strong><code>page.getByText</code></strong> : Cette fonction permet de sélectionner un élément de la page par son texte. Dans notre cas, nous sélectionnons le bouton &quot;créer un utilisateur&quot;. Par défaut, la recherche est insensible à la casse.</li>
<li><strong><code>expect(page).toHaveURL</code></strong> : Cette fonction permet de vérifier que l&#x27;URL de la page correspond à une valeur spécifique. Dans notre cas, nous vérifions que l&#x27;utilisateur est redirigé vers la page de register.</li>
<li><strong><code>page.getByRole</code></strong> : Cette fonction permet de sélectionner un élément de la page par son rôle. Dans notre cas, nous sélectionnons les champs de texte pour le username et le mot de passe, ainsi que le bouton &quot;Créer le compte&quot;.</li>
<li><strong><code>locator.fill</code></strong> : Cette fonction permet de remplir un champ de texte avec une valeur spécifique. Dans notre cas, nous remplissons les champs de texte avec le username et le mot de passe. Un <code>locator</code> est un objet qui représente un élément de la page.</li>
<li><strong><code>locator.click</code></strong> : Cette fonction permet de cliquer sur un élément de la page. Dans notre cas, nous cliquons sur le bouton &quot;Créer le compte&quot;.</li>
<li><strong><code>expect(page.getByText).toBeVisible</code></strong> : Cette fonction permet de vérifier que l&#x27;élément de la page est visible. Dans notre cas, nous vérifions que le message de bienvenue contenant le username est affiché.</li>
</ul>
<p>Nous avons écrit un test pour le cas de test 1.1. Ce test fonctionne une seule fois pour un username et un mot de passe donnés.<br/>
<!-- -->Comment pourrions-nous écrire un test qui fonctionne à chaque fois ?
Pour ce faire, il faudrait pouvoir supprimer l&#x27;utilisateur créé à la fin du test : nous pourrions, par exemple, utiliser une fonction <strong><code>afterEach</code></strong> qui serait exécutée après chaque test. Cette fonction permettrait de nettoyer l&#x27;état de l&#x27;application après chaque test. Néanmoins, pour supprimer un utilisateur, il faudrait que l&#x27;API de l&#x27;application web permette de supprimer un utilisateur. Ce genre d&#x27;opération est généralement réservé aux administrateurs, elle demanderait donc une authentification. Ce qui est un peu plus complexe à mettre en place.</p>
<p>Pour simplifier, nous pourrions simplement générer un username aléatoire à chaque test. Pour ce faire, nous allons utiliser la librairie <code>faker</code> qui permet de générer des données aléatoires.</p>
<p>Pour installer la librairie <code>faker</code>, veuillez taper la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">npm</span> <span class="token function">install</span> @faker-js/faker <span class="token parameter variable">-D</span>
</span></code></pre>
<p>Toutes les API de <code>faker</code> sont disponibles ici : <a href="https://fakerjs.dev/api/">https://fakerjs.dev/api/</a></p>
<p>Voici le code mis à jour pour le cas de test 1.1 :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="2"><span class="token keyword">import</span> <span class="token punctuation">{</span> faker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@faker-js/faker&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">test<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Register&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC1.1: should register a new user when valid username &amp; password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="8">    <span class="token keyword">const</span> username <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="9">    <span class="token keyword">const</span> password <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">    
</span><span class="code-line line-number" line="21">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Dans ce code, nous utilisons la fonction <strong><code>faker.internet.username()</code></strong> pour générer un username aléatoire et la fonction <strong><code>faker.internet.password()</code></strong> pour générer un mot de passe aléatoire.<br/>
<!-- -->Notons que <code>faker</code> permet de configurer les données générées. Par exemple, pour générer un username sur base d&#x27;un username, vous pouvez utiliser <code>faker.internet.username({firstName:&quot;ananda&quot;})</code>.</p>
<h1><a id="comment_sassurer_de_letat_de_lapplication_avant_de_commencer_les_tests"> Comment s&#x27;assurer de l&#x27;état de l&#x27;application avant de commencer les tests ? </a></h1>
<p>Notons que dans pas mal de tests, on peut considérer qu&#x27;il soit important de démarrer une suite de test avec un état initial connu.</p>
<p>Il existe pas mal de solutions pour obtenir un état initial connu avant de commencer les tests.</p>
<h2>Méthode 1 : Utiliser des hooks de tests et des opérations d&#x27;API</h2>
<h3>Introduction</h3>
<p>Il est possible d&#x27;utiliser des hooks de test comme <strong><code>beforeAll</code></strong> et <strong><code>beforeEach</code></strong> pour réinitialiser la base de données avant chaque suite de tests ou chaque test individuel.</p>
<h3>Utilisation de la fonction <code>beforeAll</code></h3>
<p>On peut utiliser la fonction <strong><code>beforeAll</code></strong> qui permet d&#x27;exécuter une fonction avant le début de la suite de tests. Cette fonction permet de mettre en place l&#x27;état initial de l&#x27;application avant de commencer les tests.<br/>
<!-- -->Par exemple, nous pourrions avoir une fonction de l&#x27;API qui permet de supprimer tous les utilisateurs de la base de données. Cette fonction pourrait être appelée dans la fonction <strong><code>beforeAll</code></strong> pour s&#x27;assurer que la base de données est vide avant de commencer les tests. Attention donc à bien sécuriser cette opération par une authentification JWT et vous assurer que l&#x27;opération n&#x27;est accessible qu&#x27;en environnement de test.</p>
<p>L&#x27;avantage de cette méthode est :</p>
<ul>
<li>que vous pouvez être sûr de l&#x27;état initial de l&#x27;application avant de commencer les tests.</li>
<li>que vous pouvez garantir que les tests sont reproductibles et fiables.</li>
<li>que vous pouvez écrire des cas de tests avec des données précises et connues. Il n&#x27;est pas nécessaire de générer des données aléatoires pour chaque test.</li>
</ul>
<p>L&#x27;inconvénient de cette méthode est :</p>
<ul>
<li>que vous devez vous assurer que l&#x27;état initial de l&#x27;application est cohérent avec les tests que vous souhaitez exécuter. Si l&#x27;état initial de l&#x27;application ne correspond pas aux tests, les tests peuvent échouer.</li>
<li>pas si simple à mettre en place si l&#x27;application est complexe et que l&#x27;état initial dépend de plusieurs facteurs.</li>
</ul>
<h3>Utilisation de la fonction <code>afterEach</code></h3>
<p>Il est possible d&#x27;utiliser la fonction <strong><code>afterEach</code></strong> qui permet d&#x27;exécuter une fonction après chaque test. Cette fonction permet de nettoyer l&#x27;état de l&#x27;application après chaque test.</p>
<p>L&#x27;avantage de cette méthode est :</p>
<ul>
<li>que vous pouvez nettoyer l&#x27;état de l&#x27;application après chaque test pour garantir que les tests sont indépendants les uns des autres.</li>
<li>que vous pouvez éviter les effets de bord et les interactions inattendues entre les tests.</li>
</ul>
<p>L&#x27;inconvénient de cette méthode est :</p>
<ul>
<li>que vous devez vous assurer que le nettoyage de l&#x27;état de l&#x27;application est correctement implémenté. Si le nettoyage n&#x27;est pas correct, les tests peuvent échouer.</li>
<li>que vous devez gérer les cas où le nettoyage de l&#x27;état de l&#x27;application échoue. Si le nettoyage échoue, les tests peuvent échouer.</li>
<li>pas si simple à mettre en place.</li>
</ul>
<h2>Méthode 2 : Utiliser des scripts de réinitialisation de la base de données</h2>
<h3>Introduction</h3>
<p>Il est possible d&#x27;utiliser des scripts de réinitialisation de la base de données pour réinitialiser l&#x27;état de la base de données avant de commencer les tests. Ces scripts peuvent être exécutés manuellement ou automatiquement avant le début des tests.</p>
<h3>Utilisation de scripts de réinitialisation de la base de données</h3>
<p>Nous allons maintenant voir comment mettre à jour l&#x27;API se trouvant dans le dossier <code>api</code> de notre répertoire <code>e2e-tests</code> pour réinitialiser la base de données avant de commencer les tests.</p>
<h4>Fonctionnement actuel de l&#x27;initialisation de la DB</h4>
<p>Le script <strong><code>insert.sql</code></strong> dans le répertoire <strong><code>src/main/resources</code></strong> de l&#x27;API :</p>
<ul>
<li>est exécuté automatiquement par Spring Boot grâce à la configuration de la source de données.</li>
<li>Spring Boot détecte automatiquement les fichiers SQL dans ce répertoire et les exécute au démarrage de l&#x27;application.</li>
</ul>
<p>Voici comment cela fonctionne :</p>
<ul>
<li><strong>Configuration de la source de données</strong> :<!-- -->
<ul>
<li>Dans le fichier <strong><code>application.properties</code></strong>, vous avez configuré les propriétés de la source de données (username, password...), ce qui permet à Spring Boot de se connecter à la base de données.</li>
<li><strong><code>spring.jpa.generate-ddl=true</code></strong> : cette propriété permet à Spring Boot de générer automatiquement le schéma de la base de données à partir des entités JPA.</li>
</ul>
</li>
<li><strong>Exécution automatique des scripts SQL</strong> :<!-- -->
<ul>
<li>Spring Boot, par défaut, exécute les scripts SQL trouvés dans <strong><code>src/main/resources</code></strong> ou <strong><code>src/main/resources/db/migration</code></strong> au démarrage de l&#x27;application <strong>SEULEMENT</strong> pour les bases de données intégrées (par pour PostGres).</li>
<li>Pour exécuter les scripts SQL à chaque démarrage, il faut ajouter la propriété <strong><code>spring.sql.init.mode=always</code></strong> dans le fichier <strong><code>application.properties</code></strong>.</li>
<li>Les fichiers doivent être nommés <strong><code>schema.sql</code></strong> pour les scripts de création de schéma et <strong><code>data.sql</code></strong> pour les scripts d&#x27;insertion de données.</li>
<li>Cependant, il exécutera également tout autre fichier SQL trouvé dans ce répertoire.</li>
<li>Pour laisser d&#x27;abord Spring Boot générer le schéma de la base de données avant d&#x27;exécuter <strong><code>data.sql</code></strong>, il faut ajouter la propriété <strong><code>spring.jpa.defer-datasource-initialization=true</code></strong> dans le fichier <strong><code>application.properties</code></strong>.<br/>
<!-- -->Si cela n&#x27;est pas fait, Spring Boot exécutera <strong><code>data.sql</code></strong> avant de générer le schéma de la base de données, ce qui peut entraîner des erreurs.</li>
</ul>
</li>
</ul>
<p>Veuillez donc mettre à jour le fichier <strong><code>application.properties</code></strong> pour ajouter ces propriétés :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">demo</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://localhost:5432/cae_db</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">cae_user</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">cae</span>
</span><span class="code-line"><span class="token key attr-name">spring.jpa.generate-ddl</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line highlight-line"><span class="token key attr-name">spring.sql.init.mode</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>
</span><span class="code-line highlight-line"><span class="token key attr-name">spring.jpa.defer-datasource-initialization</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span></code></pre>
<p>Pour bien faire, renommez le fichier <strong><code>src/main/resources/insert.sql</code></strong> en <strong><code>src/main/resources/data.sql</code></strong>.</p>
<p>Démarrez l&#x27;API et vérifiez que la base de données est bien initialisée.</p>
<p>Actuellement, à chaque démarrage de l&#x27;API, on insert un utilisateur <code>admin</code> dans la DB.
Voici le contenu actuel du fichier <strong><code>data.sql</code></strong> :</p>
<pre class="language-sql"><code class="language-sql code-highlight"><span class="code-line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">&#x27;admin&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;$2y$10$EW75BdcbCfKEA3NbE7in4OiYYacfP3OY4Q2JsVzjxd3jNxxgAEZNu&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Cela va vite devenir problématique car comme la DB est réinitialisée à chaque démarrage de l&#x27;API, on va se retrouver avec plusieurs utilisateurs <code>admin</code> dans la DB. En effet, <code>username</code> n&#x27;est pas une clé primaire.</p>
<p>Pour réinitialiser la base de données avant de commencer les tests, nous allons modifier le script SQL pour supprimer tous les utilisateurs de la base de données avant d&#x27;en ajouter un.</p>
<p>Veuillez modifier le contenu du fichier <strong><code>data.sql</code></strong> :</p>
<pre class="language-sql"><code class="language-sql code-highlight"><span class="code-line"><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> users<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> users<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">&#x27;admin&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;$2y$10$EW75BdcbCfKEA3NbE7in4OiYYacfP3OY4Q2JsVzjxd3jNxxgAEZNu&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Le problème avec cette approche, c&#x27;est que l&#x27;on ne veut pas réinitialiser la DB à chaque démarrage de l&#x27;API, mais uniquement avant de commencer les tests.<br/>
<!-- -->En effet, imaginez que l&#x27;API soit utilisée en production, on ne veut pas supprimer tous les utilisateurs à chaque démarrage de l&#x27;API 😱.</p>
<h4>Réinitialisation de la base de données avant de commencer les tests</h4>
<p>Pour ce tutoriel, nous allons créer deux configurations pour l&#x27;API : une configuration pour l&#x27;environnement de production et une configuration pour l&#x27;environnement de test.</p>
<p>Pour ce faire, veuillez créer un nouveau fichier <strong><code>application-test.properties</code></strong> dans le répertoire <strong><code>src/main/resources</code></strong> :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">demo</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://localhost:5432/cae_db</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">cae_user</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">cae</span>
</span><span class="code-line"><span class="token key attr-name">spring.jpa.generate-ddl</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line highlight-line"><span class="token key attr-name">spring.sql.init.mode</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>
</span><span class="code-line highlight-line"><span class="token key attr-name">spring.jpa.defer-datasource-initialization</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span></code></pre>
<p>Nous allons mettre à jour le fichier <strong><code>application.properties</code></strong> pour qu&#x27;il n&#x27;utilise jamais de script SQL pour initialiser la base de données :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.application.name</span><span class="token punctuation">=</span><span class="token value attr-value">demo</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://localhost:5432/cae_db</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">cae_user</span>
</span><span class="code-line"><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">cae</span>
</span><span class="code-line"><span class="token key attr-name">spring.jpa.generate-ddl</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</span><span class="code-line highlight-line"><span class="token key attr-name">spring.sql.init.mode</span><span class="token punctuation">=</span><span class="token value attr-value">never</span>
</span></code></pre>
<p>Si nous redémarrons l&#x27;application maintenant via la configuration nommée <strong><code>DemoApplication</code></strong> au sein d&#x27;IntelliJ, la base de données ne sera pas réinitialisée.</p>
<p>De même, si nous exécutons cette commande :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean spring-boot:run
</span></code></pre>
<p>La base de données ne sera pas réinitialisée.</p>
<p>Pour réinitialiser la base de données avant de commencer les tests, nous pouvons activer le profile de tests dans la commande de lancement de Spring Boot :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean spring-boot:run -Dspring-boot.run.profiles<span class="token operator">=</span>test
</span></code></pre>
<p>C&#x27;est donc cette commande que nous allons utiliser pour démarrer l&#x27;API avant de commencer les tests.</p>
<p>Une autre possibilité, c&#x27;est de générer un package JAR exécutable et de lancer l&#x27;application avec le profile de tests :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean package
</span><span class="code-line"><span class="token function">java</span> <span class="token parameter variable">-jar</span> ./target/cae-exercices-demo-0.0.1-SNAPSHOT.jar <span class="token parameter variable">--spring.profiles.active</span><span class="token operator">=</span>test
</span></code></pre>
<p>Si vous lancez l&#x27;application avec le JAR, il est possible que le nom du fichier soit différent. Veuillez vérifier le nom du fichier généré dans le répertoire <strong><code>target</code></strong>.</p>
<h1><a id="comment_gerer_les_duplications_de_code_dans_les_tests"> Comment gérer les duplications de code dans les tests ? </a></h1>
<h2>Introduction</h2>
<p>Il est important de gérer les duplications de code dans les tests pour éviter la répétition et améliorer la maintenabilité des tests. Les duplications de code peuvent rendre les tests difficiles à lire, à maintenir et à déboguer.</p>
<p>Il existe plusieurs techniques pour gérer les duplications de code dans les tests :</p>
<ul>
<li><strong>Utiliser des fonctions utilitaires</strong> : Créez des fonctions utilitaires pour les actions répétitives dans les tests. Ces fonctions peuvent être réutilisées dans plusieurs tests pour éviter la duplication de code.</li>
<li><strong>Utiliser des fonctions de setup et de teardown</strong> : Utilisez des fonctions de setup et de teardown pour les actions qui doivent être exécutées avant et après les tests. Ces fonctions permettent de réduire la duplication de code en centralisant les actions communes. Ces fonctions sont : <strong><code>beforeEach</code></strong>, <strong><code>afterEach</code></strong>, <strong><code>beforeAll</code></strong> et <strong><code>afterAll</code></strong>.</li>
<li><strong>Utiliser des fixtures</strong> : Créez des fixtures pour les données et les états de l&#x27;application qui sont utilisés dans plusieurs tests. Les fixtures permettent de centraliser les données et les états de l&#x27;application pour éviter la duplication de code. N&#x27;hésitez pas à consulter la documentation de Playwright pour en savoir plus sur les fixtures : <a href="https://playwright.dev/docs/test-fixtures">https://playwright.dev/docs/test-fixtures</a></li>
</ul>
<h2>Suite des tests pour le register</h2>
<p>Nous allons voir comment gérer les duplications de code dans les tests pour le register d&#x27;un utilisateur sur une application web.</p>
<p>Nous allons commencer par ce scénario : <code>Scénario 2 - &quot;Register KO&quot; : L&#x27;utilisateur clic sur &quot;Créer un utilisateur&quot;, saisit un username déjà existant, puis clique sur le bouton &quot;Créer le compte&quot;. Il devrait voir un message d&#x27;erreur indiquant que le username est déjà pris.</code>.</p>
<p>Nous allons commencer par ce cas de test : <code>Cas de test 2.1 : Saisir un username déjà existant et un mot de passe valide, puis cliquer sur le bouton &quot;Créer un compte&quot;. Vérifier que l&#x27;utilisateur voit un message d&#x27;erreur indiquant que le username est déjà pris.</code></p>
<p>Ici, l&#x27;UI ne permet actuellement pas d&#x27;afficher un message d&#x27;erreur si le username est déjà pris. Néanmoins, un message d&#x27;erreur est affiché dans la console du navigateur à l&#x27;aide de <strong><code>console.error()</code></strong>.</p>
<p>Voici le code la <strong><code>RegisterPage</code></strong> :</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token maybe-class-name">SyntheticEvent</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    e<span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">await</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&#x27;/&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;RegisterPage::error: &#x27;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Nous savons que lorsqu&#x27;un utilisateur est déjà présent dans l&#x27;API, un message d&#x27;erreur est affiché dans la console du navigateur qui affichera le HTTP status code 409.</p>
<p>Nous allons donc vérifier que ce message d&#x27;erreur est bien affiché dans la console du navigateur.</p>
<p>Pensez à bien réinitialiser la base de données avant de commencer les tests. Pour ce faire, dans le répertoire <code>/e2e-tests/api</code>, veuillez redémarrer l&#x27;API avec la commande suivante :</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">mvn clean spring-boot:run -Dspring-boot.run.profiles<span class="token operator">=</span>test
</span></code></pre>
<p>Pensez aussi a bien garder le frontend de la pizzeria en exécution.</p>
<p>Voici le code de la spécification de test <code>register.spec.ts</code> que vous devez mettre à jour pour ce cas de test :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token punctuation">{</span> faker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@faker-js/faker&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">test<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Register&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC1.1: should register a new user when valid username &amp; password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">    <span class="token keyword">const</span> username <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">    <span class="token keyword">const</span> password <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="23">
</span><span class="code-line line-number highlight-line" line="24">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC2.1: should not register a new user when existing username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="25">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="26">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="27">    <span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">&quot;farina&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="28">    <span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token string">&quot;farinapwd&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="29">
</span><span class="code-line line-number highlight-line" line="30">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="31">
</span><span class="code-line line-number highlight-line" line="32">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="33">
</span><span class="code-line line-number highlight-line" line="34">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="35">
</span><span class="code-line line-number highlight-line" line="36">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="37">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="38">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="39">
</span><span class="code-line line-number highlight-line" line="40">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="41">
</span><span class="code-line line-number highlight-line" line="42">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;se déconnecter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="43">
</span><span class="code-line line-number highlight-line" line="44">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="45">
</span><span class="code-line line-number highlight-line" line="46">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="47">
</span><span class="code-line line-number highlight-line" line="48">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="49">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="50">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="51">
</span><span class="code-line line-number highlight-line" line="52">    <span class="token comment">// Check in the console for the error message</span>
</span><span class="code-line line-number highlight-line" line="53">    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForEvent</span><span class="token punctuation">(</span>
</span><span class="code-line line-number highlight-line" line="54">      <span class="token string">&quot;console&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="55">      <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> msg<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;error&quot;</span>
</span><span class="code-line line-number highlight-line" line="56">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="57">
</span><span class="code-line line-number highlight-line" line="58">    <span class="token comment">// Check for specific error message</span>
</span><span class="code-line line-number highlight-line" line="59">    <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;409&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="60">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="61"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p><strong><code>page.waitForEvent</code></strong> permet d&#x27;attendre un événement donné. Dans notre cas, nous attendons un événement de type <strong><code>console</code></strong>. Nous vérifions ensuite que le message d&#x27;erreur contient le code d&#x27;erreur <strong><code>409</code></strong>.</p>
<p>Nous voyons qu&#x27;il y a pas mal de duplications de code dans les tests. Nous allons voir comment gérer ces duplications de code.</p>
<p>Attention, ces deux cas créent deux utilisateurs dans la base de données. Le deuxième scénario de test crée une utilisatrice <code>farina</code> et le premier scénario de test crée un utilisateur aléatoire. Il est donc possible que le deuxième scénario de test échoue si l&#x27;utilisateur <code>farina</code> est déjà présent dans la base de données. Cela va arriver si vous exécutez les tests sur les 3 browsers en même temps. Pour éviter cela, vous pouvez exécuter les tests sur un seul browser à la fois.</p>
<h2>Configuration d&#x27;un seul browser</h2>
<p>Pour exécuter les tests sur un seul browser, vous pouvez modifier la propriété <strong><code>projects</code></strong> dans le fichier <strong><code>playwright.config.ts</code></strong> :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">//...</span>
</span><span class="code-line"> projects<span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      name<span class="token operator">:</span> <span class="token string">&#x27;chromium&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      use<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>devices<span class="token punctuation">[</span><span class="token string">&#x27;Desktop Chrome&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span></code></pre>
<h2>Utilisation de fonctions utilitaires</h2>
<p>Nous allons commencer par extraire le code commun dans deux fonctions utilitaires.<br/>
<!-- -->Pour ce faire, veuillez créer un nouveau fichier <code>helper.ts</code> dans le répertoire <code>tests</code> de votre projet <code>e2e</code> et y ajouter le code suivant :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Page<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">goFromHomePageToRegisterPage</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>page<span class="token operator">:</span> Page<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;créer un utilisateur&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveURL</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5173/register&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">registerWith</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>page<span class="token operator">:</span> Page<span class="token punctuation">,</span> username<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> password<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;username&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;textbox&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByRole</span><span class="token punctuation">(</span><span class="token string">&quot;button&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Créer le compte&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token punctuation">{</span> registerWith<span class="token punctuation">,</span> goFromHomePageToRegisterPage <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Dans ce code, nous avons créé deux fonctions utilitaires :</p>
<ul>
<li><strong><code>goFromHomePageToRegisterPage</code></strong> : Cette fonction permet de naviguer de la HomePage à la page de register.</li>
<li><strong><code>registerWith</code></strong> : Cette fonction permet de remplir les champs de texte pour le username et le mot de passe, puis de cliquer sur le bouton &quot;Créer le compte&quot;.</li>
</ul>
<p>Nous allons maintenant mettre à jour les tests pour utiliser ces fonctions utilitaires. Voici le code mis à jour de la spécification de test <code>register.spec.ts</code> :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token punctuation">{</span> faker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@faker-js/faker&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="3"><span class="token keyword">import</span> <span class="token punctuation">{</span> goFromHomePageToRegisterPage<span class="token punctuation">,</span> registerWith <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./helper&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">test<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Register&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC1.1: should register a new user when valid username &amp; password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="9">    <span class="token function">goFromHomePageToRegisterPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">    <span class="token keyword">const</span> username <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">const</span> password <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="13">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC2.1: should not register a new user when existing username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number" line="20">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="21">    <span class="token function">goFromHomePageToRegisterPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23">    <span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">&quot;farina&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">    <span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token string">&quot;farinapwd&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="25">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number" line="29">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;se déconnecter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">
</span><span class="code-line line-number highlight-line" line="31">    <span class="token function">goFromHomePageToRegisterPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">
</span><span class="code-line line-number" line="33">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35">    <span class="token comment">// Check in the console for the error message</span>
</span><span class="code-line line-number" line="36">    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForEvent</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="37">      <span class="token string">&quot;console&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="38">      <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> msg<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;error&quot;</span>
</span><span class="code-line line-number" line="39">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="40">
</span><span class="code-line line-number" line="41">    <span class="token comment">// Check for specific error message</span>
</span><span class="code-line line-number" line="42">    <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;409&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="43">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h2>Utilisation de fonctions de setup et de teardown</h2>
<p>Nous allons maintenant voir comment utiliser une fonction de setup pour réduire les duplications de code dans les tests.</p>
<p>Dans les deux cas de test que nous avons écrits, et dans tous les cas de tests associé au register, nous devons à chaque fois nous rendre sur la HomePage, cliquer sur &quot;créer un utilisateur&quot;, puis nous rendre sur la page de register.</p>
<p>Nous allons donc utiliser une fonction de setup pour effectuer ces actions avant chaque test. Pour ce faire, nous allons utiliser la fonction <strong><code>beforeEach</code></strong> de Playwright.</p>
<p>Voici le code mis à jour de la spécification de test <code>register.spec.ts</code> :</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">import</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> expect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@playwright/test&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">import</span> <span class="token punctuation">{</span> faker <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@faker-js/faker&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token punctuation">{</span> goFromHomePageToRegisterPage<span class="token punctuation">,</span> registerWith <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./helper&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number highlight-line" line="5">test<span class="token punctuation">.</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Register&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="6">  test<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> page <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="7">    <span class="token function">goFromHomePageToRegisterPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number highlight-line" line="8">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC1.1: should register a new user when valid username &amp; password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="12">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="13">    <span class="token keyword">const</span> username <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">    <span class="token keyword">const</span> password <span class="token operator">=</span> faker<span class="token punctuation">.</span>internet<span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number highlight-line" line="20">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;TC2.1: should not register a new user when existing username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="21">    page<span class="token punctuation">,</span>
</span><span class="code-line line-number highlight-line" line="22">  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number highlight-line" line="23">    <span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">&quot;farina&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="24">    <span class="token keyword">const</span> password <span class="token operator">=</span> <span class="token string">&quot;farinapwd&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27">    <span class="token keyword">await</span> <span class="token function">expect</span><span class="token punctuation">(</span>page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello dear </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number" line="29">    <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&quot;se déconnecter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="30">
</span><span class="code-line line-number" line="31">    <span class="token function">goFromHomePageToRegisterPage</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">
</span><span class="code-line line-number" line="33">    <span class="token keyword">await</span> <span class="token function">registerWith</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35">    <span class="token comment">// Check in the console for the error message</span>
</span><span class="code-line line-number" line="36">    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">waitForEvent</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="37">      <span class="token string">&quot;console&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="38">      <span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> msg<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;error&quot;</span>
</span><span class="code-line line-number" line="39">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="40">
</span><span class="code-line line-number" line="41">    <span class="token comment">// Check for specific error message</span>
</span><span class="code-line line-number" line="42">    <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;409&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="43">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="44"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Dans ce code, nous avons utilisé la fonction <strong><code>test.beforeEach</code></strong> pour exécuter la fonction <strong><code>goFromHomePageToRegisterPage</code></strong> avant chaque test. Cette fonction permet de réduire les duplications de code en centralisant les actions communes.
De plus, elle permet de <strong>garantir que les tests commencent dans un état connu et cohérent</strong>.</p>
<h1><a id="comment_ecrire_des_tests_e_2_e_de_qualite"> Comment écrire des tests e2e de qualité ? </a></h1>
<p>Nous vous conseillons de suivre les bonnes pratiques de développement pour écrire des tests e2e de qualité. Voici quelques conseils pour écrire des tests e2e robustes et fiables :</p>
<ul>
<li><strong>Utiliser des sélecteurs CSS spécifiques</strong> : Utilisez des sélecteurs CSS spécifiques pour cibler les éléments de l&#x27;application que vous souhaitez tester. Évitez d&#x27;utiliser des sélecteurs basés sur la position des éléments dans la page, car ils sont plus susceptibles de changer.</li>
<li><strong>Gérer les attentes</strong> : Gérez les attentes dans vos tests e2e en utilisant des fonctions d&#x27;attente ou des assertions pour vérifier que les éléments de l&#x27;application sont dans l&#x27;état attendu.</li>
<li><strong>Nettoyer l&#x27;état de l&#x27;application</strong> : Assurez-vous de nettoyer l&#x27;état de l&#x27;application entre chaque test pour éviter les effets de bord et les interactions inattendues entre les tests.</li>
</ul>
<p>Dans les prochaines sections, nous verrons comment intégrer les tests e2e dans notre pipeline CI/CD pour garantir la qualité de nos applications.</p>
<h1><a id="comment_integrer_les_tests_e_2_e_dans_le_pipeline_de_ci"> Comment intégrer les tests e2e dans le pipeline de CI ? </a></h1>
<h2>Introduction</h2>
<p>Il est important d&#x27;intégrer les tests e2e dans le pipeline de CI pour garantir la qualité de l&#x27;application et détecter les problèmes le plus tôt possible. Les tests e2e permettent de valider le bon fonctionnement de l&#x27;application dans son ensemble et de vérifier que les différentes parties de l&#x27;application interagissent correctement.</p>
<p>Dans la suite du tutoriel <code>e2e-tests</code>, nous allons voir comment intégrer les tests e2e avec Playwright dans le pipeline de CI à l&#x27;aide de GitLab CI.</p>
<p>Pour ce faire, veuillez reprendre le repository de votre projet GitLab personnel (ou de votre projet GitLab associé à un groupe pour un ou une membre d&#x27;un groupe d&#x27;étudiants Vinci) et suivre les étapes suivantes.</p>
<p>Veuillez copier / coller votre répertoire <code>e2e</code> créé au tutoriel précédent (dont le chemin est <code>e2e-tests/e2e</code>) à la racine du repository de votre projet GitLab. N&#x27;oubliez pas que vous devez pousser des modifications à partir d&#x27;une nouvelle branche.<br/>
<!-- -->A vous de jouer donc, de choisir un nom de branche.</p>
<h2>Configuration de GitLab CI</h2>
<p>Dans le repository de votre projet GitLab, voici le contenu actuel du fichier <code>.gitlab-ci.yml</code> :</p>
<pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token key atrule">api test</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> maven<span class="token punctuation">:</span>3.9.9<span class="token punctuation">-</span>amazoncorretto<span class="token punctuation">-</span><span class="token number">21</span>
</span><span class="code-line">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> cd api
</span><span class="code-line">    <span class="token punctuation">-</span> mvn clean test
</span><span class="code-line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> api/target/reports/
</span><span class="code-line">      <span class="token punctuation">-</span> api/target/site/
</span><span class="code-line">      <span class="token punctuation">-</span> api/target/surefire<span class="token punctuation">-</span>reports/
</span><span class="code-line">
</span><span class="code-line"><span class="token key atrule">frontend test</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">20</span>
</span><span class="code-line">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token punctuation">-</span> cd frontend
</span><span class="code-line">    <span class="token punctuation">-</span> npm install
</span><span class="code-line">    <span class="token punctuation">-</span> npm run lint
</span><span class="code-line">    <span class="token punctuation">-</span> npm run coverage
</span><span class="code-line">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> frontend/coverage/
</span></code></pre>
<p>Veuillez mettre à jour le fichier <code>.gitlab-ci.yml</code> et y ajouter le code suivant :</p>
<pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line line-number highlight-line" line="1"><span class="token key atrule">stages</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="2">  <span class="token punctuation">-</span> test
</span><span class="code-line line-number highlight-line" line="3">  <span class="token punctuation">-</span> e2e
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token key atrule">api test</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="6">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
</span><span class="code-line line-number" line="7">  <span class="token key atrule">image</span><span class="token punctuation">:</span> maven<span class="token punctuation">:</span>3.9.9<span class="token punctuation">-</span>amazoncorretto<span class="token punctuation">-</span><span class="token number">21</span>
</span><span class="code-line line-number" line="8">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="9">    <span class="token punctuation">-</span> cd api
</span><span class="code-line line-number" line="10">    <span class="token punctuation">-</span> mvn clean test
</span><span class="code-line line-number" line="11">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="12">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="13">      <span class="token punctuation">-</span> api/target/reports/
</span><span class="code-line line-number" line="14">      <span class="token punctuation">-</span> api/target/site/
</span><span class="code-line line-number" line="15">      <span class="token punctuation">-</span> api/target/surefire<span class="token punctuation">-</span>reports/
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17"><span class="token key atrule">frontend test</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="18">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
</span><span class="code-line line-number" line="19">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">20</span>
</span><span class="code-line line-number" line="20">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="21">    <span class="token punctuation">-</span> cd frontend
</span><span class="code-line line-number" line="22">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number" line="23">    <span class="token punctuation">-</span> npm run lint
</span><span class="code-line line-number" line="24">    <span class="token punctuation">-</span> npm run coverage
</span><span class="code-line line-number" line="25">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="26">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="27">      <span class="token punctuation">-</span> frontend/coverage/
</span><span class="code-line line-number" line="28">
</span><span class="code-line line-number highlight-line" line="29"><span class="token key atrule">e2e tests</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="30">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> e2e
</span><span class="code-line line-number highlight-line" line="31">  <span class="token key atrule">image</span><span class="token punctuation">:</span> mcr.microsoft.com/playwright<span class="token punctuation">:</span>v1.50.0<span class="token punctuation">-</span>jammy
</span><span class="code-line line-number highlight-line" line="32">  <span class="token key atrule">services</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="33">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>dind
</span><span class="code-line line-number highlight-line" line="34">  <span class="token key atrule">variables</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="35">    <span class="token key atrule">DOCKER_HOST</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span>//docker<span class="token punctuation">:</span><span class="token number">2375</span>
</span><span class="code-line line-number highlight-line" line="36">  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>   
</span><span class="code-line line-number highlight-line" line="37">    <span class="token punctuation">-</span> apt update <span class="token punctuation">-</span>y
</span><span class="code-line line-number highlight-line" line="38">    <span class="token punctuation">-</span> wget https<span class="token punctuation">:</span>//download.oracle.com/java/21/latest/jdk<span class="token punctuation">-</span>21_linux<span class="token punctuation">-</span>x64_bin.deb
</span><span class="code-line line-number highlight-line" line="39">    <span class="token punctuation">-</span> apt install ./jdk<span class="token punctuation">-</span>21_linux<span class="token punctuation">-</span>x64_bin.deb
</span><span class="code-line line-number highlight-line" line="40">    <span class="token punctuation">-</span> apt install <span class="token punctuation">-</span>y maven docker<span class="token punctuation">-</span>compose<span class="token punctuation">-</span>v2
</span><span class="code-line line-number highlight-line" line="41">    <span class="token punctuation">-</span> docker compose <span class="token punctuation">-</span>f api/docker<span class="token punctuation">-</span>compose.yaml up <span class="token punctuation">-</span><span class="token punctuation">-</span>build <span class="token punctuation">-</span>d
</span><span class="code-line line-number highlight-line" line="42">    <span class="token punctuation">-</span> sleep 5
</span><span class="code-line line-number highlight-line" line="43">    <span class="token punctuation">-</span> cd api
</span><span class="code-line line-number highlight-line" line="44">    <span class="token punctuation">-</span> mvn clean spring<span class="token punctuation">-</span>boot<span class="token punctuation">:</span>run <span class="token punctuation">-</span>Dspring<span class="token punctuation">-</span>boot.run.profiles=test &amp;
</span><span class="code-line line-number highlight-line" line="45">    <span class="token punctuation">-</span> sleep 30
</span><span class="code-line line-number highlight-line" line="46">    <span class="token punctuation">-</span> cd ../frontend
</span><span class="code-line line-number highlight-line" line="47">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number highlight-line" line="48">    <span class="token punctuation">-</span> npm run dev &amp;
</span><span class="code-line line-number highlight-line" line="49">    <span class="token punctuation">-</span> sleep 30
</span><span class="code-line line-number highlight-line" line="50">    <span class="token punctuation">-</span> cd ../e2e
</span><span class="code-line line-number highlight-line" line="51">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number highlight-line" line="52">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="53">    <span class="token punctuation">-</span> npx playwright test
</span><span class="code-line line-number highlight-line" line="54">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="55">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="56">      <span class="token punctuation">-</span> e2e/playwright<span class="token punctuation">-</span>report/
</span><span class="code-line line-number highlight-line" line="57">      <span class="token punctuation">-</span> e2e/test<span class="token punctuation">-</span>results/
</span></code></pre>
<p>Dans ce fichier, nous avons deux <strong><code>stages</code></strong> : <code>test</code> et <code>e2e</code>. Le stage <code>test</code> contient les tâches de test pour l&#x27;API et le frontend, tandis que le stage <code>e2e</code> contient les tâches de test e2e avec Playwright.</p>
<p>Un <strong><code>stage</code></strong> dans GitLab CI permet de regrouper des tâches en fonction de leur objectif. Les stages sont exécutés en série, ce qui signifie que le stage <code>test</code> sera exécuté en premier, suivi du stage <code>e2e</code>.</p>
<p>Si l&#x27;on souhaite passer des fichiers d&#x27;un stage à un autre, il est possible de le faire en utilisant les <strong><code>artifacts</code></strong>. Les <strong><code>artifacts</code></strong> sont des fichiers générés par les tâches de CI qui peuvent être utilisés dans d&#x27;autres tâches. Nous verrons cela plus tard, lors du déploiement d&#x27;applications.</p>
<p>Dans le stage <code>e2e</code>, nous utilisons l&#x27;image <strong><code>mcr.microsoft.com/playwright:v1.50.0-jammy</code></strong> pour exécuter les tests e2e avec Playwright. Cette image contient Playwright et tous les navigateurs nécessaires pour exécuter les tests e2e. Si vous tentez de créer une image Docker avec Playwright, vous pouvez consulter la documentation officielle de Playwright : <a href="https://playwright.dev/docs/ci">https://playwright.dev/docs/ci</a><br/>
<!-- -->Il est important de noter que si vous tentez de construire votre propre image de Playwright, vous devrez également installer les navigateurs nécessaires pour exécuter les tests e2e, et cela rend la configuration très complexe.<br/>
<!-- -->Dans notre cas, nous utilisons l&#x27;image officielle de Playwright qui contient pas mal de choses que nous avons besoin pour exécuter les tests e2e.<br/>
<!-- -->Néanmoins, nous devons aussi rajouter des dépendances à cette image :</p>
<ul>
<li>celles nécessaire à l&#x27;API : Java et Maven.</li>
<li>Docker Compose pour pouvoir exécuter la DB dans un conteneur.</li>
</ul>
<p>Nous utilisons la variables <strong><code>DOCKER_HOST</code></strong> pour spécifier l&#x27;hôte Docker à utiliser dans le pipeline de CI. En utilisant <strong><code>docker:dind</code></strong>, nous pouvons exécuter des conteneurs Docker dans le pipeline de CI. Toutes les commandes données dans le <strong><code>before_script</code></strong> seront exécutées avant le script principal. Ces commandes s&#x27;exécutent au sein de la pipeline de CI qui elle aussi s&#x27;exécute dans un conteneur Docker. Ainsi, pour la DB, nous utilisons <strong><code>docker compose</code></strong> pour démarrer le conteneur de la DB.<br/>
<!-- -->Comment est-ce que le conteneur de la pipeline de CI peut accéder à la DB ?</p>
<ul>
<li><strong>Réseau Docker</strong> : Les conteneurs démarrés par docker compose partagent un réseau Docker par défaut. Le conteneur de la pipeline GitLab CI peut accéder à ce réseau.</li>
<li><strong>Hôte Docker</strong> : Pour accéder au conteneur de la DB depuis le conteneur de la pipeline (contenant l&#x27;API, le frontend et l&#x27;application Playwright de e2e), utilisez l&#x27;hôte <strong><code>docker</code></strong> au lieu de <strong><code>localhost</code></strong>. Cela permet au conteneur de la pipeline de se connecter au réseau Docker partagé.</li>
</ul>
<p>Veuillez donc mettre à jour le fichier <strong><code>application-test.properties</code></strong> de l&#x27;API pour qu&#x27;il utilise <strong><code>docker</code></strong> comme hôte de la base de données :</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://docker:5432/cae_db</span>
</span></code></pre>
<p>Vous noterez que nous avons ajouté une pause de 30 secondes après le démarrage de l&#x27;API et du frontend pour s&#x27;assurer qu&#x27;ils sont prêts avant de commencer les tests e2e. Cette pause est nécessaire car le build de l&#x27;API et du frontend peut prendre un certain temps et les tests e2e peuvent échouer si l&#x27;API ou le frontend ne sont pas prêts.</p>
<p>Une fois que c&#x27;est fait, vous pouvez pousser les modifications sur votre branche et créer une Merge Request. Vos tests e2e devrait maintenant s&#x27;exécuter dans le pipeline de CI.</p>
<p>Veuillez vérifier que la pipeline de CI s&#x27;exécute correctement et que les tests e2e s&#x27;exécutent sans erreur.</p>
<h2>Etat actuel de la pipeline de CI</h2>
<p>Dans ce tutoriel, nous avons vu comment écrire des tests e2e avec Playwright pour tester une application web. Nous avons vu comment écrire des cas de test pour le register d&#x27;un utilisateur et comment gérer les duplications de code dans les tests. Nous avons également vu comment intégrer les tests e2e dans le pipeline de CI à l&#x27;aide de GitLab CI.</p>
<p>Nous voyons que la mise en place de la pipeline de CI pour les tests e2e est un peu plus complexe que pour les tests unitaires et les tests d&#x27;intégration. Cela est dû au fait que les tests e2e nécessitent un environnement complet de l&#x27;application pour s&#x27;exécuter. Il est donc important de bien configurer l&#x27;environnement de test pour garantir que les tests e2e s&#x27;exécutent correctement.</p>
<p>Voici à quoi correspond l&#x27;environnement de test pour notre pipeline acutel de CI :</p>
<div>Loading...</div>
<p>La configuration actuelle contient quelques faiblesses :</p>
<ul>
<li>Les tests e2e s&#x27;exécutent dans un seul navigateur. Il est important de tester l&#x27;application dans plusieurs navigateurs pour garantir la compatibilité.</li>
<li>Nous utilisons une pause de 30 secondes pour attendre que l&#x27;API et le frontend soient prêts. Cette pause n&#x27;est pas idéale et peut entraîner des problèmes si les services prennent plus de temps à démarrer.</li>
<li>Nous utilisons une image Docker pour exécuter les tests e2e. Cette image contient notamment Playwright et les navigateurs nécessaires, mais elle peut être complexe à configurer et à maintenir.</li>
<li>Nous devons à chaque push de modification installer les dépendances nécessaires à chaque job. Cela ralentit le pipeline de CI.</li>
<li>Nous n&#x27;avons pas un seul réseau pour les différentes applications : la DB est sur un autre réseau que l&#x27;API, le frontend et les tests e2e. Cela peut poser des problèmes de communication entre les applications et rend la configuration des URLs pour communiquer plus complexe.</li>
<li>Nous ne testons pas l&#x27;application dans son environnement de production. Il est important de tester l&#x27;application dans un environnement de production, une fois l&#x27;application déployée, pour garantir que tout fonctionne correctement pour les utilisateurs de l&#x27;application.</li>
<li>Nous ne réutilisons pas le build d&#x27;un service (api &amp; frontend) d&#x27;un stage à l&#x27;autre. Cela peut ralentir le pipeline de CI.</li>
<li>Les builds de l&#x27;API et du frontend sont des builds de développement. Il est important de construire l&#x27;API et le frontend pour la production avant de les tester ; il faudra donc apprendre à créer des builds de production (lancer la commande <code>npm run build</code> par exemple au lieu de <code>npm run dev</code> pour le frontend) et à les exécuter.</li>
</ul>
<p>Nous allons prochainement voir que la containérisation des applications peut nous aider à résoudre plusieurs de ces problèmes.</p>
<p>Mais avant cela, nous allons voir si nous pouvons optimiser la configuration actuelle de la pipeline de CI pour les tests e2e en utilisant le cache de GitLab CI.</p>
<h1><a id="comment_utiliser_le_cache_de_git_lab_ci"> Comment utiliser le cache de GitLab CI ? </a></h1>
<h2>Introduction</h2>
<p>Le cache de GitLab CI permet de stocker des fichiers ou des répertoires entre les différents jobs d&#x27;une pipeline de CI. Cela permet de réduire le temps de construction en évitant de télécharger les dépendances à chaque exécution du pipeline.</p>
<p>Dans la suite de ce tutoriel, nous allons voir comment utiliser le cache de GitLab CI pour stocker les dépendances des tests e2e entre les différents jobs de la pipeline.</p>
<p>Voici comment fonctionne le cache de GitLab CI :</p>
<ul>
<li>Lorsqu&#x27;un job est exécuté pour la première fois, le cache est vide.</li>
<li>À la fin de l&#x27;exécution du job, les fichiers ou les répertoires spécifiés dans le cache sont stockés.</li>
<li>Lorsque le même job est exécuté à nouveau, les fichiers ou les répertoires stockés dans le cache sont téléchargés et utilisés.</li>
<li>Cela permet de réduire le temps de construction en évitant de télécharger les dépendances à chaque exécution du job.</li>
<li>Comment savoir si le cache doit être mis à jour ? GitLab CI utilise une clé pour identifier le cache. Si la clé change, le cache est considéré comme obsolète et doit être mis à jour.</li>
</ul>
<h2>Configuration du cache de GitLab CI</h2>
<p>Pour tenter d&#x27;accélérer le temps d&#x27;exécution de notre pipeline, nous pourrions tenter d&#x27;utiliser le cache de GitLab CI en mettant à jour notre fichier <code>.gitlab-ci.yml</code>:</p>
<pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line line-number" line="1"><span class="token key atrule">stages</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="2">  <span class="token punctuation">-</span> test
</span><span class="code-line line-number" line="3">  <span class="token punctuation">-</span> e2e
</span><span class="code-line line-number highlight-line" line="4"><span class="token key atrule">variables</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="5">  <span class="token key atrule">MAVEN_OPTS</span><span class="token punctuation">:</span> <span class="token string">&quot;-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository&quot;</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token key atrule">api test</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="8">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
</span><span class="code-line line-number" line="9">  <span class="token key atrule">image</span><span class="token punctuation">:</span> maven<span class="token punctuation">:</span>3.9.9<span class="token punctuation">-</span>amazoncorretto<span class="token punctuation">-</span><span class="token number">21</span>
</span><span class="code-line line-number highlight-line" line="10">  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="11">    <span class="token key atrule">key</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="12">      <span class="token key atrule">files</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="13">        <span class="token punctuation">-</span> api/pom.xml
</span><span class="code-line line-number highlight-line" line="14">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="15">      <span class="token punctuation">-</span> $CI_PROJECT_DIR/.m2/repository
</span><span class="code-line line-number" line="16">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="17">    <span class="token punctuation">-</span> cd api
</span><span class="code-line line-number" line="18">    <span class="token punctuation">-</span> mvn clean test
</span><span class="code-line line-number" line="19">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="20">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="21">      <span class="token punctuation">-</span> api/target/reports/
</span><span class="code-line line-number" line="22">      <span class="token punctuation">-</span> api/target/site/
</span><span class="code-line line-number" line="23">      <span class="token punctuation">-</span> api/target/surefire<span class="token punctuation">-</span>reports/
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25"><span class="token key atrule">frontend test</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="26">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
</span><span class="code-line line-number" line="27">  <span class="token key atrule">image</span><span class="token punctuation">:</span> node<span class="token punctuation">:</span><span class="token number">20</span>
</span><span class="code-line line-number" line="28">  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="29">    <span class="token key atrule">key</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="30">      <span class="token key atrule">files</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="31">        <span class="token punctuation">-</span> frontend/package<span class="token punctuation">-</span>lock.json
</span><span class="code-line line-number highlight-line" line="32">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="33">      <span class="token punctuation">-</span> frontend/node_modules
</span><span class="code-line line-number" line="34">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="35">    <span class="token punctuation">-</span> cd frontend
</span><span class="code-line line-number" line="36">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number" line="37">    <span class="token punctuation">-</span> npm run lint
</span><span class="code-line line-number" line="38">    <span class="token punctuation">-</span> npm run coverage
</span><span class="code-line line-number" line="39">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="40">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="41">      <span class="token punctuation">-</span> frontend/coverage/
</span><span class="code-line line-number" line="42">
</span><span class="code-line line-number" line="43"><span class="token key atrule">e2e tests</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="44">  <span class="token key atrule">stage</span><span class="token punctuation">:</span> e2e
</span><span class="code-line line-number" line="45">  <span class="token key atrule">image</span><span class="token punctuation">:</span> mcr.microsoft.com/playwright<span class="token punctuation">:</span>v1.50.0<span class="token punctuation">-</span>jammy
</span><span class="code-line line-number" line="46">  <span class="token key atrule">services</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="47">    <span class="token punctuation">-</span> docker<span class="token punctuation">:</span>dind
</span><span class="code-line line-number" line="48">  <span class="token key atrule">variables</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="49">    <span class="token key atrule">DOCKER_HOST</span><span class="token punctuation">:</span> tcp<span class="token punctuation">:</span>//docker<span class="token punctuation">:</span><span class="token number">2375</span>
</span><span class="code-line line-number" line="50">  <span class="token key atrule">cache</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="51">    <span class="token key atrule">key</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="52">      <span class="token key atrule">files</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="53">        <span class="token punctuation">-</span> api/pom.xml
</span><span class="code-line line-number highlight-line" line="54">        <span class="token punctuation">-</span> frontend/package<span class="token punctuation">-</span>lock.json
</span><span class="code-line line-number highlight-line" line="55">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number highlight-line" line="56">      <span class="token punctuation">-</span> $CI_PROJECT_DIR/.m2/repository
</span><span class="code-line line-number highlight-line" line="57">      <span class="token punctuation">-</span> frontend/node_modules
</span><span class="code-line line-number highlight-line" line="58">      <span class="token punctuation">-</span> e2e/node_modules
</span><span class="code-line line-number" line="59">  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="60">    <span class="token punctuation">-</span> apt update <span class="token punctuation">-</span>y
</span><span class="code-line line-number" line="61">    <span class="token punctuation">-</span> wget https<span class="token punctuation">:</span>//download.oracle.com/java/21/latest/jdk<span class="token punctuation">-</span>21_linux<span class="token punctuation">-</span>x64_bin.deb
</span><span class="code-line line-number" line="62">    <span class="token punctuation">-</span> apt install ./jdk<span class="token punctuation">-</span>21_linux<span class="token punctuation">-</span>x64_bin.deb
</span><span class="code-line line-number" line="63">    <span class="token punctuation">-</span> apt install <span class="token punctuation">-</span>y maven docker<span class="token punctuation">-</span>compose<span class="token punctuation">-</span>v2
</span><span class="code-line line-number" line="64">    <span class="token punctuation">-</span> docker compose <span class="token punctuation">-</span>f api/docker<span class="token punctuation">-</span>compose.yaml up <span class="token punctuation">-</span><span class="token punctuation">-</span>build <span class="token punctuation">-</span>d
</span><span class="code-line line-number" line="65">    <span class="token punctuation">-</span> sleep 5
</span><span class="code-line line-number" line="66">    <span class="token punctuation">-</span> cd api
</span><span class="code-line line-number" line="67">    <span class="token punctuation">-</span> mvn clean spring<span class="token punctuation">-</span>boot<span class="token punctuation">:</span>run <span class="token punctuation">-</span>Dspring<span class="token punctuation">-</span>boot.run.profiles=test &amp;
</span><span class="code-line line-number" line="68">    <span class="token punctuation">-</span> sleep 30
</span><span class="code-line line-number" line="69">    <span class="token punctuation">-</span> cd ../frontend
</span><span class="code-line line-number" line="70">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number" line="71">    <span class="token punctuation">-</span> npm run dev &amp;
</span><span class="code-line line-number" line="72">    <span class="token punctuation">-</span> sleep 30
</span><span class="code-line line-number" line="73">    <span class="token punctuation">-</span> cd ../e2e
</span><span class="code-line line-number" line="74">    <span class="token punctuation">-</span> npm install
</span><span class="code-line line-number" line="75">  <span class="token key atrule">script</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="76">    <span class="token punctuation">-</span> npx playwright test
</span><span class="code-line line-number" line="77">  <span class="token key atrule">artifacts</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="78">    <span class="token key atrule">paths</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="79">      <span class="token punctuation">-</span> e2e/playwright<span class="token punctuation">-</span>report/
</span><span class="code-line line-number" line="80">      <span class="token punctuation">-</span> e2e/test<span class="token punctuation">-</span>results/
</span></code></pre>
<p>Voici quelques points importants à noter dans cette configuration :</p>
<ul>
<li>Nous avons ajouté une clé pour le cache de l&#x27;API et du frontend. Cette clé est basée sur les fichiers de dépendances de l&#x27;API et du frontend. Si ces fichiers changent, le cache est considéré comme obsolète et doit être mis à jour.</li>
<li>Il existe d&#x27;autres clés possibles pour le cache, comme par exemple des variables d&#x27;environnement, des fichiers de configuration, etc. ;  par exemple, GitLab CI propose d&#x27;utiliser :<!-- -->
<ul>
<li>la variable <strong><code>$CI_COMMIT_REF_SLUG</code></strong> pour partager le cache entre des jobs de la même branche</li>
<li>la variable <strong><code>$CI_JOB_NAME</code></strong> pour partager le cache entre toutes les branches avec un cache unique par job.</li>
</ul>
</li>
<li>Pour pouvoir accéder aux dépendances de Maven, nous avons défini la variable <strong><code>MAVEN_OPTS</code></strong> pour spécifier le répertoire local du dépôt Maven. Cela permet de stocker les dépendances de Maven dans le cache et de les réutiliser entre les différents jobs.</li>
</ul>
<h2>Conclusion sur le cache de GitLab CI</h2>
<p>Après configuration du cache, le temps d&#x27;exécution de la pipeline n&#x27;est pas significativement plus court.</p>
<p>Nous ne creuserons pas plus loin pour l&#x27;aspect cache de GitLab CI, car nous allons prochainement voir que la containérisation des applications peut nous aider à résoudre plusieurs problèmes de la configuration actuelle du pipeline de CI.</p>
<p>Si vous souhaitez en savoir plus sur le cache de GitLab CI, vous pouvez consulter la documentation officielle de GitLab : <a href="https://docs.gitlab.com/ee/ci/caching/">https://docs.gitlab.com/ee/ci/caching/</a></p>
<p>Si nécessaire, vous pouvez trouver le code associé aux tests e2e ici : <a href="https://github.com/e-vinci/cae-theory-demos/tree/main/e2e-tests">e2e-test</a>.</p>
<h2>Problème de configuration de l&#x27;API</h2>
<p>Attention, si vous exécutez l&#x27;API avec le profil de test localement, l&#x27;API est configurée pour utiliser <strong><code>docker</code></strong> comme hôte de la base de données dans le pipeline de CI. En effet, la configuration de l&#x27;API, au sein du fichier <strong><code>application-test.properties</code></strong>, est la suivante</p>
<pre class="language-properties"><code class="language-properties code-highlight"><span class="code-line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://docker:5432/cae_db</span>
</span></code></pre>
<p>Cette configuration fonctionne donc bien sur la pipeline de CI, mais pas si vous souhaitez exécuter l&#x27;API localement et vous connecter à votre DB localement.</p>
<p>Pour exécuter l&#x27;API localement, vous pourriez :</p>
<ul>
<li>soit modifier le fichier <strong><code>application-test.properties</code></strong> pour utiliser <strong><code>localhost</code></strong> comme hôte de la base de données (<code>jdbc:postgresql://localhost:5432/cae_db</code>)</li>
<li>soit créer deux profils de tests différents, un pour la pipeline de CI et un pour l&#x27;exécution locale de l&#x27;API. Vous pourriez par exemple créer un fichier <strong><code>application-ci.properties</code></strong> pour la pipeline de CI et un fichier <strong><code>application-test.properties</code></strong> pour l&#x27;exécution locale de l&#x27;API.</li>
<li>soit utiliser une DB en ligne, pour exécuter l&#x27;API localement. Ainsi l&#x27;URL vers la DB ne changera pas.</li>
<li>soit ... il existe d&#x27;autres solutions, mais nous ne les détaillerons pas ici.</li>
</ul>
<p>Nous allons voir comment éviter ce genre de problèmes plus tard dans le cours, afin d&#x27;automatiser la gestion des URLs en fonction de l&#x27;environnement dans lequel nos applications sont exécutées.</p></div><div></div><script src="/cae-theory/_next/static/chunks/webpack-0335b56ac768253e.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[909,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"245\",\"static/chunks/245-30e455921c0f8f22.js\",\"177\",\"static/chunks/app/layout-a6c5d823159daef4.js\"],\"default\"]\n3:I[7468,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"245\",\"static/chunks/245-30e455921c0f8f22.js\",\"177\",\"static/chunks/app/layout-a6c5d823159daef4.js\"],\"ClientThemeProvider\"]\n4:I[1886,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"245\",\"static/chunks/245-30e455921c0f8f22.js\",\"177\",\"static/chunks/app/layout-a6c5d823159daef4.js\"],\"default\"]\n5:I[8412,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"245\",\"static/chunks/245-30e455921c0f8f22.js\",\"177\",\"static/chunks/app/layout-a6c5d823159daef4.js\"],\"default\"]\n6:I[5244,[],\"\"]\n7:I[3866,[],\"\"]\n8:I[3620,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"245\",\"static/chunks/245-30e455921c0f8f22.js\",\"177\",\"static/chunks/app/layout-a6c5d823159daef4.js\"],\"default\"]\na:I[6213,[],\"OutletBoundary\"]\nc:I[6213,[],\"MetadataBoundary\"]\ne:I[6213,[],\"ViewportBoundary\"]\n10:I[4835,[],\"\"]\n:HL[\"/cae-theory/_next/static/css/fd89b796fb218fbf.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"A92IwWAQn47aM2P2a7xIH\",\"p\":\"/cae-theory\",\"c\":[\"\",\"quality\",\"e2e\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"slug\",\"quality/e2e\",\"oc\"],{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/cae-theory/_next/static/css/fd89b796fb218fbf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"children\":[\"$\",\"html\",null,{\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"title\",null,{\"children\":\"CAE Course\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/svg+xml\",\"href\":\"/cae-theory/favicon.svg\"}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"$L4\",null,{\"siteMetaData\":{\"version\":\"\",\"title\":\"CAE\",\"description\":\"siteDescription\",\"url\":\"siteURL\",\"youtubeUrl\":\"youtubeUrl\",\"authorEmail\":\"authorEmail\",\"facebookUrl\":\"facebookUrl\",\"instagramUrl\":\"instagramUrl\",\"menuLinks\":[{\"name\":\"Home\",\"link\":\"/\"},{\"name\":\"Intro\",\"link\":\"/intro\"},{\"name\":\"Qualité\",\"link\":\"\",\"subMenu\":[{\"name\":\"Qualité générale\",\"link\":\"/quality/general\"},{\"name\":\"Qualité du frontend\",\"link\":\"/quality/frontend\"},{\"name\":\"Qualité de l'API\",\"link\":\"/quality/api\"},{\"name\":\"Intégration Continue\",\"link\":\"/quality/ci\"},{\"name\":\"Tests e2e\",\"link\":\"/quality/e2e\"}]},{\"name\":\"Itération 2\",\"link\":\"\",\"subMenu\":[{\"name\":\"Gestion des environnements\",\"link\":\"/iteration2/general\"},{\"name\":\"Conteneurisation\",\"link\":\"/iteration2/containerization\"},{\"name\":\"Déploiement\",\"link\":\"/iteration2/deployment\"},{\"name\":\"Gestion des images\",\"link\":\"/iteration2/images\"}]},{\"name\":\"About\",\"link\":\"/about\"}]}}]}],[\"$\",\"$L5\",null,{\"sx\":{\"padding\":\"1rem\",\"wordWrap\":\"break-word\"},\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L8\",null,{}]]}]]}]}]}]]}],{\"children\":[[\"slug\",\"quality/e2e\",\"oc\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$0:f:0:1:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L9\",null,[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],{},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"MMw_oSXvVAHTCS0JFBGU5\",{\"children\":[[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$10\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"11:I[3508,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n12:I[283,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n13:I[6656,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n14:I[8173,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"\"]\n15:I[4754,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n16:I[2738,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n17:I[4036,[\"144\",\"static/chunks/144-6ef9499ac178c5dc.js\",\"830\",\"static/chunks/830-d07b37352b41f989.js\",\"340\",\"static/chunks/app/%5B%5B...slug%5D%5D/page-e6ba2748711f75c3.js\"],\"default\"]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"$L11\",null,{\"children\":[[\"$\",\"$L12\",null,{\"aria-label\":\"breadcrumb\",\"children\":[[\"$\",\"$L13\",null,{\"href\":\"/\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":\" CAE \"}],[\"$\",\"$L13\",null,{\"href\":\"/quality\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":\" Qualité \"}],[\"$\",\"$L13\",null,{\"href\":\"#\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":\" Tests e2e \"}]]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_gerer_des_tests_de_bout_en_bout\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment gérer des tests de bout en bout ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_mettre_en_place_les_tests_e_2_e_avec_playwright\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment mettre en place les tests e2e avec Playwright ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#ou_enregistrer_les_specifications_de_test\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Où enregistrer les spécifications de test ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_tester_une_application_web_avec_playwright\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment tester une application web avec Playwright ?  \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_sassurer_de_letat_de_lapplication_avant_de_commencer_les_tests\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment s'assurer de l'état de l'application avant de commencer les tests ?  \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_gerer_les_duplications_de_code_dans_les_tests\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment gérer les duplications de code dans les tests ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_ecrire_des_tests_e_2_e_de_qualite\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment écrire des tests e2e de qualité ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_integrer_les_tests_e_2_e_dans_le_pipeline_de_ci\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment intégrer les tests e2e dans le pipeline de CI ? \"}]}]}],[\"$\",\"$L15\",null,{\"component\":\"div\",\"sx\":{\"paddingTop\":0,\"paddingBottom\":0},\"children\":[\"$\",\"$L13\",null,{\"href\":\"#comment_utiliser_le_cache_de_git_lab_ci\",\"underline\":\"hover\",\"color\":\"inherit\",\"component\":\"$14\",\"children\":[\"$\",\"$L16\",null,{\"primary\":\" Comment utiliser le cache de GitLab CI ? \"}]}]}]]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_gerer_des_tests_de_bout_en_bout\",\"children\":\" Comment gérer des tests de bout en bout ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Les tests de bout en bout (e2e) sont des tests qui simulent le comportement d'un utilisateur sur une application. Ils permettent de vérifier que l'application fonctionne correctement dans son ensemble, en testant l'interaction entre les différentes parties de l'application.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour pouvoir gérer efficacement les tests e2e, il est important de suivre quelques bonnes pratiques :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Définir une stratégie de test\"}],\" : Avant de commencer à écrire des tests e2e, il est important de définir une stratégie de test qui détermine quels scénarios seront testés et comment ils seront testés.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Utiliser des outils adaptés\"}],\" : Il existe de nombreux outils pour écrire des tests e2e, comme Playwright, Cypress, Selenium ou Puppeteer. Il est important de choisir l'outil qui convient le mieux à votre projet.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Écrire des tests robustes\"}],\" : Les tests e2e doivent être robustes et fiables. Il est important de s'assurer qu'ils sont capables de détecter les erreurs et les problèmes potentiels dans l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Automatiser les tests\"}],\" : Les tests e2e doivent être automatisés pour pouvoir être exécutés régulièrement et rapidement. Il est important de les intégrer dans votre pipeline CI/CD.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Suivre les bonnes pratiques de développement\"}],\" : Comme pour les autres types de tests, il est important de suivre les bonnes pratiques de développement pour écrire des tests e2e de qualité.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce cours, nous avons choisi l'outil \",[\"$\",\"strong\",null,{\"children\":\"Playwright\"}],\" pour écrire nos tests e2e. Playwright est un outil moderne et puissant qui permet d'écrire des tests e2e pour les applications web et mobiles. Il offre de nombreuses fonctionnalités avancées, comme la prise en charge des applications PWA, des tests parallèles et la possibilité de tester sur plusieurs navigateurs.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Comment définir une stratégie de test e2e ?\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Avant de commencer à écrire des tests e2e, il est important de définir une stratégie de test qui détermine quels scénarios seront testés et comment ils seront testés. Voici quelques étapes à suivre pour définir une stratégie de test e2e :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Identifier les scénarios à tester\"}],\" : Commencez par identifier les scénarios les plus importants de votre application. Il peut s'agir de scénarios critiques pour le bon fonctionnement de l'application, de scénarios qui couvrent les fonctionnalités les plus utilisées par les utilisateurs, ou de scénarios qui ont été à l'origine de bugs dans le passé.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Déterminer les cas de test\"}],\" : Pour chaque scénario identifié, déterminez les cas de test (\\\"test cases\\\" en anglais) à exécuter. Un cas de test est une séquence d'actions qui permet de vérifier le bon fonctionnement d'une fonctionnalité de l'application.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Identification des scénarios à tester\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Un scénario de test décrit une situation ou un flux d'utilisation spécifique que vous souhaitez tester. Il se concentre sur les actions de l'utilisateur et les résultats attendus de manière générale.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour identifier les scénarios à tester, nous vous recommandons cette approche :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Identification des cas d'utilisation\"}],\" : Commencez par identifier les cas d'utilisation de votre application. Un cas d'utilisation est une description d'une interaction entre un utilisateur et l'application, c'est une fonctionnalité offerte par votre application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Priorisation des cas d'utilisation\"}],\" : Priorisez les cas d'utilisation en fonction de leur importance pour l'application. Vous pouvez utiliser des critères comme la criticité, la fréquence d'utilisation, ou l'impact sur l'expérience utilisateur.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Définition des scénarios de test\"}],\" : Pour chaque cas d'utilisation priorisé, définissez un ou plusieurs scénarios de test qui couvrent les différentes étapes de l'interaction entre l'utilisateur et l'application.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Par exemple, pour tester le cas d'utilisation \\\"Créer un compte utilisateur\\\", vous pourriez définir les scénarios de test suivants :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Scénario 1\"}],\" : L'utilisateur saisit son username et son mot de passe, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait être redirigé vers la homepage.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Scénario 2\"}],\" : L'utilisateur saisit un username déjà existant, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait voir un message d'erreur indiquant que le username est déjà pris.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Scénario 3\"}],\" : L'utilisateur saisit un username valide et un mot de passe invalide, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait voir un message d'erreur.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Détermination des cas de test\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Un cas de test est une instance spécifique d'un scénario de test. Il inclut des données d'entrée précises, des actions détaillées, et des résultats attendus. Un scénario de test peut avoir plusieurs cas de test pour couvrir différentes variations et conditions.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour chaque scénario identifié, déterminez les cas de test à exécuter.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour couvrir les tests du cas d'utilisation \\\"Créer un compte utilisateur\\\", vous pourriez définir les cas de test suivants :\"}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Scénario 1 : L'utilisateur saisit son username et son mot de passe, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait être redirigé vers la homepage.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cas de test 1.1\"}],\" : Saisir un username et un mot de passe valides, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur est redirigé vers la homepage.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Scénario 2 : L'utilisateur saisit un username déjà existant, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait voir un message d'erreur indiquant que le username est déjà pris.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cas de test 2.1\"}],\" : Saisir un username déjà existant et un mot de passe valide, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur voit un message d'erreur indiquant que le username est déjà pris.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cas de test 2.2\"}],\" : Saisir un username déjà existant et laisser le champ mot de passe vide, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur voit un message d'erreur indiquant que le mot de passe est requis.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Scénario 3 : L'utilisateur saisit un username valide et un mot de passe invalide, puis clique sur le bouton \\\"Créer un compte\\\". Il devrait voir un message d'erreur.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cas de test 3.1\"}],\" : Saisir un username valide et un mot de passe trop court, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur voit un message d'erreur indiquant que le mot de passe est trop court.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Cas de test 3.2\"}],\" : Saisir un username valide et laisser le champ mot de passe vide, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur voit un message d'erreur indiquant que le mot de passe est requis.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_mettre_en_place_les_tests_e_2_e_avec_playwright\",\"children\":\" Comment mettre en place les tests e2e avec Playwright ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Playwright est un outil moderne et puissant pour écrire des tests e2e pour les applications web et mobiles. Il offre de nombreuses fonctionnalités avancées, comme la prise en charge des applications PWA, des tests parallèles et la possibilité de tester sur plusieurs navigateurs.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour mettre en place les tests e2e avec Playwright, vous devez suivre quelques étapes :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Installation de Playwright\"}],\" : Commencez par installer Playwright et les dépendances nécessaires. Pour utiliser Playwright, nous vous recommandons de créer un nouveau projet ; vous pourriez l'intégrer dans le frontend de votre application, mais nous vous conseillons de le garder séparé pour des raisons de clarté.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Écriture des tests\"}],\" : Écrivez les tests e2e en utilisant l'API de Playwright pour simuler le comportement de l'utilisateur.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Installation des dépendances\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce tutorial, veuillez créer un nouveau répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\" sur base d'un copier / coller de \",[\"$\",\"code\",null,{\"children\":\"ci\"}],\" : \",[\"$\",\"a\",null,{\"href\":\"https://github.com/e-vinci/cae-theory-demos/tree/main/ci\",\"children\":\"ci\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Une fois votre répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\" créé, veuillez démarrer l'API et le frontend de la pizzeria du projet \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce tutoriel, au sein du répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\", nous allons créer un projet de tests e2e avec Playwright et nommer ce projet \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\".\",[\"$\",\"br\",null,{}],\"\\n\",\"Pour ce faire, créez un répertoire nommé \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" au sein du répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\" et placez-vous dedans.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour utiliser Playwright, vous devez installer les dépendances suivantes au sein de \",[\"$\",\"code\",null,{\"children\":\"e2e-tests/e2e\"}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"npm\"}],\" init playwright@latest\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez suivre les instructions et sélectionnez toutes les options par défaut :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"le langage de programmation : TypeScript\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Where to put your end-to-end tests?\"}],\" : \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" (c'est le dossier où seront stockés les tests e2e)\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Add a GitHub Actions workflow?\"}],\" : false (pour ajouter un workflow GitHub Actions pour exécuter les tests e2e)\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"Install Playwright browsers (can be done manually via 'npx playwright install')?\"}],\" : true (pour installer les navigateurs pris en charge par Playwright)\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Une fois l'installation terminée, vous devriez voir un nouveau répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" dans votre projet \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" et un fichier \",[\"$\",\"code\",null,{\"children\":\"playwright.config.ts\"}],\" à la racine du projet.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"playwright.config.ts\"}],\" : Ce fichier contient la configuration de Playwright pour les tests e2e. Vous pouvez personnaliser cette configuration en fonction de vos besoins, notamment pour définir les navigateurs à utiliser, les options de lancement, ou les paramètres de test.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" contient un fichier \",[\"$\",\"code\",null,{\"children\":\"example.spec.ts\"}],\" qui donne un exemple de test e2e avec Playwright. Vous pouvez le modifier ou le supprimer selon vos besoins.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Exécution des tests\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Exécution des tests e2e dans le terminal\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour exécuter les tests e2e avec Playwright en mode headless, c'est-à-dire sans interface graphique, vous pouvez utiliser la commande suivante :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"npx playwright \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Les résultats des tests s'afficheront dans la console, indiquant si les tests ont réussi ou échoué.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez taper cette commande dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" de votre projet.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Playwright détecte toutes les spécifications de tests se trouvant dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"La seule spécification de test fournie par défaut est \",[\"$\",\"code\",null,{\"children\":\"example.spec.ts\"}],\" qui contient deux tests. Comme par défaut il y a 3 browsers installés, les tests seront exécutés sur ces 3 navigateurs, à savoir Chromium, Firefox et WebKit.\",[\"$\",\"br\",null,{}],\"\\n\",\"C'est pourquoi, au sein du terminal, vous verrez que 6 tests ont passé. C'est en fait que 2 tests ont passé avec succès sur chacun des 3 navigateurs.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Execution des tests e2e dans le mode UI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour exécuter les tests e2e dans le mode UI, vous pouvez utiliser la commande suivante :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"npx playwright \",[\"$\",\"span\",null,{\"className\":\"token builtin class-name\",\"children\":\"test\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--ui\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cette commande ouvre une interface graphique qui vous permet de visualiser les tests en cours d'exécution et de voir les résultats en temps réel.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez lancer les tests à l'aide de l'UI.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Exécution de tests au sein de VS Code\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"VS Code a une extension Playwright qui permet d'exécuter les tests e2e directement dans l'éditeur. Pour utiliser cette extension, vous devez l'installer à partir du marketplace des extensions de VS Code.\",[\"$\",\"br\",null,{}],\"\\n\",\"Pour ce faire, veuillez suivre les étapes suivantes :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Ouvrez VS Code\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Cliquez sur l'icône des extensions dans la barre latérale gauche\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Recherchez \\\"Playwright\\\" dans la barre de recherche\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Cliquez sur \\\"Installer\\\" pour installer l'extension \",[\"$\",\"code\",null,{\"children\":\"Playwright Test for VSCode \"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Une fois l'extension installée, vous pouvez configurer et exécuter les tests e2e directement dans VS Code en cliquant sur l'icône \\\"Testing\\\" dans la barre latérale gauche.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour configurer les tests, vous devez cliquer sur l'onglet \\\"Playwright\\\" dans la barre latérale gauche.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Par exemple, veuillez sélectionner seulement le navigateur Chromium pour exécuter les tests.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vous pouvez ensuite lancer les tests soit :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"via le \",[\"$\",\"code\",null,{\"children\":\"Test Explorer\"}],\" : en cliquant sur le bouton \",[\"$\",\"code\",null,{\"children\":\"Run Test\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"via le fichier \",[\"$\",\"code\",null,{\"children\":\"example.spec.ts\"}],\" : en cliquant sur le bouton \",[\"$\",\"code\",null,{\"children\":\"Run\"}],\" à côté du mot clé \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" ou \",[\"$\",\"code\",null,{\"children\":\"describe\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour en savoir plus, veuillez consulter la documentation : \",[\"$\",\"a\",null,{\"href\":\"https://playwright.dev/docs/getting-started-vscode\",\"children\":\"https://playwright.dev/docs/getting-started-vscode\"}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Rapports de tests au format HTML\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Par défaut, si certains tests échouent, Playwright génère un rapport de tests au format HTML dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"test-results\"}],\" et ouvre automatiquement ce rapport.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est possible de visualiser le rapport de tests en tapant la commande suivante :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sh\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sh code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"npx playwright show-report\\n\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Une façon de visualiser le rapport de tests est de consulter le fichier \",[\"$\",\"code\",null,{\"children\":\"playwright-report/index.html\"}],\" dans votre navigateur.\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"ou_enregistrer_les_specifications_de_test\",\"children\":\" Où enregistrer les spécifications de test ? \"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Playwright détecte toutes les spécifications de tests se trouvant dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" par défaut. Vous pouvez personnaliser ce répertoire dans le fichier \",[\"$\",\"code\",null,{\"children\":\"playwright.config.ts\"}],\" en modifiant la propriété \",[\"$\",\"code\",null,{\"children\":\"testDir\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Vous pouvez ajouter d'autres spécifications de test en créant de nouveaux fichiers \",[\"$\",\"code\",null,{\"children\":\"*.spec.ts\"}],\" dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour apprendre à écrire des tests e2e avec Playwright, veuillez lire la documentation officielle : \",[\"$\",\"a\",null,{\"href\":\"https://playwright.dev/docs/writing-tests\",\"children\":\"https://playwright.dev/docs/writing-tests\"}]]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_tester_une_application_web_avec_playwright\",\"children\":\" Comment tester une application web avec Playwright ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous souhaitons tester une application web avec Playwright. Pour ce tutorial, nous souhaitons tester la création d'un compte utilisateur sur une application web.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour ce faire, vous devez avoir démarré l'application web que vous souhaitez tester.\\nVeuillez démarrer l'api du site de la pizzeria et le frontend de la pizzeria :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour l'API, vous devez d'abord démarrer la DB localement à l'aide de Docker Compose (ou Docker Desktop). Veuillez démarrer la dernière version de l'API en utilisant la commande \",[\"$\",\"code\",null,{\"children\":\"npm run dev\"}],\" dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"/e2e-tests/api\"}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour le frontend, vous devez démarrer la dernière version du frontend de la pizzeria en utilisant la commande \",[\"$\",\"code\",null,{\"children\":\"npm run dev\"}],\" dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"/e2e-tests/frontend\"}],\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Écriture des tests\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour tester le register d'un utilisateur sur une application web, vous pouvez écrire des tests e2e avec Playwright.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez créer une nouvelle spécification de test dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" de votre projet \",[\"$\",\"code\",null,{\"children\":\"/e2e-tests/e2e\"}],\" en créant un fichier \",[\"$\",\"code\",null,{\"children\":\"register.spec.ts\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons commencer par ce scénario : \",[\"$\",\"code\",null,{\"children\":\"Scénario 1 - \\\"Register OK\\\" : L'utilisateur clic sur \\\"Créer un utilisateur\\\", saisit son username et son mot de passe, puis clique sur le bouton \\\"Créer le compte\\\". Il devrait être redirigé vers la homepage.\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour un scénario donné, vous pouvez définir plusieurs cas de test. Nous allons commencer par ce premier cas de test : \",[\"$\",\"code\",null,{\"children\":\"Cas de test 1.1 : Naviguer vers \\\"Créer un utilisateur\\\", saisir un username et un mot de passe valides, puis cliquer sur le bouton \\\"Créer le compte\\\". Vérifier que l'utilisateur est redirigé vers la homepage et que l'on affiche son username\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Voici le code de la spécification de test \",[\"$\",\"code\",null,{\"children\":\"register.spec.ts\"}],\" pour ce cas de test :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"describe\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC1.1: should register a new user when valid username \u0026 password\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"ananda\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"123456\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goto\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Quelques explications sur ce code :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"test.describe\"}]}],\" : Cette fonction permet de définir un groupe de tests. Dans notre cas, nous avons un groupe de tests pour tous les scénarios associés au cas d'utilisation \\\"Créer un compte\\\" (ou \\\"Register\\\").\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"test\"}]}],\" : Cette fonction permet de définir un test individuel. Dans notre cas, nous avons un test pour le cas de test 1.1.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"page.goto\"}]}],\" : Cette fonction permet de naviguer vers une URL spécifique. Dans notre cas, nous naviguons vers la page d'accueil de l'application.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"page.getByText\"}]}],\" : Cette fonction permet de sélectionner un élément de la page par son texte. Dans notre cas, nous sélectionnons le bouton \\\"créer un utilisateur\\\". Par défaut, la recherche est insensible à la casse.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"expect(page).toHaveURL\"}]}],\" : Cette fonction permet de vérifier que l'URL de la page correspond à une valeur spécifique. Dans notre cas, nous vérifions que l'utilisateur est redirigé vers la page de register.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"page.getByRole\"}]}],\" : Cette fonction permet de sélectionner un élément de la page par son rôle. Dans notre cas, nous sélectionnons les champs de texte pour le username et le mot de passe, ainsi que le bouton \\\"Créer le compte\\\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"locator.fill\"}]}],\" : Cette fonction permet de remplir un champ de texte avec une valeur spécifique. Dans notre cas, nous remplissons les champs de texte avec le username et le mot de passe. Un \",[\"$\",\"code\",null,{\"children\":\"locator\"}],\" est un objet qui représente un élément de la page.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"locator.click\"}]}],\" : Cette fonction permet de cliquer sur un élément de la page. Dans notre cas, nous cliquons sur le bouton \\\"Créer le compte\\\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"expect(page.getByText).toBeVisible\"}]}],\" : Cette fonction permet de vérifier que l'élément de la page est visible. Dans notre cas, nous vérifions que le message de bienvenue contenant le username est affiché.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous avons écrit un test pour le cas de test 1.1. Ce test fonctionne une seule fois pour un username et un mot de passe donnés.\",[\"$\",\"br\",null,{}],\"\\n\",\"Comment pourrions-nous écrire un test qui fonctionne à chaque fois ?\\nPour ce faire, il faudrait pouvoir supprimer l'utilisateur créé à la fin du test : nous pourrions, par exemple, utiliser une fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"afterEach\"}]}],\" qui serait exécutée après chaque test. Cette fonction permettrait de nettoyer l'état de l'application après chaque test. Néanmoins, pour supprimer un utilisateur, il faudrait que l'API de l'application web permette de supprimer un utilisateur. Ce genre d'opération est généralement réservé aux administrateurs, elle demanderait donc une authentification. Ce qui est un peu plus complexe à mettre en place.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour simplifier, nous pourrions simplement générer un username aléatoire à chaque test. Pour ce faire, nous allons utiliser la librairie \",[\"$\",\"code\",null,{\"children\":\"faker\"}],\" qui permet de générer des données aléatoires.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour installer la librairie \",[\"$\",\"code\",null,{\"children\":\"faker\"}],\", veuillez taper la commande suivante :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"npm\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"install\"}],\" @faker-js/faker \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-D\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Toutes les API de \",[\"$\",\"code\",null,{\"children\":\"faker\"}],\" sont disponibles ici : \",[\"$\",\"a\",null,{\"href\":\"https://fakerjs.dev/api/\",\"children\":\"https://fakerjs.dev/api/\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Voici le code mis à jour pour le cas de test 1.1 :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" faker \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@faker-js/faker\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[\"test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"describe\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC1.1: should register a new user when valid username \u0026 password\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"8\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"9\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goto\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":\"    \\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans ce code, nous utilisons la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"faker.internet.username()\"}]}],\" pour générer un username aléatoire et la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"faker.internet.password()\"}]}],\" pour générer un mot de passe aléatoire.\",[\"$\",\"br\",null,{}],\"\\n\",\"Notons que \",[\"$\",\"code\",null,{\"children\":\"faker\"}],\" permet de configurer les données générées. Par exemple, pour générer un username sur base d'un username, vous pouvez utiliser \",[\"$\",\"code\",null,{\"children\":\"faker.internet.username({firstName:\\\"ananda\\\"})\"}],\".\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_sassurer_de_letat_de_lapplication_avant_de_commencer_les_tests\",\"children\":\" Comment s'assurer de l'état de l'application avant de commencer les tests ? \"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Notons que dans pas mal de tests, on peut considérer qu'il soit important de démarrer une suite de test avec un état initial connu.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il existe pas mal de solutions pour obtenir un état initial connu avant de commencer les tests.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Méthode 1 : Utiliser des hooks de tests et des opérations d'API\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Il est possible d'utiliser des hooks de test comme \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeAll\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeEach\"}]}],\" pour réinitialiser la base de données avant chaque suite de tests ou chaque test individuel.\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"Utilisation de la fonction \",[\"$\",\"code\",null,{\"children\":\"beforeAll\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"On peut utiliser la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeAll\"}]}],\" qui permet d'exécuter une fonction avant le début de la suite de tests. Cette fonction permet de mettre en place l'état initial de l'application avant de commencer les tests.\",[\"$\",\"br\",null,{}],\"\\n\",\"Par exemple, nous pourrions avoir une fonction de l'API qui permet de supprimer tous les utilisateurs de la base de données. Cette fonction pourrait être appelée dans la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeAll\"}]}],\" pour s'assurer que la base de données est vide avant de commencer les tests. Attention donc à bien sécuriser cette opération par une authentification JWT et vous assurer que l'opération n'est accessible qu'en environnement de test.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"L'avantage de cette méthode est :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous pouvez être sûr de l'état initial de l'application avant de commencer les tests.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous pouvez garantir que les tests sont reproductibles et fiables.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous pouvez écrire des cas de tests avec des données précises et connues. Il n'est pas nécessaire de générer des données aléatoires pour chaque test.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"L'inconvénient de cette méthode est :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous devez vous assurer que l'état initial de l'application est cohérent avec les tests que vous souhaitez exécuter. Si l'état initial de l'application ne correspond pas aux tests, les tests peuvent échouer.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"pas si simple à mettre en place si l'application est complexe et que l'état initial dépend de plusieurs facteurs.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"Utilisation de la fonction \",[\"$\",\"code\",null,{\"children\":\"afterEach\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Il est possible d'utiliser la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"afterEach\"}]}],\" qui permet d'exécuter une fonction après chaque test. Cette fonction permet de nettoyer l'état de l'application après chaque test.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"L'avantage de cette méthode est :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous pouvez nettoyer l'état de l'application après chaque test pour garantir que les tests sont indépendants les uns des autres.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous pouvez éviter les effets de bord et les interactions inattendues entre les tests.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"L'inconvénient de cette méthode est :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous devez vous assurer que le nettoyage de l'état de l'application est correctement implémenté. Si le nettoyage n'est pas correct, les tests peuvent échouer.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"que vous devez gérer les cas où le nettoyage de l'état de l'application échoue. Si le nettoyage échoue, les tests peuvent échouer.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"pas si simple à mettre en place.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Méthode 2 : Utiliser des scripts de réinitialisation de la base de données\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est possible d'utiliser des scripts de réinitialisation de la base de données pour réinitialiser l'état de la base de données avant de commencer les tests. Ces scripts peuvent être exécutés manuellement ou automatiquement avant le début des tests.\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Utilisation de scripts de réinitialisation de la base de données\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons maintenant voir comment mettre à jour l'API se trouvant dans le dossier \",[\"$\",\"code\",null,{\"children\":\"api\"}],\" de notre répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\" pour réinitialiser la base de données avant de commencer les tests.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Fonctionnement actuel de l'initialisation de la DB\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Le script \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"insert.sql\"}]}],\" dans le répertoire \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources\"}]}],\" de l'API :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"est exécuté automatiquement par Spring Boot grâce à la configuration de la source de données.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Spring Boot détecte automatiquement les fichiers SQL dans ce répertoire et les exécute au démarrage de l'application.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Voici comment cela fonctionne :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Configuration de la source de données\"}],\" :\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\", vous avez configuré les propriétés de la source de données (username, password...), ce qui permet à Spring Boot de se connecter à la base de données.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"spring.jpa.generate-ddl=true\"}]}],\" : cette propriété permet à Spring Boot de générer automatiquement le schéma de la base de données à partir des entités JPA.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Exécution automatique des scripts SQL\"}],\" :\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Spring Boot, par défaut, exécute les scripts SQL trouvés dans \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources\"}]}],\" ou \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources/db/migration\"}]}],\" au démarrage de l'application \",[\"$\",\"strong\",null,{\"children\":\"SEULEMENT\"}],\" pour les bases de données intégrées (par pour PostGres).\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour exécuter les scripts SQL à chaque démarrage, il faut ajouter la propriété \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"spring.sql.init.mode=always\"}]}],\" dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Les fichiers doivent être nommés \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"schema.sql\"}]}],\" pour les scripts de création de schéma et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"data.sql\"}]}],\" pour les scripts d'insertion de données.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Cependant, il exécutera également tout autre fichier SQL trouvé dans ce répertoire.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour laisser d'abord Spring Boot générer le schéma de la base de données avant d'exécuter \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"data.sql\"}]}],\", il faut ajouter la propriété \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"spring.jpa.defer-datasource-initialization=true\"}]}],\" dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\".\",[\"$\",\"br\",null,{}],\"\\n\",\"Si cela n'est pas fait, Spring Boot exécutera \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"data.sql\"}]}],\" avant de générer le schéma de la base de données, ce qui peut entraîner des erreurs.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez donc mettre à jour le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" pour ajouter ces propriétés :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.application.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"demo\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"server.port\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"3000\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.url\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"jdbc:postgresql://localhost:5432/cae_db\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae_user\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.generate-ddl\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.sql.init.mode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"always\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.defer-datasource-initialization\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour bien faire, renommez le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources/insert.sql\"}]}],\" en \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources/data.sql\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Démarrez l'API et vérifiez que la base de données est bien initialisée.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Actuellement, à chaque démarrage de l'API, on insert un utilisateur \",[\"$\",\"code\",null,{\"children\":\"admin\"}],\" dans la DB.\\nVoici le contenu actuel du fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"data.sql\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sql\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sql code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"INSERT\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"INTO\"}],\" users\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"VALUES\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'admin'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'$2y$10$EW75BdcbCfKEA3NbE7in4OiYYacfP3OY4Q2JsVzjxd3jNxxgAEZNu'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Cela va vite devenir problématique car comme la DB est réinitialisée à chaque démarrage de l'API, on va se retrouver avec plusieurs utilisateurs \",[\"$\",\"code\",null,{\"children\":\"admin\"}],\" dans la DB. En effet, \",[\"$\",\"code\",null,{\"children\":\"username\"}],\" n'est pas une clé primaire.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour réinitialiser la base de données avant de commencer les tests, nous allons modifier le script SQL pour supprimer tous les utilisateurs de la base de données avant d'en ajouter un.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez modifier le contenu du fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"data.sql\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-sql\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-sql code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"TRUNCATE\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"TABLE\"}],\" users\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"INSERT\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"INTO\"}],\" users\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"VALUES\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'admin'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'$2y$10$EW75BdcbCfKEA3NbE7in4OiYYacfP3OY4Q2JsVzjxd3jNxxgAEZNu'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Le problème avec cette approche, c'est que l'on ne veut pas réinitialiser la DB à chaque démarrage de l'API, mais uniquement avant de commencer les tests.\",[\"$\",\"br\",null,{}],\"\\n\",\"En effet, imaginez que l'API soit utilisée en production, on ne veut pas supprimer tous les utilisateurs à chaque démarrage de l'API 😱.\"]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Réinitialisation de la base de données avant de commencer les tests\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour ce tutoriel, nous allons créer deux configurations pour l'API : une configuration pour l'environnement de production et une configuration pour l'environnement de test.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour ce faire, veuillez créer un nouveau fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\" dans le répertoire \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"src/main/resources\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.application.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"demo\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"server.port\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"3000\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.url\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"jdbc:postgresql://localhost:5432/cae_db\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae_user\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.generate-ddl\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.sql.init.mode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"always\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.defer-datasource-initialization\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons mettre à jour le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application.properties\"}]}],\" pour qu'il n'utilise jamais de script SQL pour initialiser la base de données :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.application.name\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"demo\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"server.port\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"3000\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.url\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"jdbc:postgresql://localhost:5432/cae_db\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae_user\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"cae\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.jpa.generate-ddl\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"true\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line highlight-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.sql.init.mode\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"never\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si nous redémarrons l'application maintenant via la configuration nommée \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DemoApplication\"}]}],\" au sein d'IntelliJ, la base de données ne sera pas réinitialisée.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"De même, si nous exécutons cette commande :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"mvn clean spring-boot:run\\n\"}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"La base de données ne sera pas réinitialisée.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour réinitialiser la base de données avant de commencer les tests, nous pouvons activer le profile de tests dans la commande de lancement de Spring Boot :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"mvn clean spring-boot:run -Dspring-boot.run.profiles\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"test\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"C'est donc cette commande que nous allons utiliser pour démarrer l'API avant de commencer les tests.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Une autre possibilité, c'est de générer un package JAR exécutable et de lancer l'application avec le profile de tests :\"}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"mvn clean package\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"java\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"-jar\"}],\" ./target/cae-exercices-demo-0.0.1-SNAPSHOT.jar \",[\"$\",\"span\",null,{\"className\":\"token parameter variable\",\"children\":\"--spring.profiles.active\"}],[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"test\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si vous lancez l'application avec le JAR, il est possible que le nom du fichier soit différent. Veuillez vérifier le nom du fichier généré dans le répertoire \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"target\"}]}],\".\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_gerer_les_duplications_de_code_dans_les_tests\",\"children\":\" Comment gérer les duplications de code dans les tests ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est important de gérer les duplications de code dans les tests pour éviter la répétition et améliorer la maintenabilité des tests. Les duplications de code peuvent rendre les tests difficiles à lire, à maintenir et à déboguer.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il existe plusieurs techniques pour gérer les duplications de code dans les tests :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Utiliser des fonctions utilitaires\"}],\" : Créez des fonctions utilitaires pour les actions répétitives dans les tests. Ces fonctions peuvent être réutilisées dans plusieurs tests pour éviter la duplication de code.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Utiliser des fonctions de setup et de teardown\"}],\" : Utilisez des fonctions de setup et de teardown pour les actions qui doivent être exécutées avant et après les tests. Ces fonctions permettent de réduire la duplication de code en centralisant les actions communes. Ces fonctions sont : \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeEach\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"afterEach\"}]}],\", \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeAll\"}]}],\" et \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"afterAll\"}]}],\".\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Utiliser des fixtures\"}],\" : Créez des fixtures pour les données et les états de l'application qui sont utilisés dans plusieurs tests. Les fixtures permettent de centraliser les données et les états de l'application pour éviter la duplication de code. N'hésitez pas à consulter la documentation de Playwright pour en savoir plus sur les fixtures : \",[\"$\",\"a\",null,{\"href\":\"https://playwright.dev/docs/test-fixtures\",\"children\":\"https://playwright.dev/docs/test-fixtures\"}]]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Suite des tests pour le register\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons voir comment gérer les duplications de code dans les tests pour le register d'un utilisateur sur une application web.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons commencer par ce scénario : \",[\"$\",\"code\",null,{\"children\":\"Scénario 2 - \\\"Register KO\\\" : L'utilisateur clic sur \\\"Créer un utilisateur\\\", saisit un username déjà existant, puis clique sur le bouton \\\"Créer le compte\\\". Il devrait voir un message d'erreur indiquant que le username est déjà pris.\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons commencer par ce cas de test : \",[\"$\",\"code\",null,{\"children\":\"Cas de test 2.1 : Saisir un username déjà existant et un mot de passe valide, puis cliquer sur le bouton \\\"Créer un compte\\\". Vérifier que l'utilisateur voit un message d'erreur indiquant que le username est déjà pris.\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Ici, l'UI ne permet actuellement pas d'afficher un message d'erreur si le username est déjà pris. Néanmoins, un message d'erreur est affiché dans la console du navigateur à l'aide de \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"console.error()\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Voici le code la \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"RegisterPage\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-tsx\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-tsx code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"handleSubmit\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"e\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token maybe-class-name\",\"children\":\"SyntheticEvent\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token arrow operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    e\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"preventDefault\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"try\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerUser\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"navigate\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'/'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"catch\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"err\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token console class-name\",\"children\":\"console\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token method function property-access\",\"children\":\"error\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'RegisterPage::error: '\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" err\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous savons que lorsqu'un utilisateur est déjà présent dans l'API, un message d'erreur est affiché dans la console du navigateur qui affichera le HTTP status code 409.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons donc vérifier que ce message d'erreur est bien affiché dans la console du navigateur.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pensez à bien réinitialiser la base de données avant de commencer les tests. Pour ce faire, dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"/e2e-tests/api\"}],\", veuillez redémarrer l'API avec la commande suivante :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-bash\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"mvn clean spring-boot:run -Dspring-boot.run.profiles\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\"test\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pensez aussi a bien garder le frontend de la pizzeria en exécution.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Voici le code de la spécification de test \",[\"$\",\"code\",null,{\"children\":\"register.spec.ts\"}],\" que vous devez mettre à jour pour ce cas de test :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" faker \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@faker-js/faker\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":[\"test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"describe\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC1.1: should register a new user when valid username \u0026 password\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goto\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"24\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC2.1: should not register a new user when existing username\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"25\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"26\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"27\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farina\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"28\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farinapwd\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"29\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"30\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goto\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"31\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"32\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"33\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"34\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"35\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"36\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"37\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"38\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"39\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"40\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"41\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"42\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"se déconnecter\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"43\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"44\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"45\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"46\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"47\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"48\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"50\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"51\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"52\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check in the console for the error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"53\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" message \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"waitForEvent\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"54\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"console\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"55\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"type\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"error\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"56\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"57\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"58\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check for specific error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"59\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"text\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toContain\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"409\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"60\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"page.waitForEvent\"}]}],\" permet d'attendre un événement donné. Dans notre cas, nous attendons un événement de type \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"console\"}]}],\". Nous vérifions ensuite que le message d'erreur contient le code d'erreur \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"409\"}]}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous voyons qu'il y a pas mal de duplications de code dans les tests. Nous allons voir comment gérer ces duplications de code.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Attention, ces deux cas créent deux utilisateurs dans la base de données. Le deuxième scénario de test crée une utilisatrice \",[\"$\",\"code\",null,{\"children\":\"farina\"}],\" et le premier scénario de test crée un utilisateur aléatoire. Il est donc possible que le deuxième scénario de test échoue si l'utilisateur \",[\"$\",\"code\",null,{\"children\":\"farina\"}],\" est déjà présent dans la base de données. Cela va arriver si vous exécutez les tests sur les 3 browsers en même temps. Pour éviter cela, vous pouvez exécuter les tests sur un seul browser à la fois.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configuration d'un seul browser\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour exécuter les tests sur un seul browser, vous pouvez modifier la propriété \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"projects\"}]}],\" dans le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"playwright.config.ts\"}]}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"//...\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\" projects\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'chromium'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      use\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"...\"}],\"devices\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"[\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"'Desktop Chrome'\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"]\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Utilisation de fonctions utilitaires\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons commencer par extraire le code commun dans deux fonctions utilitaires.\",[\"$\",\"br\",null,{}],\"\\n\",\"Pour ce faire, veuillez créer un nouveau fichier \",[\"$\",\"code\",null,{\"children\":\"helper.ts\"}],\" dans le répertoire \",[\"$\",\"code\",null,{\"children\":\"tests\"}],\" de votre projet \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" et y ajouter le code suivant :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" Page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"goFromHomePageToRegisterPage\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" Page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goto\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"créer un utilisateur\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toHaveURL\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"http://localhost:5173/register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function-variable function\",\"children\":\"registerWith\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" Page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token builtin\",\"children\":\"string\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"username\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"textbox\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"password\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"fill\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByRole\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"button\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" name\",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Créer le compte\\\"\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"export\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" registerWith\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" goFromHomePageToRegisterPage \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans ce code, nous avons créé deux fonctions utilitaires :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"goFromHomePageToRegisterPage\"}]}],\" : Cette fonction permet de naviguer de la HomePage à la page de register.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"registerWith\"}]}],\" : Cette fonction permet de remplir les champs de texte pour le username et le mot de passe, puis de cliquer sur le bouton \\\"Créer le compte\\\".\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons maintenant mettre à jour les tests pour utiliser ces fonctions utilitaires. Voici le code mis à jour de la spécification de test \",[\"$\",\"code\",null,{\"children\":\"register.spec.ts\"}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" faker \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@faker-js/faker\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" goFromHomePageToRegisterPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" registerWith \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"./helper\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[\"test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"describe\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC1.1: should register a new user when valid username \u0026 password\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"9\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goFromHomePageToRegisterPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"13\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC2.1: should not register a new user when existing username\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"21\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goFromHomePageToRegisterPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farina\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farinapwd\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"25\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"se déconnecter\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"31\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goFromHomePageToRegisterPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check in the console for the error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" message \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"waitForEvent\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"console\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"type\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"error\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check for specific error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"text\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toContain\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"409\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Utilisation de fonctions de setup et de teardown\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons maintenant voir comment utiliser une fonction de setup pour réduire les duplications de code dans les tests.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans les deux cas de test que nous avons écrits, et dans tous les cas de tests associé au register, nous devons à chaque fois nous rendre sur la HomePage, cliquer sur \\\"créer un utilisateur\\\", puis nous rendre sur la page de register.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous allons donc utiliser une fonction de setup pour effectuer ces actions avant chaque test. Pour ce faire, nous allons utiliser la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"beforeEach\"}]}],\" de Playwright.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Voici le code mis à jour de la spécification de test \",[\"$\",\"code\",null,{\"children\":\"register.spec.ts\"}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-ts\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-ts code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" expect \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@playwright/test\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" faker \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"@faker-js/faker\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"import\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" goFromHomePageToRegisterPage\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" registerWith \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"from\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"./helper\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"5\",\"children\":[\"test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"describe\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"Register\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"6\",\"children\":[\"  test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"beforeEach\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\" page \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"7\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goFromHomePageToRegisterPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC1.1: should register a new user when valid username \u0026 password\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"12\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"13\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"username\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" faker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],\"internet\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"password\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"TC2.1: should not register a new user when existing username\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"async\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"21\",\"children\":[\"    page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"22\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"{\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"23\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" username \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farina\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" password \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"farinapwd\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token template-string\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"Hello dear \"}],[\"$\",\"span\",null,{\"className\":\"token interpolation\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"$${\"}],\"username\",[\"$\",\"span\",null,{\"className\":\"token interpolation-punctuation punctuation\",\"children\":\"}\"}]]}],[\"$\",\"span\",null,{\"className\":\"token template-punctuation string\",\"children\":\"`\"}]]}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toBeVisible\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"29\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"getByText\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"se déconnecter\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"click\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"30\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"31\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"goFromHomePageToRegisterPage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"32\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"33\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"registerWith\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" username\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\" password\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check in the console for the error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"const\"}],\" message \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token keyword\",\"children\":\"await\"}],\" page\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"waitForEvent\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"console\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\",\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"=\u003e\"}],\" msg\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"type\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token operator\",\"children\":\"===\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"error\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token comment\",\"children\":\"// Check for specific error message\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"expect\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],\"message\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"text\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\".\"}],[\"$\",\"span\",null,{\"className\":\"token function\",\"children\":\"toContain\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"(\"}],[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"409\\\"\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"}\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\")\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\";\"}],\"\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans ce code, nous avons utilisé la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"test.beforeEach\"}]}],\" pour exécuter la fonction \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"goFromHomePageToRegisterPage\"}]}],\" avant chaque test. Cette fonction permet de réduire les duplications de code en centralisant les actions communes.\\nDe plus, elle permet de \",[\"$\",\"strong\",null,{\"children\":\"garantir que les tests commencent dans un état connu et cohérent\"}],\".\"]}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_ecrire_des_tests_e_2_e_de_qualite\",\"children\":\" Comment écrire des tests e2e de qualité ? \"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous vous conseillons de suivre les bonnes pratiques de développement pour écrire des tests e2e de qualité. Voici quelques conseils pour écrire des tests e2e robustes et fiables :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Utiliser des sélecteurs CSS spécifiques\"}],\" : Utilisez des sélecteurs CSS spécifiques pour cibler les éléments de l'application que vous souhaitez tester. Évitez d'utiliser des sélecteurs basés sur la position des éléments dans la page, car ils sont plus susceptibles de changer.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Gérer les attentes\"}],\" : Gérez les attentes dans vos tests e2e en utilisant des fonctions d'attente ou des assertions pour vérifier que les éléments de l'application sont dans l'état attendu.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Nettoyer l'état de l'application\"}],\" : Assurez-vous de nettoyer l'état de l'application entre chaque test pour éviter les effets de bord et les interactions inattendues entre les tests.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans les prochaines sections, nous verrons comment intégrer les tests e2e dans notre pipeline CI/CD pour garantir la qualité de nos applications.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_integrer_les_tests_e_2_e_dans_le_pipeline_de_ci\",\"children\":\" Comment intégrer les tests e2e dans le pipeline de CI ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Il est important d'intégrer les tests e2e dans le pipeline de CI pour garantir la qualité de l'application et détecter les problèmes le plus tôt possible. Les tests e2e permettent de valider le bon fonctionnement de l'application dans son ensemble et de vérifier que les différentes parties de l'application interagissent correctement.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans la suite du tutoriel \",[\"$\",\"code\",null,{\"children\":\"e2e-tests\"}],\", nous allons voir comment intégrer les tests e2e avec Playwright dans le pipeline de CI à l'aide de GitLab CI.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour ce faire, veuillez reprendre le repository de votre projet GitLab personnel (ou de votre projet GitLab associé à un groupe pour un ou une membre d'un groupe d'étudiants Vinci) et suivre les étapes suivantes.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez copier / coller votre répertoire \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" créé au tutoriel précédent (dont le chemin est \",[\"$\",\"code\",null,{\"children\":\"e2e-tests/e2e\"}],\") à la racine du repository de votre projet GitLab. N'oubliez pas que vous devez pousser des modifications à partir d'une nouvelle branche.\",[\"$\",\"br\",null,{}],\"\\n\",\"A vous de jouer donc, de choisir un nom de branche.\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configuration de GitLab CI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans le repository de votre projet GitLab, voici le contenu actuel du fichier \",[\"$\",\"code\",null,{\"children\":\".gitlab-ci.yml\"}],\" :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-yaml\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-yaml code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"api test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" maven\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"3.9.9\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"amazoncorretto\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"21\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd api\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" mvn clean test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/site/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/surefire\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"frontend test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" node\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"20\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd frontend\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run lint\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run coverage\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/coverage/\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez mettre à jour le fichier \",[\"$\",\"code\",null,{\"children\":\".gitlab-ci.yml\"}],\" et y ajouter le code suivant :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-yaml\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-yaml code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stages\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"2\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"3\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"4\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"5\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"api test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"6\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" maven\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"3.9.9\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"amazoncorretto\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"21\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd api\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"10\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" mvn clean test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"11\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"12\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"13\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"14\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/site/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"15\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/surefire\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"frontend test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"18\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" node\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"20\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd frontend\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run lint\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run coverage\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/coverage/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"29\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"e2e tests\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"30\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"31\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" mcr.microsoft.com/playwright\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"v1.50.0\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"jammy\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"32\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"services\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"33\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"dind\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"34\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"variables\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"DOCKER_HOST\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" tcp\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"//docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2375\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"36\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"before_script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"   \\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"37\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt update \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"y\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"38\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" wget https\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"//download.oracle.com/java/21/latest/jdk\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"21_linux\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"x64_bin.deb\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"39\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt install ./jdk\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"21_linux\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"x64_bin.deb\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"40\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt install \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"y maven docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"compose\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"v2\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"41\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" docker compose \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"f api/docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"compose.yaml up \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"build \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"d\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"42\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 5\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"43\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd api\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"44\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" mvn clean spring\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"boot\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"run \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"Dspring\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"boot.run.profiles=test \u0026\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"45\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 30\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"46\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd ../frontend\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"47\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"48\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run dev \u0026\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 30\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"50\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd ../e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"51\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"52\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"53\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npx playwright test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"54\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"55\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"56\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e/playwright\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"report/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"57\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e/test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"results/\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans ce fichier, nous avons deux \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"stages\"}]}],\" : \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" et \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\". Le stage \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" contient les tâches de test pour l'API et le frontend, tandis que le stage \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\" contient les tâches de test e2e avec Playwright.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Un \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"stage\"}]}],\" dans GitLab CI permet de regrouper des tâches en fonction de leur objectif. Les stages sont exécutés en série, ce qui signifie que le stage \",[\"$\",\"code\",null,{\"children\":\"test\"}],\" sera exécuté en premier, suivi du stage \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\".\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si l'on souhaite passer des fichiers d'un stage à un autre, il est possible de le faire en utilisant les \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"artifacts\"}]}],\". Les \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"artifacts\"}]}],\" sont des fichiers générés par les tâches de CI qui peuvent être utilisés dans d'autres tâches. Nous verrons cela plus tard, lors du déploiement d'applications.\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Dans le stage \",[\"$\",\"code\",null,{\"children\":\"e2e\"}],\", nous utilisons l'image \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"mcr.microsoft.com/playwright:v1.50.0-jammy\"}]}],\" pour exécuter les tests e2e avec Playwright. Cette image contient Playwright et tous les navigateurs nécessaires pour exécuter les tests e2e. Si vous tentez de créer une image Docker avec Playwright, vous pouvez consulter la documentation officielle de Playwright : \",[\"$\",\"a\",null,{\"href\":\"https://playwright.dev/docs/ci\",\"children\":\"https://playwright.dev/docs/ci\"}],[\"$\",\"br\",null,{}],\"\\n\",\"Il est important de noter que si vous tentez de construire votre propre image de Playwright, vous devrez également installer les navigateurs nécessaires pour exécuter les tests e2e, et cela rend la configuration très complexe.\",[\"$\",\"br\",null,{}],\"\\n\",\"Dans notre cas, nous utilisons l'image officielle de Playwright qui contient pas mal de choses que nous avons besoin pour exécuter les tests e2e.\",[\"$\",\"br\",null,{}],\"\\n\",\"Néanmoins, nous devons aussi rajouter des dépendances à cette image :\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"celles nécessaire à l'API : Java et Maven.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Docker Compose pour pouvoir exécuter la DB dans un conteneur.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Nous utilisons la variables \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"DOCKER_HOST\"}]}],\" pour spécifier l'hôte Docker à utiliser dans le pipeline de CI. En utilisant \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"docker:dind\"}]}],\", nous pouvons exécuter des conteneurs Docker dans le pipeline de CI. Toutes les commandes données dans le \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"before_script\"}]}],\" seront exécutées avant le script principal. Ces commandes s'exécutent au sein de la pipeline de CI qui elle aussi s'exécute dans un conteneur Docker. Ainsi, pour la DB, nous utilisons \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"docker compose\"}]}],\" pour démarrer le conteneur de la DB.\",[\"$\",\"br\",null,{}],\"\\n\",\"Comment est-ce que le conteneur de la pipeline de CI peut accéder à la DB ?\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Réseau Docker\"}],\" : Les conteneurs démarrés par docker compose partagent un réseau Docker par défaut. Le conteneur de la pipeline GitLab CI peut accéder à ce réseau.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Hôte Docker\"}],\" : Pour accéder au conteneur de la DB depuis le conteneur de la pipeline (contenant l'API, le frontend et l'application Playwright de e2e), utilisez l'hôte \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"docker\"}]}],\" au lieu de \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"localhost\"}]}],\". Cela permet au conteneur de la pipeline de se connecter au réseau Docker partagé.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Veuillez donc mettre à jour le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\" de l'API pour qu'il utilise \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"docker\"}]}],\" comme hôte de la base de données :\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.url\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"jdbc:postgresql://docker:5432/cae_db\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Vous noterez que nous avons ajouté une pause de 30 secondes après le démarrage de l'API et du frontend pour s'assurer qu'ils sont prêts avant de commencer les tests e2e. Cette pause est nécessaire car le build de l'API et du frontend peut prendre un certain temps et les tests e2e peuvent échouer si l'API ou le frontend ne sont pas prêts.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Une fois que c'est fait, vous pouvez pousser les modifications sur votre branche et créer une Merge Request. Vos tests e2e devrait maintenant s'exécuter dans le pipeline de CI.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Veuillez vérifier que la pipeline de CI s'exécute correctement et que les tests e2e s'exécutent sans erreur.\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Etat actuel de la pipeline de CI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans ce tutoriel, nous avons vu comment écrire des tests e2e avec Playwright pour tester une application web. Nous avons vu comment écrire des cas de test pour le register d'un utilisateur et comment gérer les duplications de code dans les tests. Nous avons également vu comment intégrer les tests e2e dans le pipeline de CI à l'aide de GitLab CI.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous voyons que la mise en place de la pipeline de CI pour les tests e2e est un peu plus complexe que pour les tests unitaires et les tests d'intégration. Cela est dû au fait que les tests e2e nécessitent un environnement complet de l'application pour s'exécuter. Il est donc important de bien configurer l'environnement de test pour garantir que les tests e2e s'exécutent correctement.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Voici à quoi correspond l'environnement de test pour notre pipeline acutel de CI :\"}],\"\\n\",[\"$\",\"$L17\",null,{\"src\":\"/diagrams/iteration1-test-deployment.puml\",\"alt\":\"Environnement de ci actuel\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"La configuration actuelle contient quelques faiblesses :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Les tests e2e s'exécutent dans un seul navigateur. Il est important de tester l'application dans plusieurs navigateurs pour garantir la compatibilité.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous utilisons une pause de 30 secondes pour attendre que l'API et le frontend soient prêts. Cette pause n'est pas idéale et peut entraîner des problèmes si les services prennent plus de temps à démarrer.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous utilisons une image Docker pour exécuter les tests e2e. Cette image contient notamment Playwright et les navigateurs nécessaires, mais elle peut être complexe à configurer et à maintenir.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous devons à chaque push de modification installer les dépendances nécessaires à chaque job. Cela ralentit le pipeline de CI.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous n'avons pas un seul réseau pour les différentes applications : la DB est sur un autre réseau que l'API, le frontend et les tests e2e. Cela peut poser des problèmes de communication entre les applications et rend la configuration des URLs pour communiquer plus complexe.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous ne testons pas l'application dans son environnement de production. Il est important de tester l'application dans un environnement de production, une fois l'application déployée, pour garantir que tout fonctionne correctement pour les utilisateurs de l'application.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous ne réutilisons pas le build d'un service (api \u0026 frontend) d'un stage à l'autre. Cela peut ralentir le pipeline de CI.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Les builds de l'API et du frontend sont des builds de développement. Il est important de construire l'API et le frontend pour la production avant de les tester ; il faudra donc apprendre à créer des builds de production (lancer la commande \",[\"$\",\"code\",null,{\"children\":\"npm run build\"}],\" par exemple au lieu de \",[\"$\",\"code\",null,{\"children\":\"npm run dev\"}],\" pour le frontend) et à les exécuter.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons prochainement voir que la containérisation des applications peut nous aider à résoudre plusieurs de ces problèmes.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Mais avant cela, nous allons voir si nous pouvons optimiser la configuration actuelle de la pipeline de CI pour les tests e2e en utilisant le cache de GitLab CI.\"}],\"\\n\",[\"$\",\"h1\",null,{\"children\":[\"$\",\"a\",null,{\"id\":\"comment_utiliser_le_cache_de_git_lab_ci\",\"children\":\" Comment utiliser le cache de GitLab CI ? \"}]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Le cache de GitLab CI permet de stocker des fichiers ou des répertoires entre les différents jobs d'une pipeline de CI. Cela permet de réduire le temps de construction en évitant de télécharger les dépendances à chaque exécution du pipeline.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Dans la suite de ce tutoriel, nous allons voir comment utiliser le cache de GitLab CI pour stocker les dépendances des tests e2e entre les différents jobs de la pipeline.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Voici comment fonctionne le cache de GitLab CI :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Lorsqu'un job est exécuté pour la première fois, le cache est vide.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"À la fin de l'exécution du job, les fichiers ou les répertoires spécifiés dans le cache sont stockés.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Lorsque le même job est exécuté à nouveau, les fichiers ou les répertoires stockés dans le cache sont téléchargés et utilisés.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Cela permet de réduire le temps de construction en évitant de télécharger les dépendances à chaque exécution du job.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Comment savoir si le cache doit être mis à jour ? GitLab CI utilise une clé pour identifier le cache. Si la clé change, le cache est considéré comme obsolète et doit être mis à jour.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Configuration du cache de GitLab CI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Pour tenter d'accélérer le temps d'exécution de notre pipeline, nous pourrions tenter d'utiliser le cache de GitLab CI en mettant à jour notre fichier \",[\"$\",\"code\",null,{\"children\":\".gitlab-ci.yml\"}],\":\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-yaml\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-yaml code-highlight\",\"children\":[[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"1\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stages\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"2\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"3\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"variables\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"5\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"MAVEN_OPTS\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" \",[\"$\",\"span\",null,{\"className\":\"token string\",\"children\":\"\\\"-Dmaven.repo.local=$CI_PROJECT_DIR/.m2/repository\\\"\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"6\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"7\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"api test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"8\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"9\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" maven\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"3.9.9\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"amazoncorretto\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"21\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"10\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"cache\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"11\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"key\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"12\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"files\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"13\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/pom.xml\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"14\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"15\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" $CI_PROJECT_DIR/.m2/repository\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"16\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"17\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd api\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"18\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" mvn clean test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"19\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"20\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"21\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"22\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/site/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"23\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/target/surefire\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"reports/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"24\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"25\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"frontend test\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"26\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"27\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" node\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"20\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"28\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"cache\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"29\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"key\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"30\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"files\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"31\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/package\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"lock.json\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"32\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"33\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/node_modules\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"34\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"35\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd frontend\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"36\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"37\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run lint\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"38\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run coverage\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"39\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"40\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"41\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/coverage/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"42\",\"children\":\"\\n\"}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"43\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"e2e tests\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"44\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"stage\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"45\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"image\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" mcr.microsoft.com/playwright\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"v1.50.0\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"jammy\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"46\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"services\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"47\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"dind\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"48\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"variables\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"49\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"DOCKER_HOST\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\" tcp\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"//docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],[\"$\",\"span\",null,{\"className\":\"token number\",\"children\":\"2375\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"50\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"cache\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"51\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"key\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"52\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"files\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"53\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" api/pom.xml\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"54\",\"children\":[\"        \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/package\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"lock.json\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"55\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"56\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" $CI_PROJECT_DIR/.m2/repository\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"57\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" frontend/node_modules\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number highlight-line\",\"line\":\"58\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e/node_modules\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"59\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"before_script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"60\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt update \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"y\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"61\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" wget https\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"//download.oracle.com/java/21/latest/jdk\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"21_linux\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"x64_bin.deb\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"62\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt install ./jdk\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"21_linux\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"x64_bin.deb\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"63\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" apt install \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"y maven docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"compose\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"v2\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"64\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" docker compose \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"f api/docker\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"compose.yaml up \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"build \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"d\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"65\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 5\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"66\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd api\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"67\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" mvn clean spring\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"boot\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"run \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"Dspring\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"boot.run.profiles=test \u0026\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"68\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 30\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"69\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd ../frontend\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"70\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"71\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm run dev \u0026\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"72\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" sleep 30\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"73\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" cd ../e2e\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"74\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npm install\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"75\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"script\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"76\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" npx playwright test\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"77\",\"children\":[\"  \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"artifacts\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"78\",\"children\":[\"    \",[\"$\",\"span\",null,{\"className\":\"token key atrule\",\"children\":\"paths\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\":\"}],\"\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"79\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e/playwright\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"report/\\n\"]}],[\"$\",\"span\",null,{\"className\":\"code-line line-number\",\"line\":\"80\",\"children\":[\"      \",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\" e2e/test\",[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"-\"}],\"results/\\n\"]}]]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Voici quelques points importants à noter dans cette configuration :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Nous avons ajouté une clé pour le cache de l'API et du frontend. Cette clé est basée sur les fichiers de dépendances de l'API et du frontend. Si ces fichiers changent, le cache est considéré comme obsolète et doit être mis à jour.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Il existe d'autres clés possibles pour le cache, comme par exemple des variables d'environnement, des fichiers de configuration, etc. ;  par exemple, GitLab CI propose d'utiliser :\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"la variable \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$$CI_COMMIT_REF_SLUG\"}]}],\" pour partager le cache entre des jobs de la même branche\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"la variable \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"$$CI_JOB_NAME\"}]}],\" pour partager le cache entre toutes les branches avec un cache unique par job.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"Pour pouvoir accéder aux dépendances de Maven, nous avons défini la variable \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"MAVEN_OPTS\"}]}],\" pour spécifier le répertoire local du dépôt Maven. Cela permet de stocker les dépendances de Maven dans le cache et de les réutiliser entre les différents jobs.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Conclusion sur le cache de GitLab CI\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Après configuration du cache, le temps d'exécution de la pipeline n'est pas significativement plus court.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous ne creuserons pas plus loin pour l'aspect cache de GitLab CI, car nous allons prochainement voir que la containérisation des applications peut nous aider à résoudre plusieurs problèmes de la configuration actuelle du pipeline de CI.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si vous souhaitez en savoir plus sur le cache de GitLab CI, vous pouvez consulter la documentation officielle de GitLab : \",[\"$\",\"a\",null,{\"href\":\"https://docs.gitlab.com/ee/ci/caching/\",\"children\":\"https://docs.gitlab.com/ee/ci/caching/\"}]]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Si nécessaire, vous pouvez trouver le code associé aux tests e2e ici : \",[\"$\",\"a\",null,{\"href\":\"https://github.com/e-vinci/cae-theory-demos/tree/main/e2e-tests\",\"children\":\"e2e-test\"}],\".\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Problème de configuration de l'API\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"Attention, si vous exécutez l'API avec le profil de test localement, l'API est configurée pour utiliser \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"docker\"}]}],\" comme hôte de la base de données dans le pipeline de CI. En effet, la configuration de l'API, au sein du fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\", est la suivante\"]}],\"\\n\",[\"$\",\"pre\",null,{\"className\":\"language-properties\",\"children\":[\"$\",\"code\",null,{\"className\":\"language-properties code-highlight\",\"children\":[\"$\",\"span\",null,{\"className\":\"code-line\",\"children\":[[\"$\",\"span\",null,{\"className\":\"token key attr-name\",\"children\":\"spring.datasource.url\"}],[\"$\",\"span\",null,{\"className\":\"token punctuation\",\"children\":\"=\"}],[\"$\",\"span\",null,{\"className\":\"token value attr-value\",\"children\":\"jdbc:postgresql://docker:5432/cae_db\"}],\"\\n\"]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Cette configuration fonctionne donc bien sur la pipeline de CI, mais pas si vous souhaitez exécuter l'API localement et vous connecter à votre DB localement.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Pour exécuter l'API localement, vous pourriez :\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"soit modifier le fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\" pour utiliser \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"localhost\"}]}],\" comme hôte de la base de données (\",[\"$\",\"code\",null,{\"children\":\"jdbc:postgresql://localhost:5432/cae_db\"}],\")\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"soit créer deux profils de tests différents, un pour la pipeline de CI et un pour l'exécution locale de l'API. Vous pourriez par exemple créer un fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-ci.properties\"}]}],\" pour la pipeline de CI et un fichier \",[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"application-test.properties\"}]}],\" pour l'exécution locale de l'API.\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"soit utiliser une DB en ligne, pour exécuter l'API localement. Ainsi l'URL vers la DB ne changera pas.\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"soit ... il existe d'autres solutions, mais nous ne les détaillerons pas ici.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Nous allons voir comment éviter ce genre de problèmes plus tard dans le cours, afin d'automatiser la gestion des URLs en fonction de l'environnement dans lequel nos applications sont exécutées.\"}]]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Tests e2e\"}]]\n"])</script><script>self.__next_f.push([1,"b:null\n"])</script></body></html>